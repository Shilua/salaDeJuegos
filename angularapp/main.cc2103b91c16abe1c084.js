(self.webpackChunksala_de_juegos=self.webpackChunksala_de_juegos||[]).push([[179],{8255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=8255,e.exports=t},7368:(e,t,n)=>{"use strict";n.d(t,{deG:()=>En,tb:()=>ef,AFp:()=>Wd,ip1:()=>Gd,CZH:()=>Kd,hGG:()=>Kf,z2F:()=>Vf,sBO:()=>Th,Sil:()=>df,_Vd:()=>Gl,EJc:()=>rf,SBq:()=>Yl,qLn:()=>gi,vpe:()=>Id,gxx:()=>bo,tBr:()=>er,XFs:()=>R,GSi:()=>Na,OlP:()=>Tn,zs3:()=>Mo,ZZ4:()=>gh,aQg:()=>vh,soG:()=>nf,LVF:()=>Zd,YKP:()=>Oh,v3s:()=>jf,h0i:()=>Rh,PXZ:()=>Of,R0b:()=>mf,FiY:()=>tr,Lbi:()=>Xd,g9A:()=>Jd,Qsj:()=>eh,FYo:()=>Xl,JOm:()=>Ei,Tiy:()=>nh,q3G:()=>ti,tp0:()=>rr,EAV:()=>zf,Rgc:()=>Ch,dDg:()=>If,DyG:()=>kn,q4F:()=>ih,GfV:()=>rh,s_b:()=>Lh,ifc:()=>V,eFA:()=>Pf,G48:()=>Df,X6Q:()=>xf,_c5:()=>$f,VLi:()=>Sf,c2e:()=>tf,zSh:()=>To,wAp:()=>xc,vHH:()=>v,EiD:()=>Xr,mCW:()=>Lr,qzn:()=>Tr,JVY:()=>Sr,pB0:()=>Nr,eBb:()=>Ar,L6k:()=>kr,LAX:()=>Cr,cg1:()=>Ac,Tjo:()=>Zf,kL8:()=>Cc,yhl:()=>Er,dqk:()=>z,sIi:()=>Qo,CqO:()=>Ha,QGY:()=>Ba,F4k:()=>za,zlt:()=>Gh,RDi:()=>xe,AaK:()=>d,z3N:()=>Ir,TTD:()=>Ie,xp6:()=>ws,uIk:()=>ia,Suo:()=>Md,Xpm:()=>ee,lG2:()=>ue,Yz7:()=>T,cJS:()=>E,oAB:()=>se,Yjl:()=>ce,Y36:()=>Da,_UZ:()=>Fa,qZA:()=>Ma,TgZ:()=>La,Ikx:()=>Ic,LFG:()=>Qn,$8M:()=>mn,NdJ:()=>Za,CRH:()=>Fd,Q6J:()=>Oa,iGM:()=>Pd,LSH:()=>ii,kYT:()=>oe,_uU:()=>Vu});var r=n(5959),i=n(7570),s=n(8318),o=n(1906),a=n(2875),u=n(1564);function c(){return new r.xQ}function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function h(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function d(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(d).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function f(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const p=l({__forward_ref__:l});function m(e){return e.__forward_ref__=m,e.toString=function(){return d(this())},e}function g(e){return y(e)?e():e}function y(e){return"function"==typeof e&&e.hasOwnProperty(p)&&e.__forward_ref__===m}class v extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function _(e){return"string"==typeof e?e:null==e?"":String(e)}function w(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():_(e)}function b(e,t){const n=t?` in ${t}`:"";throw new v("201",`No provider for ${w(e)} found${n}`)}function I(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function T(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function E(e){return{providers:e.providers||[],imports:e.imports||[]}}function S(e){return k(e,C)||k(e,x)}function k(e,t){return e.hasOwnProperty(t)?e[t]:null}function A(e){return e&&(e.hasOwnProperty(N)||e.hasOwnProperty(D))?e[N]:null}const C=l({"\u0275prov":l}),N=l({"\u0275inj":l}),x=l({ngInjectableDef:l}),D=l({ngInjectorDef:l});var R=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});let O;function P(e){const t=O;return O=e,t}function L(e,t,n){const r=S(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&R.Optional?null:void 0!==t?t:void b(d(e),"Injector")}function M(e){return{toString:e}.toString()}var F=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),V=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const U="undefined"!=typeof globalThis&&globalThis,j="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,B="undefined"!=typeof global&&global,z=U||B||j||q,H={},Z=[],$=l({"\u0275cmp":l}),G=l({"\u0275dir":l}),K=l({"\u0275pipe":l}),W=l({"\u0275mod":l}),Q=l({"\u0275loc":l}),Y=l({"\u0275fac":l}),J=l({__NG_ELEMENT_ID__:l});let X=0;function ee(e){return M(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Z,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||V.Emulated,id:"c",styles:e.styles||Z,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=X++,n.inputs=ae(e.inputs,t),n.outputs=ae(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ne):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(re):null,n})}function te(e,t,n){const r=e.\u0275cmp;r.directiveDefs=()=>t.map(ne),r.pipeDefs=()=>n.map(re)}function ne(e){return le(e)||function(e){return e[G]||null}(e)}function re(e){return function(e){return e[K]||null}(e)}const ie={};function se(e){return M(()=>{const t={type:e.type,bootstrap:e.bootstrap||Z,declarations:e.declarations||Z,imports:e.imports||Z,exports:e.exports||Z,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ie[e.id]=e.type),t})}function oe(e,t){return M(()=>{const n=he(e,!0);n.declarations=t.declarations||Z,n.imports=t.imports||Z,n.exports=t.exports||Z})}function ae(e,t){if(null==e)return H;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const ue=ee;function ce(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function le(e){return e[$]||null}function he(e,t){const n=e[W]||null;if(!n&&!0===t)throw new Error(`Type ${d(e)} does not have '\u0275mod' property.`);return n}const de=20,fe=10;function pe(e){return Array.isArray(e)&&"object"==typeof e[1]}function me(e){return Array.isArray(e)&&!0===e[1]}function ge(e){return 0!=(8&e.flags)}function ye(e){return 2==(2&e.flags)}function ve(e){return 1==(1&e.flags)}function _e(e){return null!==e.template}function we(e,t){return e.hasOwnProperty(Y)?e[Y]:null}class be{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ie(){return Te}function Te(e){return e.type.prototype.ngOnChanges&&(e.setInput=Se),Ee}function Ee(){const e=ke(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===H)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Se(e,t,n,r){const i=ke(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:H,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new be(u&&u.currentValue,t,o===H),e[r]=t}function ke(e){return e.__ngSimpleChanges__||null}Ie.ngInherit=!0;const Ae="http://www.w3.org/2000/svg",Ce="http://www.w3.org/1998/MathML/";let Ne;function xe(e){Ne=e}function De(){return void 0!==Ne?Ne:"undefined"!=typeof document?document:void 0}function Re(e){return!!e.listen}const Oe={createRenderer:(e,t)=>De()};function Pe(e){for(;Array.isArray(e);)e=e[0];return e}function Le(e,t){return Pe(t[e])}function Me(e,t){return Pe(t[e.index])}function Fe(e,t){return e.data[t]}function Ve(e,t){return e[t]}function Ue(e,t){const n=t[e];return pe(n)?n:n[0]}function je(e){return 4==(4&e[2])}function qe(e){return 128==(128&e[2])}function Be(e,t){return null==t?null:e[t]}function ze(e){e[18]=0}function He(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Ze={lFrame:bt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $e(){return Ze.bindingsEnabled}function Ge(){Ze.bindingsEnabled=!0}function Ke(){Ze.bindingsEnabled=!1}function We(){return Ze.lFrame.lView}function Qe(){return Ze.lFrame.tView}function Ye(e){return Ze.lFrame.contextLView=e,e[8]}function Je(){let e=Xe();for(;null!==e&&64===e.type;)e=e.parent;return e}function Xe(){return Ze.lFrame.currentTNode}function et(){const e=Ze.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function tt(e,t){const n=Ze.lFrame;n.currentTNode=e,n.isParent=t}function nt(){return Ze.lFrame.isParent}function rt(){Ze.lFrame.isParent=!1}function it(){return Ze.isInCheckNoChangesMode}function st(e){Ze.isInCheckNoChangesMode=e}function ot(){const e=Ze.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function at(){return Ze.lFrame.bindingIndex}function ut(e){return Ze.lFrame.bindingIndex=e}function ct(){return Ze.lFrame.bindingIndex++}function lt(e){const t=Ze.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ht(e){Ze.lFrame.inI18n=e}function dt(e,t){const n=Ze.lFrame;n.bindingIndex=n.bindingRootIndex=e,ft(t)}function ft(e){Ze.lFrame.currentDirectiveIndex=e}function pt(e){const t=Ze.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function mt(){return Ze.lFrame.currentQueryIndex}function gt(e){Ze.lFrame.currentQueryIndex=e}function yt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function vt(e,t,n){if(n&R.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&R.Host||(r=yt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=Ze.lFrame=wt();return r.currentTNode=t,r.lView=e,!0}function _t(e){const t=wt(),n=e[1];Ze.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function wt(){const e=Ze.lFrame,t=null===e?null:e.child;return null===t?bt(e):t}function bt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function It(){const e=Ze.lFrame;return Ze.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Tt=It;function Et(){const e=It();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function St(){return Ze.lFrame.selectedIndex}function kt(e){Ze.lFrame.selectedIndex=e}function At(){const e=Ze.lFrame;return Fe(e.tView,e.selectedIndex)}function Ct(){Ze.lFrame.currentNamespace=Ae}function Nt(){Ze.lFrame.currentNamespace=Ce}function xt(){Ze.lFrame.currentNamespace=null}function Dt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function Rt(e,t,n){Lt(e,t,3,n)}function Ot(e,t,n,r){(3&e[2])===n&&Lt(e,t,n,r)}function Pt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Lt(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(Mt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Mt(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const Ft=-1;class Vt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function Ut(e,t,n){const r=Re(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?e.setAttribute(t,a,u,o):t.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];qt(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function jt(e){return 3===e||4===e||6===e}function qt(e){return 64===e.charCodeAt(0)}function Bt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||zt(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function zt(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Ht(e){return e!==Ft}function Zt(e){return 32767&e}function $t(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Gt=!0;function Kt(e){const t=Gt;return Gt=e,t}let Wt=0;function Qt(e,t){const n=Jt(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Yt(r.data,e),Yt(t,null),Yt(r.blueprint,null));const i=Xt(e,t),s=e.injectorIndex;if(Ht(i)){const e=Zt(i),n=$t(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Yt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Jt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Xt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return Ft;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ft}function en(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Wt++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function tn(e,t,n){if(n&R.Optional)return e;b(t,"NodeInjector")}function nn(e,t,n,r){if(n&R.Optional&&void 0===r&&(r=null),0==(n&(R.Self|R.Host))){const i=e[9],s=P(void 0);try{return i?i.get(t,r,n&R.Optional):L(t,r,n&R.Optional)}finally{P(s)}}return tn(r,t,n)}function rn(e,t,n,r=R.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(J)?e[J]:void 0;return"number"==typeof t?t>=0?255&t:on:t}(n);if("function"==typeof s){if(!vt(t,e,r))return r&R.Host?tn(i,n,r):nn(t,n,r,i);try{const e=s(r);if(null!=e||r&R.Optional)return e;b(n)}finally{Tt()}}else if("number"==typeof s){let i=null,o=Jt(e,t),a=Ft,u=r&R.Host?t[16][6]:null;for((-1===o||r&R.SkipSelf)&&(a=-1===o?Xt(e,t):t[o+8],a!==Ft&&hn(r,!1)?(i=t[1],o=Zt(a),t=$t(a,t)):o=-1);-1!==o;){const e=t[1];if(ln(s,o,e.data)){const e=an(o,t,n,i,r,u);if(e!==sn)return e}a=t[o+8],a!==Ft&&hn(r,t[1].data[o+8]===u)&&ln(s,o,t)?(i=e,o=Zt(a),t=$t(a,t)):o=-1}}}return nn(t,n,r,i)}const sn={};function on(){return new dn(Je(),We())}function an(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],u=un(a,o,n,null==r?ye(a)&&Gt:r!=o&&0!=(3&a.type),i&R.Host&&s===a);return null!==u?cn(t,o,u,a):sn}function un(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,u=e.directiveStart,c=s>>20,l=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<l;h++){const e=o[h];if(h<u&&n===e||h>=u&&e.type===n)return h}if(i){const e=o[u];if(e&&_e(e)&&e.type===n)return u}return null}function cn(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof Vt){const o=i;o.resolving&&function(e,t){throw new v("200",`Circular dependency in DI detected for ${e}`)}(w(s[n]));const a=Kt(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?P(o.injectImpl):null;vt(e,r,R.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=Te(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==u&&P(u),Kt(a),o.resolving=!1,Tt()}}return i}function ln(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function hn(e,t){return!(e&R.Self||e&R.Host&&t)}class dn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return rn(this._tNode,this._lView,e,void 0,t)}}function fn(e){return M(()=>{const t=e.prototype.constructor,n=t[Y]||pn(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[Y]||pn(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function pn(e){return y(e)?()=>{const t=pn(g(e));return t&&t()}:we(e)}function mn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(jt(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(Je(),e)}const gn="__annotations__",yn="__parameters__",vn="__prop__metadata__";function _n(e,t,n,r,i){return M(()=>{const s=wn(t);function o(...e){if(this instanceof o)return s.call(this,...e),this;const t=new o(...e);return function(n){return i&&i(n,...e),(n.hasOwnProperty(gn)?n[gn]:Object.defineProperty(n,gn,{value:[]})[gn]).push(t),r&&r(n),n}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function wn(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}function bn(e,t,n){return M(()=>{const r=wn(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(yn)?e[yn]:Object.defineProperty(e,yn,{value:[]})[yn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}const In=function(){return bn("Attribute",e=>({attributeName:e,__NG_ELEMENT_ID__:()=>mn(e)}))}();class Tn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=T({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const En=new Tn("AnalyzeForEntryComponents");function Sn(){const e=z.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}const kn=Function;function An(e){return"function"==typeof e}function Cn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),Cn(r,t)):t!==e&&t.push(r)}return t}function Nn(e,t){e.forEach(e=>Array.isArray(e)?Nn(e,t):t(e))}function xn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Dn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Rn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function On(e,t,n){let r=Ln(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Pn(e,t){const n=Ln(e,t);if(n>=0)return e[1|n]}function Ln(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const Mn=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\))\)/,Fn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,Vn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Un=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/;class jn{constructor(e){this._reflect=e||z.Reflect}isReflectionEnabled(){return!0}factory(e){return(...t)=>new e(...t)}_zipTypesAndAnnotations(e,t){let n;n=Rn(void 0===e?t.length:e.length);for(let r=0;r<n.length;r++)n[r]=void 0===e?[]:e[r]&&e[r]!=Object?[e[r]]:[],t&&null!=t[r]&&(n[r]=n[r].concat(t[r]));return n}_ownParameters(e,t){if(n=e.toString(),Mn.test(n)||Un.test(n)||Fn.test(n)&&!Vn.test(n))return null;var n;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;const r=e.ctorParameters;if(r&&r!==t.ctorParameters){const e="function"==typeof r?r():r,t=e.map(e=>e&&e.type),n=e.map(e=>e&&qn(e.decorators));return this._zipTypesAndAnnotations(t,n)}const i=e.hasOwnProperty(yn)&&e[yn],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return s||i?this._zipTypesAndAnnotations(s,i):Rn(e.length)}parameters(e){if(!An(e))return[];const t=Bn(e);let n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]}_ownAnnotations(e,t){if(e.annotations&&e.annotations!==t.annotations){let t=e.annotations;return"function"==typeof t&&t.annotations&&(t=t.annotations),t}return e.decorators&&e.decorators!==t.decorators?qn(e.decorators):e.hasOwnProperty(gn)?e[gn]:null}annotations(e){if(!An(e))return[];const t=Bn(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)}_ownPropMetadata(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){let t=e.propMetadata;return"function"==typeof t&&t.propMetadata&&(t=t.propMetadata),t}if(e.propDecorators&&e.propDecorators!==t.propDecorators){const t=e.propDecorators,n={};return Object.keys(t).forEach(e=>{n[e]=qn(t[e])}),n}return e.hasOwnProperty(vn)?e[vn]:null}propMetadata(e){if(!An(e))return{};const t=Bn(e),n={};if(t!==Object){const e=this.propMetadata(t);Object.keys(e).forEach(t=>{n[t]=e[t]})}const r=this._ownPropMetadata(e,t);return r&&Object.keys(r).forEach(e=>{const t=[];n.hasOwnProperty(e)&&t.push(...n[e]),t.push(...r[e]),n[e]=t}),n}ownPropMetadata(e){return An(e)&&this._ownPropMetadata(e,Bn(e))||{}}hasLifecycleHook(e,t){return e instanceof kn&&t in e.prototype}guards(e){return{}}getter(e){return new Function("o","return o."+e+";")}setter(e){return new Function("o","v","return o."+e+" = v;")}method(e){return new Function("o","args",`if (!o.${e}) throw new Error('"${e}" is undefined');\n        return o.${e}.apply(o, args);`)}importUri(e){return"object"==typeof e&&e.filePath?e.filePath:`./${d(e)}`}resourceUri(e){return`./${d(e)}`}resolveIdentifier(e,t,n,r){return r}resolveEnum(e,t){return e[t]}}function qn(e){return e?e.map(e=>new(0,e.type.annotationCls)(...e.args?e.args:[])):[]}function Bn(e){const t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}const zn={},Hn=/\n/gm,Zn="__source",$n=l({provide:String,useValue:l});let Gn;function Kn(e){const t=Gn;return Gn=e,t}function Wn(e,t=R.Default){if(void 0===Gn)throw new Error("inject() must be called from an injection context");return null===Gn?L(e,void 0,t):Gn.get(e,t&R.Optional?null:void 0,t)}function Qn(e,t=R.Default){return(O||Wn)(g(e),t)}function Yn(e){throw new Error("invalid")}function Jn(e){const t=[];for(let n=0;n<e.length;n++){const r=g(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=R.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(Qn(e,n))}else t.push(Qn(r))}return t}function Xn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const er=Xn(bn("Inject",e=>({token:e})),-1),tr=Xn(bn("Optional"),8),nr=Xn(bn("Self"),2),rr=Xn(bn("SkipSelf"),4),ir=Xn(bn("Host"),1);let sr,or,ar=null;function ur(e){return cr((ar=ar||new jn).parameters(e))}function cr(e){return e.map(e=>function(e){const t={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(e)&&e.length>0)for(let n=0;n<e.length;n++){const r=e[n];if(void 0===r)continue;const i=Object.getPrototypeOf(r);if(r instanceof tr||"Optional"===i.ngMetadataName)t.optional=!0;else if(r instanceof rr||"SkipSelf"===i.ngMetadataName)t.skipSelf=!0;else if(r instanceof nr||"Self"===i.ngMetadataName)t.self=!0;else if(r instanceof ir||"Host"===i.ngMetadataName)t.host=!0;else if(r instanceof er)t.token=r.token;else if(r instanceof In){if(void 0===r.attributeName)throw new Error("Attribute name must be defined.");t.attribute=r.attributeName}else t.token=r}else t.token=void 0===e||Array.isArray(e)&&0===e.length?null:e;return t}(e))}function lr(){if(void 0===sr&&(sr=null,z.trustedTypes))try{sr=z.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return sr}function hr(e){var t;return(null===(t=lr())||void 0===t?void 0:t.createHTML(e))||e}function dr(){if(void 0===or&&(or=null,z.trustedTypes))try{or=z.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return or}function fr(e){var t;return(null===(t=dr())||void 0===t?void 0:t.createHTML(e))||e}function pr(e){var t;return(null===(t=dr())||void 0===t?void 0:t.createScript(e))||e}function mr(e){var t;return(null===(t=dr())||void 0===t?void 0:t.createScriptURL(e))||e}class gr{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class yr extends gr{getTypeName(){return"HTML"}}class vr extends gr{getTypeName(){return"Style"}}class _r extends gr{getTypeName(){return"Script"}}class wr extends gr{getTypeName(){return"URL"}}class br extends gr{getTypeName(){return"ResourceURL"}}function Ir(e){return e instanceof gr?e.changingThisBreaksApplicationSecurity:e}function Tr(e,t){const n=Er(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Er(e){return e instanceof gr&&e.getTypeName()||null}function Sr(e){return new yr(e)}function kr(e){return new vr(e)}function Ar(e){return new _r(e)}function Cr(e){return new wr(e)}function Nr(e){return new br(e)}function xr(e){const t=new Rr(e);return function(){try{return!!(new window.DOMParser).parseFromString(hr(""),"text/html")}catch(e){return!1}}()?new Dr(t):t}class Dr{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(hr(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Rr{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=hr(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=hr(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Or=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Pr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Lr(e){return(e=String(e)).match(Or)||e.match(Pr)?e:"unsafe:"+e}function Mr(e){return(e=String(e)).split(",").map(e=>Lr(e.trim())).join(", ")}function Fr(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Vr(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Ur=Fr("area,br,col,hr,img,wbr"),jr=Fr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),qr=Fr("rp,rt"),Br=Vr(qr,jr),zr=Vr(Ur,Vr(jr,Fr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vr(qr,Fr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Br),Hr=Fr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zr=Fr("srcset"),$r=Vr(Hr,Zr,Fr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Gr=Fr("script,style,template");class Kr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!zr.hasOwnProperty(t))return this.sanitizedSomething=!0,!Gr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,i=t.toLowerCase();if(!$r.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let s=e.value;Hr[i]&&(s=Lr(s)),Zr[i]&&(s=Mr(s)),this.buf.push(" ",t,'="',Yr(s),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();zr.hasOwnProperty(t)&&!Ur.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Yr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Wr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qr=/([^\#-~ |!])/g;function Yr(e){return e.replace(/&/g,"&amp;").replace(Wr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Qr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jr;function Xr(e,t){let n=null;try{Jr=Jr||xr(e);let r=t?String(t):"";n=Jr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=Jr.getInertBodyElement(r)}while(r!==s);return hr((new Kr).sanitizeChildren(ei(n)||n))}finally{if(n){const e=ei(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function ei(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var ti=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function ni(e){const t=li();return t?fr(t.sanitize(ti.HTML,e)||""):Tr(e,"HTML")?fr(Ir(e)):Xr(De(),_(e))}function ri(e){const t=li();return t?t.sanitize(ti.STYLE,e)||"":Tr(e,"Style")?Ir(e):_(e)}function ii(e){const t=li();return t?t.sanitize(ti.URL,e)||"":Tr(e,"URL")?Ir(e):Lr(_(e))}function si(e){const t=li();if(t)return mr(t.sanitize(ti.RESOURCE_URL,e)||"");if(Tr(e,"ResourceURL"))return mr(Ir(e));throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)")}function oi(e){const t=li();if(t)return pr(t.sanitize(ti.SCRIPT,e)||"");if(Tr(e,"Script"))return pr(Ir(e));throw new Error("unsafe value used in a script context")}function ai(e){return hr(e[0])}function ui(e){return function(e){var t;return(null===(t=lr())||void 0===t?void 0:t.createScriptURL(e))||e}(e[0])}function ci(e,t,n){return function(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?si:ii}(t,n)(e)}function li(){const e=We();return e&&e[12]}function hi(e,t){e.__ngContext__=t}function di(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function fi(e){return e.ngDebugContext}function pi(e){return e.ngOriginalError}function mi(e,...t){e.error(...t)}class gi{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||mi}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?fi(e)?fi(e):this._findContext(pi(e)):null}_findOriginalError(e){let t=pi(e);for(;t&&pi(t);)t=pi(t);return t}}const yi=/^>|^->|<!--|-->|--!>|<!-$/g,vi=/(<|>)/,_i=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(z))();function wi(e){return e.ownerDocument.defaultView}function bi(e){return e.ownerDocument}function Ii(e){return e.ownerDocument.body}function Ti(e){return e instanceof Function?e():e}var Ei=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});let Si;function ki(e,t){return Si(e,t)}function Ai(e){const t=e[3];return me(t)?t[3]:t}function Ci(e){return xi(e[13])}function Ni(e){return xi(e[4])}function xi(e){for(;null!==e&&!me(e);)e=e[4];return e}function Di(e,t,n,r,i){if(null!=r){let s,o=!1;me(r)?s=r:pe(r)&&(o=!0,r=r[0]);const a=Pe(r);0===e&&null!==n?null==i?zi(t,n,a):Bi(t,n,a,i||null,!0):1===e&&null!==n?Bi(t,n,a,i||null,!0):2===e?ts(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==Pe(n)&&Di(t,e,r,s,i);for(let o=fe;o<n.length;o++){const i=n[o];rs(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Ri(e,t){return Re(e)?e.createText(t):e.createTextNode(t)}function Oi(e,t,n){Re(e)?e.setValue(t,n):t.textContent=n}function Pi(e,t){return e.createComment(function(e){return e.replace(yi,e=>e.replace(vi,"\u200b$1\u200b"))}(t))}function Li(e,t,n){return Re(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Mi(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,He(i,-1)),n.splice(r,1)}function Fi(e,t){if(e.length<=fe)return;const n=fe+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&Mi(s,r),t>0&&(e[n-1][4]=r[4]);const o=Dn(e,fe+t);rs(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Vi(e,t){if(!(256&t[2])){const n=t[11];Re(n)&&n.destroyNode&&rs(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Ui(e[1],e);for(;t;){let n=null;if(pe(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)pe(t)&&Ui(t[1],t),t=t[3];null===t&&(t=e),pe(t)&&Ui(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ui(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Vt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):Pe(t[e]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Re(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&me(t[3])){n!==t[3]&&Mi(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function ji(e,t,n){return qi(e,t.parent,n)}function qi(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===V.None||t===V.Emulated)return null}return Me(r,n)}function Bi(e,t,n,r,i){Re(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function zi(e,t,n){Re(e)?e.appendChild(t,n):t.appendChild(n)}function Hi(e,t,n,r,i){null!==r?Bi(e,t,n,r,i):zi(e,t,n)}function Zi(e,t){return Re(e)?e.parentNode(t):t.parentNode}function $i(e,t,n){return Wi(e,t,n)}function Gi(e,t,n){return 40&e.type?Me(e,n):null}let Ki,Wi=Gi;function Qi(e,t){Wi=e,Ki=t}function Yi(e,t,n,r){const i=ji(e,r,t),s=t[11],o=$i(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Hi(s,i,n[a],o,!1);else Hi(s,i,n,o,!1);void 0!==Ki&&Ki(s,r,t,n,i)}function Ji(e,t){if(null!==t){const n=t.type;if(3&n)return Me(t,e);if(4&n)return es(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Ji(e,n);{const n=e[t.index];return me(n)?es(-1,n):Pe(n)}}if(32&n)return ki(t,e)()||Pe(e[t.index]);{const n=Xi(e,t);return null!==n?Array.isArray(n)?n[0]:Ji(Ai(e[16]),n):Ji(e,t.next)}}return null}function Xi(e,t){return null!==t?e[16][6].projection[t.projection]:null}function es(e,t){const n=fe+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Ji(e,r)}return t[7]}function ts(e,t,n){const r=Zi(e,t);r&&function(e,t,n,r){Re(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}function ns(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===t&&(a&&hi(Pe(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)ns(e,t,n.child,r,i,s,!1),Di(t,e,i,a,s);else if(32&u){const o=ki(n,r);let u;for(;u=o();)Di(t,e,i,u,s);Di(t,e,i,a,s)}else 16&u?is(e,t,r,n,i,s):Di(t,e,i,a,s);n=o?n.projectionNext:n.next}}function rs(e,t,n,r,i,s){ns(n,r,e.firstChild,t,i,s,!1)}function is(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Di(t,e,i,a[u],s);else ns(e,t,a,o[3],i,s,!0)}function ss(e,t,n){Re(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function os(e,t,n){Re(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function as(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const us="ng-template";function cs(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==as(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function ls(e){return 4===e.type&&e.value!==us}function hs(e,t,n){return t===(4!==e.type||n?e.value:us)}function ds(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(jt(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!hs(e,u,n)||""===u&&1===t.length){if(fs(r))return!1;o=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!cs(e.attrs,c,n)){if(fs(r))return!1;o=!0}continue}const l=ps(8&r?"class":u,i,ls(e),n);if(-1===l){if(fs(r))return!1;o=!0;continue}if(""!==c){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==as(t,c,0)||2&r&&c!==e){if(fs(r))return!1;o=!0}}}}else{if(!o&&!fs(r)&&!fs(u))return!1;if(o&&fs(u))continue;o=!1,r=u|1&r}}return fs(r)||o}function fs(e){return 0==(1&e)}function ps(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ms(e,t,n=!1){for(let r=0;r<t.length;r++)if(ds(e,t[r],n))return!0;return!1}function gs(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function ys(e,t){return e?":not("+t.trim()+")":t}function vs(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||fs(o)||(t+=ys(s,i),i=""),r=o,s=s||!fs(r);n++}return""!==i&&(t+=ys(s,i)),t}const _s={};function ws(e){bs(Qe(),We(),St()+e,it())}function bs(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&Rt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&Ot(t,r,0,n)}kt(n)}function Is(e,t){return e<<17|t<<2}function Ts(e){return e>>17&32767}function Es(e){return 2|e}function Ss(e){return(131068&e)>>2}function ks(e,t){return-131069&e|t<<2}function As(e){return 1|e}function Cs(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];gt(i),n.contentQueries(2,t[s],s)}}}function Ns(e,t,n,r,i,s,o,a,u,c){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,ze(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function xs(e,t,n,r,i){let s=e.data[t];if(null===s)s=Ds(e,t,n,r,i),Ze.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=et();s.injectorIndex=null===e?-1:e.injectorIndex}return tt(s,!0),s}function Ds(e,t,n,r,i){const s=Xe(),o=nt(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}function Rs(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Os(e,t,n){_t(t);try{const r=e.viewQuery;null!==r&&ho(1,r,n);const i=e.template;null!==i&&Ms(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Cs(e,t),e.staticViewQueries&&ho(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)oo(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,Et()}}function Ps(e,t,n,r){const i=t[2];if(256==(256&i))return;_t(t);const s=it();try{ze(t),ut(e.bindingStartIndex),null!==n&&Ms(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&Rt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&Ot(t,n,0,null),Pt(t,0)}if(function(e){for(let t=Ci(e);null!==t;t=Ni(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&He(r,1),n[2]|=1024}}}(t),function(e){for(let t=Ci(e);null!==t;t=Ni(t))for(let e=fe;e<t.length;e++){const n=t[e],r=n[1];qe(n)&&Ps(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Cs(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&Rt(t,n)}else{const n=e.contentHooks;null!==n&&Ot(t,n,1),Pt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)kt(~r);else{const i=r,s=n[++e],o=n[++e];dt(s,i),o(2,t[i])}}}finally{kt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)io(e,t[n])}(t,a);const u=e.viewQuery;if(null!==u&&ho(2,u,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&Rt(t,n)}else{const n=e.viewHooks;null!==n&&Ot(t,n,2),Pt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,He(t[3],-1))}finally{Et()}}function Ls(e,t,n,r){const i=t[10],s=!it(),o=je(t);try{s&&!o&&i.begin&&i.begin(),o&&Os(e,t,r),Ps(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function Ms(e,t,n,r,i){const s=St(),o=2&r;try{kt(-1),o&&t.length>de&&bs(e,t,de,it()),n(r,i)}finally{kt(s)}}function Fs(e,t,n){if(ge(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function Vs(e,t,n){$e()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Qt(n,t),hi(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=_e(r);s&&Js(t,n,r);const u=cn(t,e,a,n);hi(u,t),null!==o&&to(0,a-i,u,r,0,o),s&&(Ue(n.index,t)[8]=u)}}(e,t,n,Me(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Ze.lFrame.currentDirectiveIndex;try{kt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];ft(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Gs(r,i)}}finally{kt(-1),ft(o)}}(e,t,n))}function Us(e,t,n=Me){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function js(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=qs(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function qs(e,t,n,r,i,s,o,a,u,c){const l=de+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:_s);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Bs(e,t,n,r){const i=po(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&mo(e).push(r,i.length-1))}function zs(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Hs(e,t,n,r,i,s,o,a){const u=Me(t,n);let c,l=t.inputs;var h;!a&&null!=l&&(c=l[r])?(vo(e,n,c,r,i),ye(t)&&function(e,t){const n=Ue(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,Re(s)?s.setProperty(u,r,i):qt(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Zs(e,t,n,r){let i=!1;if($e()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];ms(n,o.selectors,!1)&&(i||(i=[]),en(Qt(n,t),e,o.type),_e(o)?(Ks(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Qs(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,u=Rs(e,t,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Bt(n.mergedAttrs,c.hostAttrs),Ys(e,n,t,u,c),Ws(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let u=t.directiveStart;u<n;u++){const e=r[u],n=e.inputs,c=null===i||ls(t)?null:no(n,i);s.push(c),o=zs(n,u,o),a=zs(e.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new v("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=Bt(n.mergedAttrs,n.attrs),i}function $s(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Gs(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Ks(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Ws(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;_e(t)&&(n[""]=e)}}function Qs(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ys(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=we(i.type)),o=new Vt(s,_e(i),null);e.blueprint[r]=o,n[r]=o,$s(e,t,0,r,Rs(e,n,i.hostVars,_s),i)}function Js(e,t,n){const r=Me(t,e),i=js(n),s=e[10],o=ao(e,Ns(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function Xs(e,t,n,r,i,s){const o=Me(e,t);eo(t[11],o,s,e.value,n,r,i)}function eo(e,t,n,r,i,s,o){if(null==s)Re(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?_(s):o(s,r||"",i);Re(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}function to(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function no(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function ro(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function io(e,t){const n=Ue(t,e);if(qe(n)){const e=n[1];80&n[2]?Ps(e,n,e.template,n[8]):n[5]>0&&so(n)}}function so(e){for(let n=Ci(e);null!==n;n=Ni(n))for(let e=fe;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];Ps(e,t,e.template,t[8])}else t[5]>0&&so(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Ue(t[n],e);qe(r)&&r[5]>0&&so(r)}}function oo(e,t){const n=Ue(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Os(r,n,n[8])}function ao(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function uo(e){for(;e;){e[2]|=64;const t=Ai(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function co(e,t,n){const r=t[10];r.begin&&r.begin();try{Ps(e,t,e.template,n)}catch(i){throw yo(t,i),i}finally{r.end&&r.end()}}function lo(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=di(n),i=r[1];Ls(i,r,i.template,n)}}(e[8])}function ho(e,t,n){gt(0),t(e,n)}const fo=(()=>Promise.resolve(null))();function po(e){return e[7]||(e[7]=[])}function mo(e){return e.cleanup||(e.cleanup=[])}function go(e,t,n){return(null===e||_e(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}function yo(e,t){const n=e[9],r=n?n.get(gi,null):null;r&&r.handleError(t)}function vo(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=t[o],c=e.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function _o(e,t,n){const r=Le(t,e);Oi(e[11],r,n)}function wo(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=f(i,e):2==s&&(r=f(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const bo=new Tn("INJECTOR",-1);class Io{get(e,t=zn){if(t===zn){const t=new Error(`NullInjectorError: No provider for ${d(e)}!`);throw t.name="NullInjectorError",t}return t}}const To=new Tn("Set Injector scope."),Eo={},So={};let ko;function Ao(){return void 0===ko&&(ko=new Io),ko}function Co(e,t=null,n=null,r){return new No(e,n,t||Ao(),r)}class No{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&Nn(t,n=>this.processProvider(n,e,t)),Nn([e],e=>this.processInjectorType(e,[],i)),this.records.set(bo,Ro(void 0,this));const s=this.records.get(To);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:d(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=zn,n=R.Default){this.assertNotDestroyed();const r=Kn(this);try{if(!(n&R.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof Tn)&&S(e);t=n&&this.injectableDefInScope(n)?Ro(xo(e),Eo):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&R.Self?Ao():this.parent).get(e,t=n&R.Optional&&t===zn?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(d(e)),r)throw s;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[Zn]&&i.unshift(t[Zn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=d(t);if(Array.isArray(t))i=t.map(d).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Hn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,"R3InjectorError",this.source)}throw s}finally{Kn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(d(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=g(e)))return!1;let r=A(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=A(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{Nn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];Nn(r,e=>this.processProvider(e,n,r||Z))}}this.injectorDefTypes.add(s);const a=we(s)||(()=>new s);this.records.set(s,Ro(a,Eo));const u=r.providers;if(null!=u&&!o){const t=e;Nn(u,e=>this.processProvider(e,t,u))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=Po(e=g(e))?e:g(e&&e.provide);const i=function(e,t,n){return Oo(e)?Ro(void 0,e.useValue):Ro(Do(e),Eo)}(e);if(Po(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=Ro(void 0,Eo,!0),t.factory=()=>Jn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===Eo&&(t.value=So,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=g(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function xo(e){const t=S(e),n=null!==t?t.factory:we(e);if(null!==n)return n;if(e instanceof Tn)throw new Error(`Token ${d(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=Rn(t,"?");throw new Error(`Can't resolve all parameters for ${d(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[C]||e[x]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Do(e,t,n){let r;if(Po(e)){const t=g(e);return we(t)||xo(t)}if(Oo(e))r=()=>g(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...Jn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Qn(g(e.useExisting));else{const t=g(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return we(t)||xo(t);r=()=>new t(...Jn(e.deps))}var i;return r}function Ro(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Oo(e){return null!==e&&"object"==typeof e&&$n in e}function Po(e){return"function"==typeof e}const Lo=function(e,t,n){return function(e,t=null,n=null,r){const i=Co(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let Mo=(()=>{class e{static create(e,t){return Array.isArray(e)?Lo(e,t,""):Lo(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=zn,e.NULL=new Io,e.\u0275prov=T({token:e,providedIn:"any",factory:()=>Qn(bo)}),e.__NG_ELEMENT_ID__=-1,e})();function Fo(e,t){Dt(di(e)[1],Je())}function Vo(e){return Object.getPrototypeOf(e.prototype).constructor}function Uo(e){let t=Vo(e.type),n=!0;const r=[e];for(;t;){let i;if(_e(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=jo(e.inputs),t.declaredInputs=jo(e.declaredInputs),t.outputs=jo(e.outputs);const n=i.hostBindings;n&&zo(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&qo(e,s),o&&Bo(e,o),h(e.inputs,i.inputs),h(e.declaredInputs,i.declaredInputs),h(e.outputs,i.outputs),_e(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===Uo&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Bt(i.hostAttrs,n=Bt(n,i.hostAttrs))}}(r)}function jo(e){return e===H?{}:e===Z?[]:e}function qo(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Bo(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function zo(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}const Ho=["providersResolver"],Zo=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function $o(e){let t,n=Vo(e.type);t=_e(e)?n.\u0275cmp:n.\u0275dir;const r=e;for(const i of Ho)r[i]=t[i];if(_e(t))for(const i of Zo)r[i]=t[i]}let Go=null;function Ko(){if(!Go){const e=z.Symbol;if(e&&e.iterator)Go=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Go=n)}}}return Go}class Wo{constructor(e){this.wrapped=e}static wrap(e){return new Wo(e)}static unwrap(e){return Wo.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Wo}}function Qo(e){return!!Yo(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ko()in e)}function Yo(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Jo(e,t,n){return e[t]=n}function Xo(e,t){return e[t]}function ea(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function ta(e,t,n,r){const i=ea(e,t,n);return ea(e,t+1,r)||i}function na(e,t,n,r,i){const s=ta(e,t,n,r);return ea(e,t+2,i)||s}function ra(e,t,n,r,i,s){const o=ta(e,t,n,r);return ta(e,t+2,i,s)||o}function ia(e,t,n,r){const i=We();return ea(i,ct(),t)&&(Qe(),Xs(At(),i,e,t,n,r)),ia}function sa(e,t){let n=!1,r=at();for(let s=1;s<t.length;s+=2)n=ea(e,r++,t[s])||n;if(ut(r),!n)return _s;let i=t[0];for(let s=1;s<t.length;s+=2)i+=_(t[s])+t[s+1];return i}function oa(e,t,n,r){return ea(e,ct(),n)?t+_(n)+r:_s}function aa(e,t,n,r,i,s){const o=ta(e,at(),n,i);return lt(2),o?t+_(n)+r+_(i)+s:_s}function ua(e,t,n,r,i,s,o,a){const u=na(e,at(),n,i,o);return lt(3),u?t+_(n)+r+_(i)+s+_(o)+a:_s}function ca(e,t,n,r,i,s,o,a,u,c){const l=ra(e,at(),n,i,o,u);return lt(4),l?t+_(n)+r+_(i)+s+_(o)+a+_(u)+c:_s}function la(e,t,n,r,i,s,o,a,u,c,l,h){const d=at();let f=ra(e,d,n,i,o,u);return f=ea(e,d+4,l)||f,lt(5),f?t+_(n)+r+_(i)+s+_(o)+a+_(u)+c+_(l)+h:_s}function ha(e,t,n,r,i,s,o,a,u,c,l,h,d,f){const p=at();let m=ra(e,p,n,i,o,u);return m=ta(e,p+4,l,d)||m,lt(6),m?t+_(n)+r+_(i)+s+_(o)+a+_(u)+c+_(l)+h+_(d)+f:_s}function da(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m){const g=at();let y=ra(e,g,n,i,o,u);return y=na(e,g+4,l,d,p)||y,lt(7),y?t+_(n)+r+_(i)+s+_(o)+a+_(u)+c+_(l)+h+_(d)+f+_(p)+m:_s}function fa(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g,y){const v=at();let w=ra(e,v,n,i,o,u);return w=ra(e,v+4,l,d,p,g)||w,lt(8),w?t+_(n)+r+_(i)+s+_(o)+a+_(u)+c+_(l)+h+_(d)+f+_(p)+m+_(g)+y:_s}function pa(e,t,n,r,i,s){const o=We(),a=oa(o,t,n,r);return a!==_s&&Xs(At(),o,e,a,i,s),pa}function ma(e,t,n,r,i,s,o,a){const u=We(),c=aa(u,t,n,r,i,s);return c!==_s&&Xs(At(),u,e,c,o,a),ma}function ga(e,t,n,r,i,s,o,a,u,c){const l=We(),h=ua(l,t,n,r,i,s,o,a);return h!==_s&&Xs(At(),l,e,h,u,c),ga}function ya(e,t,n,r,i,s,o,a,u,c,l,h){const d=We(),f=ca(d,t,n,r,i,s,o,a,u,c);return f!==_s&&Xs(At(),d,e,f,l,h),ya}function va(e,t,n,r,i,s,o,a,u,c,l,h,d,f){const p=We(),m=la(p,t,n,r,i,s,o,a,u,c,l,h);return m!==_s&&Xs(At(),p,e,m,d,f),va}function _a(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m){const g=We(),y=ha(g,t,n,r,i,s,o,a,u,c,l,h,d,f);return y!==_s&&Xs(At(),g,e,y,p,m),_a}function wa(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g,y){const v=We(),_=da(v,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m);return _!==_s&&Xs(At(),v,e,_,g,y),wa}function ba(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g,y,v,_){const w=We(),b=fa(w,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g,y);return b!==_s&&Xs(At(),w,e,b,v,_),ba}function Ia(e,t,n,r){const i=We(),s=sa(i,t);return s!==_s&&Xs(At(),i,e,s,n,r),Ia}function Ta(e,t,n,r,i,s,o,a){const u=We(),c=Qe(),l=e+de,h=c.firstCreatePass?function(e,t,n,r,i,s,o,a,u){const c=t.consts,l=xs(t,e,4,o||null,Be(c,a));Zs(t,n,l,Be(c,u)),Dt(t,l);const h=l.tViews=qs(2,l,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,u,t,n,r,i,s,o):c.data[l];tt(h,!1);const d=u[11].createComment("");Yi(c,u,d,h),hi(d,u),ao(u,u[l]=ro(d,u,d,h)),ve(h)&&Vs(c,u,h),null!=o&&Us(u,h,a)}function Ea(e){return Ve(Ze.lFrame.contextLView,de+e)}const Sa={"\u0275\u0275defineInjectable":T,"\u0275\u0275defineInjector":E,"\u0275\u0275inject":Qn,"\u0275\u0275invalidFactoryDep":Yn,resolveForwardRef:g},ka=l({provide:String,useValue:l});function Aa(e){return void 0!==e.useClass}function Ca(e){return void 0!==e.useFactory}const Na=_n("Injectable",void 0,void 0,void 0,(e,t)=>xa(e,t)),xa=function(e,t){let n=null,r=null;e.hasOwnProperty(C)||Object.defineProperty(e,C,{get:()=>(null===n&&(n=Sn().compileInjectable(Sa,`ng:///${e.name}/\u0275prov.js`,function(e,t){const n=t||{providedIn:null},r={name:e.name,type:e,typeArgumentCount:0,providedIn:n.providedIn};return(Aa(n)||Ca(n))&&void 0!==n.deps&&(r.deps=cr(n.deps)),Aa(n)?r.useClass=n.useClass:function(e){return ka in e}(n)?r.useValue=n.useValue:Ca(n)?r.useFactory=n.useFactory:function(e){return void 0!==e.useExisting}(n)&&(r.useExisting=n.useExisting),r}(e,t))),n)}),e.hasOwnProperty(Y)||Object.defineProperty(e,Y,{get:()=>{if(null===r){const t=Sn();r=t.compileFactory(Sa,`ng:///${e.name}/\u0275fac.js`,{name:e.name,type:e,typeArgumentCount:0,deps:ur(e),target:t.FactoryTarget.Injectable})}return r},configurable:!0})};function Da(e,t=R.Default){const n=We();return null===n?Qn(e,t):rn(Je(),n,g(e),t)}function Ra(){throw new Error("invalid")}function Oa(e,t,n){const r=We();return ea(r,ct(),t)&&Hs(Qe(),At(),r,e,t,r[11],n,!1),Oa}function Pa(e,t,n,r,i){const s=i?"class":"style";vo(e,n,t.inputs[s],s,r)}function La(e,t,n,r){const i=We(),s=Qe(),o=de+e,a=i[11],u=i[o]=Li(a,t,Ze.lFrame.currentNamespace),c=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,u=xs(t,e,2,i,Be(a,s));return Zs(t,n,u,Be(a,o)),null!==u.attrs&&wo(u,u.attrs,!1),null!==u.mergedAttrs&&wo(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,s,i,0,t,n,r):s.data[o];tt(c,!0);const l=c.mergedAttrs;null!==l&&Ut(a,u,l);const h=c.classes;null!==h&&os(a,u,h);const d=c.styles;null!==d&&ss(a,u,d),64!=(64&c.flags)&&Yi(s,i,u,c),0===Ze.lFrame.elementDepthCount&&hi(u,i),Ze.lFrame.elementDepthCount++,ve(c)&&(Vs(s,i,c),Fs(s,c,i)),null!==r&&Us(i,c)}function Ma(){let e=Je();nt()?rt():(e=e.parent,tt(e,!1));const t=e;Ze.lFrame.elementDepthCount--;const n=Qe();n.firstCreatePass&&(Dt(n,e),ge(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Pa(n,t,We(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Pa(n,t,We(),t.stylesWithoutHost,!1)}function Fa(e,t,n,r){La(e,t,n,r),Ma()}function Va(e,t,n){const r=We(),i=Qe(),s=e+de,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=Be(s,r),a=xs(t,e,8,"ng-container",o);return null!==o&&wo(a,o,!0),Zs(t,n,a,Be(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];tt(o,!0);const a=r[s]=r[11].createComment("");Yi(i,r,a,o),hi(a,r),ve(o)&&(Vs(i,r,o),Fs(i,o,r)),null!=n&&Us(r,o)}function Ua(){let e=Je();const t=Qe();nt()?rt():(e=e.parent,tt(e,!1)),t.firstCreatePass&&(Dt(t,e),ge(e)&&t.queries.elementEnd(e))}function ja(e,t,n){Va(e,t,n),Ua()}function qa(){return We()}function Ba(e){return!!e&&"function"==typeof e.then}function za(e){return!!e&&"function"==typeof e.subscribe}const Ha=za;function Za(e,t,n,r){const i=We(),s=Qe(),o=Je();return Ga(s,i,i[11],o,e,t,!!n,r),Za}function $a(e,t){const n=Je(),r=We(),i=Qe();return Ga(i,r,go(pt(i.data),n,r),n,e,t,!1),$a}function Ga(e,t,n,r,i,s,o,a){const u=ve(r),c=e.firstCreatePass&&mo(e),l=po(t);let h=!0;if(3&r.type||a){const d=Me(r,t),f=a?a(d):d,p=l.length,m=a?e=>a(Pe(e[r.index])):r.index;if(Re(n)){let o=null;if(!a&&u&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Wa(r,t,0,s,!1);const e=n.listen(f,i,s);l.push(s,e),c&&c.push(i,m,p,p+1)}}else s=Wa(r,t,0,s,!0),f.addEventListener(i,s,o),l.push(s),c&&c.push(i,m,p,o)}else s=Wa(r,t,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const e=f.length;if(e)for(let n=0;n<e;n+=2){const e=t[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,e),c&&c.push(i,r.index,o,-(o+1))}}}function Ka(e,t,n,r){try{return!1!==n(r)}catch(i){return yo(e,i),!1}}function Wa(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?Ue(e.index,t):t;0==(32&t[2])&&uo(o);let a=Ka(t,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=Ka(t,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Qa(e=1){return function(e){return(Ze.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Ze.lFrame.contextLView))[8]}(e)}function Ya(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?ms(e,s,!0):gs(r,s))return i}else n=i}return n}function Ja(e){const t=We()[16][6];if(!t.projection){const n=t.projection=Rn(e?e.length:1,null),r=n.slice();let i=t.child;for(;null!==i;){const t=e?Ya(i,e):0;null!==t&&(r[t]?r[t].projectionNext=i:n[t]=i,r[t]=i),i=i.next}}}function Xa(e,t=0,n){const r=We(),i=Qe(),s=xs(i,de+e,16,null,n||null);null===s.projection&&(s.projection=t),rt(),64!=(64&s.flags)&&function(e,t,n){is(t[11],0,t,n,ji(e,n,t),$i(n.parent||t[6],n,t))}(i,r,s)}function eu(e,t,n){return tu(e,"",t,"",n),eu}function tu(e,t,n,r,i){const s=We(),o=oa(s,t,n,r);return o!==_s&&Hs(Qe(),At(),s,e,o,s[11],i,!1),tu}function nu(e,t,n,r,i,s,o){const a=We(),u=aa(a,t,n,r,i,s);return u!==_s&&Hs(Qe(),At(),a,e,u,a[11],o,!1),nu}function ru(e,t,n,r,i,s,o,a,u){const c=We(),l=ua(c,t,n,r,i,s,o,a);return l!==_s&&Hs(Qe(),At(),c,e,l,c[11],u,!1),ru}function iu(e,t,n,r,i,s,o,a,u,c,l){const h=We(),d=ca(h,t,n,r,i,s,o,a,u,c);return d!==_s&&Hs(Qe(),At(),h,e,d,h[11],l,!1),iu}function su(e,t,n,r,i,s,o,a,u,c,l,h,d){const f=We(),p=la(f,t,n,r,i,s,o,a,u,c,l,h);return p!==_s&&Hs(Qe(),At(),f,e,p,f[11],d,!1),su}function ou(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p){const m=We(),g=ha(m,t,n,r,i,s,o,a,u,c,l,h,d,f);return g!==_s&&Hs(Qe(),At(),m,e,g,m[11],p,!1),ou}function au(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g){const y=We(),v=da(y,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m);return v!==_s&&Hs(Qe(),At(),y,e,v,y[11],g,!1),au}function uu(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g,y,v){const _=We(),w=fa(_,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g,y);return w!==_s&&Hs(Qe(),At(),_,e,w,_[11],v,!1),uu}function cu(e,t,n){const r=We(),i=sa(r,t);return i!==_s&&Hs(Qe(),At(),r,e,i,r[11],n,!1),cu}function lu(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?Ts(s):Ss(s),u=!1;for(;0!==a&&(!1===u||o);){const n=e[a+1];hu(e[a],t)&&(u=!0,e[a+1]=r?As(n):Es(n)),a=r?Ts(n):Ss(n)}u&&(e[n+1]=r?Es(s):As(s))}function hu(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Ln(e,t)>=0}const du={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function fu(e){return e.substring(du.key,du.keyEnd)}function pu(e){return e.substring(du.value,du.valueEnd)}function mu(e,t){const n=du.textEnd;return n===t?-1:(t=du.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,du.key=t,n),vu(e,t,n))}function gu(e,t){const n=du.textEnd;let r=du.key=vu(e,t,n);return n===r?-1:(r=du.keyEnd=function(e,t,n){let r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=_u(e,r,n),r=du.value=vu(e,r,n),r=du.valueEnd=function(e,t,n){let r=-1,i=-1,s=-1,o=t,a=o;for(;o<n;){const u=e.charCodeAt(o++);if(59===u)return a;34===u||39===u?a=o=wu(e,u,o,n):t===o-4&&85===s&&82===i&&76===r&&40===u?a=o=wu(e,41,o,n):u>32&&(a=o),s=i,i=r,r=-33&u}return a}(e,r,n),_u(e,r,n))}function yu(e){du.key=0,du.keyEnd=0,du.value=0,du.valueEnd=0,du.textEnd=e.length}function vu(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function _u(e,t,n,r){return(t=vu(e,t,n))<n&&t++,t}function wu(e,t,n,r){let i=-1,s=n;for(;s<r;){const n=e.charCodeAt(s++);if(n==t&&92!==i)return s;i=92==n&&92===i?0:n}throw new Error}function bu(e,t,n){return Au(e,t,n,!1),bu}function Iu(e,t){return Au(e,t,null,!0),Iu}function Tu(e){Cu(Ou,Eu,e,!1)}function Eu(e,t){for(let n=function(e){return yu(e),gu(e,vu(e,0,du.textEnd))}(t);n>=0;n=gu(t,n))Ou(e,fu(t),pu(t))}function Su(e){Cu(On,ku,e,!0)}function ku(e,t){for(let n=function(e){return yu(e),mu(e,vu(e,0,du.textEnd))}(t);n>=0;n=mu(t,n))On(e,fu(t),!0)}function Au(e,t,n,r){const i=We(),s=Qe(),o=lt(2);s.firstUpdatePass&&xu(s,e,o,r),t!==_s&&ea(i,o,t)&&Pu(s,s.data[St()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=d(Ir(e)))),e}(t,n),r,o)}function Cu(e,t,n,r){const i=Qe(),s=lt(2);i.firstUpdatePass&&xu(i,null,s,r);const o=We();if(n!==_s&&ea(o,s,n)){const a=i.data[St()];if(Fu(a,r)&&!Nu(i,s)){let e=r?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=f(e,n||"")),Pa(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===_s&&(i=Z);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<s.length?s[c+1]:void 0;let p,m=null;l===h?(u+=2,c+=2,d!==f&&(m=h,p=f)):null===h||null!==l&&l<h?(u+=2,m=l):(c+=2,m=h,p=f),null!==m&&Pu(e,t,n,r,m,p,o,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return Z;const r=[],i=Ir(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}function Nu(e,t){return t>=e.expandoStartIndex}function xu(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[St()],o=Nu(e,n);Fu(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=pt(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Ru(n=Du(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Du(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Ss(r))return e[Ts(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=Du(null,e,t,n[1],r),n=Ru(n,t.attrs,r),function(e,t,n,r){e[Ts(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=Ru(r,e[s].hostAttrs,n);return Ru(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=Ts(o),u=Ss(o);e[r]=n;let c,l=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||Ln(e,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const t=Ts(e[a+1]);e[r+1]=Is(t,a),0!==t&&(e[t+1]=ks(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=Is(a,0),0!==a&&(e[a+1]=ks(e[a+1],r)),a=r;else e[r+1]=Is(u,0),0===a?a=r:e[u+1]=ks(e[u+1],r),u=r;l&&(e[r+1]=Es(e[r+1])),lu(e,c,r,!0),lu(e,c,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&Ln(s,t)>=0&&(n[r+1]=As(n[r+1]))}(t,c,e,r,s),o=Is(a,u),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function Du(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=Ru(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Ru(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),On(e,o,!!n||t[++s]))}return void 0===e?null:e}function Ou(e,t,n){On(e,t,Ir(n))}function Pu(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const u=e.data,c=u[a+1];Mu(1==(1&c)?Lu(u,t,n,i,Ss(c),o):void 0)||(Mu(s)||2==(2&c)&&(s=Lu(u,null,n,i,a,o)),function(e,t,n,r,i){const s=Re(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:Ei.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=Ei.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Le(St(),n),i,s))}function Lu(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),u=s?t[1]:t,c=null===u;let l=n[i+1];l===_s&&(l=c?Z:void 0);let h=c?Pn(l,r):u===r?l:void 0;if(s&&!Mu(h)&&(h=Pn(t,r)),Mu(h)&&(a=h,o))return a;const d=e[i+1];i=o?Ts(d):Ss(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=Pn(e,r))}return a}function Mu(e){return void 0!==e}function Fu(e,t){return 0!=(e.flags&(t?16:32))}function Vu(e,t=""){const n=We(),r=Qe(),i=e+de,s=r.firstCreatePass?xs(r,i,1,t,null):r.data[i],o=n[i]=Ri(n[11],t);Yi(r,n,o,s),tt(s,!1)}function Uu(e){return ju("",e,""),Uu}function ju(e,t,n){const r=We(),i=oa(r,e,t,n);return i!==_s&&_o(r,St(),i),ju}function qu(e,t,n,r,i){const s=We(),o=aa(s,e,t,n,r,i);return o!==_s&&_o(s,St(),o),qu}function Bu(e,t,n,r,i,s,o){const a=We(),u=ua(a,e,t,n,r,i,s,o);return u!==_s&&_o(a,St(),u),Bu}function zu(e,t,n,r,i,s,o,a,u){const c=We(),l=ca(c,e,t,n,r,i,s,o,a,u);return l!==_s&&_o(c,St(),l),zu}function Hu(e,t,n,r,i,s,o,a,u,c,l){const h=We(),d=la(h,e,t,n,r,i,s,o,a,u,c,l);return d!==_s&&_o(h,St(),d),Hu}function Zu(e,t,n,r,i,s,o,a,u,c,l,h,d){const f=We(),p=ha(f,e,t,n,r,i,s,o,a,u,c,l,h,d);return p!==_s&&_o(f,St(),p),Zu}function $u(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p){const m=We(),g=da(m,e,t,n,r,i,s,o,a,u,c,l,h,d,f,p);return g!==_s&&_o(m,St(),g),$u}function Gu(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g){const y=We(),v=fa(y,e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g);return v!==_s&&_o(y,St(),v),Gu}function Ku(e){const t=We(),n=sa(t,e);return n!==_s&&_o(t,St(),n),Ku}function Wu(e,t,n){Cu(On,ku,oa(We(),e,t,n),!0)}function Qu(e,t,n,r,i){Cu(On,ku,aa(We(),e,t,n,r,i),!0)}function Yu(e,t,n,r,i,s,o){Cu(On,ku,ua(We(),e,t,n,r,i,s,o),!0)}function Ju(e,t,n,r,i,s,o,a,u){Cu(On,ku,ca(We(),e,t,n,r,i,s,o,a,u),!0)}function Xu(e,t,n,r,i,s,o,a,u,c,l){Cu(On,ku,la(We(),e,t,n,r,i,s,o,a,u,c,l),!0)}function ec(e,t,n,r,i,s,o,a,u,c,l,h,d){Cu(On,ku,ha(We(),e,t,n,r,i,s,o,a,u,c,l,h,d),!0)}function tc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p){Cu(On,ku,da(We(),e,t,n,r,i,s,o,a,u,c,l,h,d,f,p),!0)}function nc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g){Cu(On,ku,fa(We(),e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g),!0)}function rc(e){Cu(On,ku,sa(We(),e),!0)}function ic(e,t,n){Tu(oa(We(),e,t,n))}function sc(e,t,n,r,i){Tu(aa(We(),e,t,n,r,i))}function oc(e,t,n,r,i,s,o){Tu(ua(We(),e,t,n,r,i,s,o))}function ac(e,t,n,r,i,s,o,a,u){Tu(ca(We(),e,t,n,r,i,s,o,a,u))}function uc(e,t,n,r,i,s,o,a,u,c,l){Tu(la(We(),e,t,n,r,i,s,o,a,u,c,l))}function cc(e,t,n,r,i,s,o,a,u,c,l,h,d){Tu(ha(We(),e,t,n,r,i,s,o,a,u,c,l,h,d))}function lc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p){Tu(da(We(),e,t,n,r,i,s,o,a,u,c,l,h,d,f,p))}function hc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g){Tu(fa(We(),e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g))}function dc(e){Tu(sa(We(),e))}function fc(e,t,n,r,i){return Au(e,oa(We(),t,n,r),i,!1),fc}function pc(e,t,n,r,i,s,o){return Au(e,aa(We(),t,n,r,i,s),o,!1),pc}function mc(e,t,n,r,i,s,o,a,u){return Au(e,ua(We(),t,n,r,i,s,o,a),u,!1),mc}function gc(e,t,n,r,i,s,o,a,u,c,l){return Au(e,ca(We(),t,n,r,i,s,o,a,u,c),l,!1),gc}function yc(e,t,n,r,i,s,o,a,u,c,l,h,d){return Au(e,la(We(),t,n,r,i,s,o,a,u,c,l,h),d,!1),yc}function vc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p){return Au(e,ha(We(),t,n,r,i,s,o,a,u,c,l,h,d,f),p,!1),vc}function _c(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g){return Au(e,da(We(),t,n,r,i,s,o,a,u,c,l,h,d,f,p,m),g,!1),_c}function wc(e,t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g,y,v){return Au(e,fa(We(),t,n,r,i,s,o,a,u,c,l,h,d,f,p,m,g,y),v,!1),wc}function bc(e,t,n){return Au(e,sa(We(),t),n,!1),bc}function Ic(e,t,n){const r=We();return ea(r,ct(),t)&&Hs(Qe(),At(),r,e,t,r[11],n,!0),Ic}function Tc(e,t,n){const r=We();if(ea(r,ct(),t)){const i=Qe(),s=At();Hs(i,s,r,e,t,go(pt(i.data),s,r),n,!0)}return Tc}const Ec=void 0;var Sc=["en",[["a","p"],["AM","PM"],Ec],[["AM","PM"],Ec,Ec],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ec,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ec,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ec,"{1} 'at' {0}",Ec],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let kc={};function Ac(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Nc(t);if(n)return n;const r=t.split("-")[0];if(n=Nc(r),n)return n;if("en"===r)return Sc;throw new Error(`Missing locale data for the locale "${e}".`)}function Cc(e){return Ac(e)[xc.PluralCase]}function Nc(e){return e in kc||(kc[e]=z.ng&&z.ng.common&&z.ng.common.locales&&z.ng.common.locales[e]),kc[e]}var xc=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const Dc=["zero","one","two","few","many"],Rc="en-US",Oc={marker:"element"},Pc={marker:"ICU"};var Lc=function(e){return e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT",e}({});let Mc=Rc;function Fc(e){var t;null==(t=e)&&I("Expected localeId to be defined",t,null,"!="),"string"==typeof e&&(Mc=e.toLowerCase().replace(/_/g,"-"))}function Vc(e,t,n){const r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Gi(e,0,n):Pe(n[i])}function Uc(e,t,n,r,i){const s=t.insertBeforeIndex;if(Array.isArray(s)){let o=r,a=null;if(3&t.type||(a=o,o=i),null!==o&&0==(2&t.flags))for(let t=1;t<s.length;t++)Bi(e,o,n[s[t]],a,!1)}}function jc(e,t){if(e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const r=e[n];qc(r)||Bc(r,t)&&null===zc(r)&&Hc(r,t.index)}}function qc(e){return!(64&e.type)}function Bc(e,t){return qc(t)||e.index>t.index}function zc(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function Hc(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(Qi(Vc,Uc),e.insertBeforeIndex=t)}function Zc(e,t){const n=e.data[t];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function $c(e,t,n){const r=Ds(e,n,64,null,null);return jc(t,r),r}function Gc(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Kc=0,Wc=0;function Qc(e,t,n,r){const i=n[11];let s,o=null;for(let a=0;a<t.length;a++){const u=t[a];if("string"==typeof u){const e=t[++a];null===n[e]&&(n[e]=Ri(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===o&&(o=c,s=Zi(i,r)),c===o?(l=r,h=s):(l=null,h=Pe(n[c])),null!==h){const t=(131070&u)>>>1;Bi(i,h,n[t],l,!1);const r=Zc(e,t);if(null!==r&&"object"==typeof r){const t=Gc(r,n);null!==t&&Qc(e,r.create[t],n,n[r.anchorIdx])}}break;case 1:const d=t[++a],f=t[++a];eo(i,Le(u>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case Pc:const e=t[++a],r=t[++a];null===n[r]&&hi(n[r]=Pi(i,e),n);break;case Oc:const s=t[++a],o=t[++a];null===n[o]&&hi(n[o]=Li(i,s,null),n)}}}function Yc(e,t,n,r,i){for(let s=0;s<n.length;s++){const o=n[s],a=n[++s];if(o&i){let i="";for(let o=s+1;o<=s+a;o++){const s=n[o];if("string"==typeof s)i+=s;else if("number"==typeof s)if(s<0)i+=_(t[r-s]);else{const a=s>>>2;switch(3&s){case 1:const s=n[++o],u=n[++o],c=e.data[a];"string"==typeof c?eo(t[11],t[a],null,c,s,i,u):Hs(e,c,t,s,i,t[11],u,!1);break;case 0:const l=t[a];null!==l&&Oi(t[11],l,i);break;case 2:Xc(e,Zc(e,a),t,i);break;case 3:Jc(e,Zc(e,a),r,t)}}}}else{const i=n[s+1];if(i>0&&3==(3&i)){const n=Zc(e,i>>>2);t[n.currentCaseLViewIndex]<0&&Jc(e,n,r,t)}}s+=a}}function Jc(e,t,n,r){let i=r[t.currentCaseLViewIndex];if(null!==i){let s=Kc;i<0&&(i=r[t.currentCaseLViewIndex]=~i,s=-1),Yc(e,r,t.update[i],n,s)}}function Xc(e,t,n,r){const i=function(e,t){let n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:{const r=function(e,t){const n=Cc(t)(parseInt(e,10)),r=Dc[n];return void 0!==r?r:"other"}(t,Mc);n=e.cases.indexOf(r),-1===n&&"other"!==r&&(n=e.cases.indexOf("other"));break}case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if(Gc(t,n)!==i&&(el(e,t,n),n[t.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[t.anchorIdx];r&&Qc(e,t.create[i],n,r)}}function el(e,t,n){let r=Gc(t,n);if(null!==r){const i=t.remove[r];for(let t=0;t<i.length;t++){const r=i[t];if(r>0){const e=Le(r,n);null!==e&&ts(n[11],e)}else el(e,Zc(e,~r),n)}}}const tl=/\ufffd(\d+):?\d*\ufffd/gi,nl=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,rl=/\ufffd(\d+)\ufffd/,il=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,sl=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ol=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,al=/\uE500/g;function ul(e,t,n,r,i,s,o){const a=Rs(e,r,1,null);let u=a<<Lc.SHIFT,c=et();t===c&&(c=null),null===c&&(u|=Lc.APPEND_EAGERLY),o&&(u|=Lc.COMMENT,void 0===Si&&(Si=function(){const e=[];let t,n,r=-1;function i(e,t){r=0;const i=Gc(e,t);n=null!==i?e.remove[i]:Z}function s(){if(r<n.length){const o=n[r++];return o>0?t[o]:(e.push(r,n),i(t[1].data[~o],t),s())}return 0===e.length?null:(n=e.pop(),r=e.pop(),s())}return function(n,r){for(t=r;e.length;)e.pop();return i(n.value,r),s}}())),i.push(u,null===s?"":s);const l=Ds(e,a,o?32:1,null===s?"":s,null);jc(n,l);const h=l.index;return tt(l,!1),null!==c&&t!==c&&function(e,t){let n=e.insertBeforeIndex;var r;null===n?(Qi(Vc,Uc),n=e.insertBeforeIndex=[null,t]):("Expecting array here",(r=Array.isArray(n))!=!0&&I("Expecting array here",r,true,"=="),n.push(t))}(c,h),l}function cl(e,t,n,r,i,s,o){const a=o.match(tl),u=ul(e,t,n,s,r,a?null:o,!1);a&&ll(i,o,u.index,null,0,null)}function ll(e,t,n,r,i,s){const o=e.length,a=o+1;e.push(null,null);const u=o+2,c=t.split(tl);let l=0;for(let h=0;h<c.length;h++){const t=c[h];if(1&h){const n=i+parseInt(t,10);e.push(-1-n),l|=dl(n)}else""!==t&&e.push(t)}return e.push(n<<2|(r?1:0)),r&&e.push(r,s),e[o]=l,e[a]=e.length-u,l}function hl(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r&&r<0&&t++}return t}function dl(e){return 1<<Math.min(e,31)}function fl(e){let t,n,r="",i=0,s=!1;for(;null!==(t=sl.exec(e));)s?t[0]===`\ufffd/*${n}\ufffd`&&(i=t.index,s=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],s=!0);return r+=e.substr(i),r}function pl(e,t,n,r,i,s){let o=0;const a={type:i.type,currentCaseLViewIndex:Rs(e,t,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};!function(e,t,n){e.push(dl(t.mainBinding),2,-1-t.mainBinding,n<<2|2)}(n,i,s),function(e,t,n){const r=e.data[t];null===r?e.data[t]=n:r.value=n}(e,s,a);const u=i.values;for(let c=0;c<u.length;c++){const s=u[c],l=[];for(let e=0;e<s.length;e++){const t=s[e];if("string"!=typeof t){const n=l.push(t)-1;s[e]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}o=yl(e,a,t,n,r,i.cases[c],s.join(""),l)|o}o&&function(e,t,n){e.push(t,1,n<<2|3)}(n,o,s)}function ml(e){const t=[],n=[];let r=1,i=0;const s=gl(e=e.replace(il,function(e,t,n){return r="select"===n?0:1,i=parseInt(t.substr(1),10),""}));for(let o=0;o<s.length;){let e=s[o++].trim();1===r&&(e=e.replace(/\s*(?:=)?(\w+)\s*/,"$1")),e.length&&t.push(e);const i=gl(s[o++]);t.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:t,values:n}}function gl(e){if(!e)return[];let t=0;const n=[],r=[],i=/[{}]/g;let s;for(i.lastIndex=0;s=i.exec(e);){const i=s.index;if("}"==s[0]){if(n.pop(),0==n.length){const n=e.substring(t,i);il.test(n)?r.push(ml(n)):r.push(n),t=i+1}}else{if(0==n.length){const n=e.substring(t,i);r.push(n),t=i+1}n.push("{")}}const o=e.substring(t);return r.push(o),r}function yl(e,t,n,r,i,s,o,a){const u=[],c=[],l=[];t.cases.push(s),t.create.push(u),t.remove.push(c),t.update.push(l);const h=xr(De()).getInertBodyElement(o),d=ei(h)||h;return d?vl(e,t,n,r,u,c,l,d,i,a,0):0}function vl(e,t,n,r,i,s,o,a,u,c,l){let h=0,d=a.firstChild;for(;d;){const a=Rs(e,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(zr.hasOwnProperty(p)){bl(i,Oc,p,u,a),e.data[a]=p;const m=f.attributes;for(let e=0;e<m.length;e++){const t=m.item(e),n=t.name.toLowerCase();t.value.match(tl)?$r.hasOwnProperty(n)&&ll(o,t.value,a,t.name,0,Hr[n]?Lr:Zr[n]?Mr:null):Il(i,a,t)}h=vl(e,t,n,r,i,s,o,d,a,c,l+1)|h,_l(s,a,l)}break;case Node.TEXT_NODE:const m=d.textContent||"",g=m.match(tl);bl(i,null,g?"":m,u,a),_l(s,a,l),g&&(h=ll(o,m,a,null,0,null)|h);break;case Node.COMMENT_NODE:const y=rl.exec(d.textContent||"");if(y){const t=c[parseInt(y[1],10)];bl(i,Pc,"",u,a),pl(e,n,r,u,t,a),wl(s,a,l)}}d=d.nextSibling}return h}function _l(e,t,n){0===n&&e.push(t)}function wl(e,t,n){0===n&&(e.push(~t),e.push(t))}function bl(e,t,n,r,i){null!==t&&e.push(t),e.push(n,i,0|r<<17|i<<1)}function Il(e,t,n){e.push(t<<1|1,n.name,n.value)}const Tl=/\[(\ufffd.+?\ufffd?)\]/,El=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,Sl=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,kl=/{([A-Z0-9_]+)}/g,Al=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,Cl=/\/\*/,Nl=/\d+\:(\d+)/;function xl(e,t,n=-1){const r=Qe(),i=We(),s=de+e,o=Be(r.consts,t),a=et();r.firstCreatePass&&function(e,t,n,r,i,s){const o=et(),a=[],u=[],c=[[]],l=(h=i=function(e,t){if(function(e){return-1===e}(t))return fl(e);{const n=e.indexOf(`:${t}\ufffd`)+2+t.toString().length,r=e.search(new RegExp(`\ufffd\\/\\*\\d+:${t}\ufffd`));return fl(e.substring(n,r))}}(i,s),h.replace(al," ")).split(ol);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const s=gl(r);for(let r=0;r<s.length;r++){let l=s[r];if(0==(1&r)){const t=l;""!==t&&cl(e,o,c[0],a,u,n,t)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);pl(e,n,u,t,r,ul(e,o,c[0],n,a,"",!0).index)}}}else{const t=47===r.charCodeAt(0),n=(r.charCodeAt(t?1:0),de+Number.parseInt(r.substring(t?2:1)));if(t)c.shift(),tt(et(),!1);else{const t=$c(e,c[0],n);c.unshift([]),tt(t,!0)}}}e.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,s,o,n);const u=r.data[s],c=qi(r,a===i[6]?null:a,i);!function(e,t,n,r){const i=e[11];for(let s=0;s<t.length;s++){const o=t[s++],a=t[s],u=(o&Lc.COMMENT)===Lc.COMMENT,c=(o&Lc.APPEND_EAGERLY)===Lc.APPEND_EAGERLY,l=o>>>Lc.SHIFT;let h=e[l];null===h&&(h=e[l]=u?i.createComment(a):Ri(i,a)),c&&null!==n&&Bi(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),ht(!0)}function Dl(){ht(!1)}function Rl(e,t,n){xl(e,t,n),Dl()}function Ol(e,t){const n=Qe(),r=Be(n.consts,t);!function(e,t,n){const r=Je().index,i=[];if(e.firstCreatePass&&null===e.data[t]){for(let e=0;e<n.length;e+=2){const t=n[e],s=n[e+1];if(""!==s){if(nl.test(s))throw new Error(`ICU expressions are not supported in attributes. Message: "${s}".`);ll(i,s,r,t,hl(i),null)}}e.data[t]=i}}(n,e+de,r)}function Pl(e){return ea(We(),ct(),e)&&(Kc|=1<<Math.min(Wc,31)),Wc++,Pl}function Ll(e){!function(e,t,n){if(Wc>0){const r=e.data[n];Yc(e,t,Array.isArray(r)?r:r.update,at()-Wc-1,Kc)}Kc=0,Wc=0}(Qe(),We(),e+de)}function Ml(e,t={}){return function(e,t={}){let n=e;if(Tl.test(e)){const e={},t=[0];n=n.replace(El,(n,r,i)=>{const s=r||i,o=e[s]||[];if(o.length||(s.split("|").forEach(e=>{const t=e.match(Nl),n=t?parseInt(t[1],10):0,r=Cl.test(e);o.push([n,r,e])}),e[s]=o),!o.length)throw new Error(`i18n postprocess: unmatched placeholder - ${s}`);const a=t[t.length-1];let u=0;for(let e=0;e<o.length;e++)if(o[e][0]===a){u=e;break}const[c,l,h]=o[u];return l?t.pop():a!==c&&t.push(c),o.splice(u,1),h})}return Object.keys(t).length?(n=n.replace(Sl,(e,n,r,i,s,o)=>t.hasOwnProperty(r)?`${n}${t[r]}${o}`:e),n=n.replace(kl,(e,n)=>t.hasOwnProperty(n)?t[n]:e),n=n.replace(Al,(e,n)=>{if(t.hasOwnProperty(n)){const r=t[n];if(!r.length)throw new Error(`i18n postprocess: unmatched ICU - ${e} with key: ${n}`);return r.shift()}return e}),n):n}(e,t)}function Fl(e,t,n,r,i){if(e=g(e),Array.isArray(e))for(let s=0;s<e.length;s++)Fl(e[s],t,n,r,i);else{const s=Qe(),o=We();let a=Po(e)?e:g(e.provide),u=Do(e);const c=Je(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Po(e)||!e.multi){const r=new Vt(u,i,Da),f=jl(a,t,i?l:l+d,h);-1===f?(en(Qt(c,o),s,a),Vl(s,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=jl(a,t,l+d,h),p=jl(a,t,l,l+d),m=f>=0&&n[f],g=p>=0&&n[p];if(i&&!g||!i&&!m){en(Qt(c,o),s,a);const l=function(e,t,n,r,i){const s=new Vt(e,n,Da);return s.multi=[],s.index=t,s.componentProviders=0,Ul(s,i,r&&!n),s}(i?Bl:ql,n.length,i,r,u);!i&&g&&(n[p].providerFactory=l),Vl(s,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else Vl(s,e,f>-1?f:p,Ul(n[i?p:f],u,!i&&r));!i&&r&&g&&n[p].componentProviders++}}}function Vl(e,t,n,r){const i=Po(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function Ul(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function jl(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function ql(e,t,n,r){return zl(this.multi,[])}function Bl(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=cn(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),zl(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],zl(i,s);return s}function zl(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Hl(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=Qe();if(r.firstCreatePass){const i=_e(e);Fl(n,r.data,r.blueprint,i,!0),Fl(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class Zl{}class $l{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${d(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let Gl=(()=>{class e{}return e.NULL=new $l,e})();function Kl(...e){}function Wl(e,t){return new Yl(Me(e,t))}const Ql=function(){return Wl(Je(),We())};let Yl=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Ql,e})();function Jl(e){return e instanceof Yl?e.nativeElement:e}class Xl{}let eh=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>th(),e})();const th=function(){const e=We(),t=Ue(Je().index,e);return function(e){return e[11]}(pe(t)?t:e)};let nh=(()=>{class e{}return e.\u0275prov=T({token:e,providedIn:"root",factory:()=>null}),e})();class rh{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ih=new rh("12.0.5");class sh{constructor(){}supports(e){return Qo(e)}create(e){return new ah(e)}}const oh=(e,t)=>t;class ah{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||oh}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<hh(n,r,i)?t:n,o=hh(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Qo(e))throw new Error(`Error trying to diff '${d(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Ko()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new uh(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new lh),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class uh{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ch{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class lh{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new ch,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hh(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class dh{constructor(){}supports(e){return e instanceof Map||Yo(e)}create(){return new fh}}class fh{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Yo(e)))throw new Error(`Error trying to diff '${d(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ph(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class ph{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mh(){return new gh([new sh])}let gh=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||mh()),deps:[[e,new rr,new tr]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=T({token:e,providedIn:"root",factory:mh}),e})();function yh(){return new vh([new dh])}let vh=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||yh()),deps:[[e,new rr,new tr]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=T({token:e,providedIn:"root",factory:yh}),e})();function _h(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(Pe(s)),me(s))for(let e=fe;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&_h(t[1],t,n,r)}const o=n.type;if(8&o)_h(e,t,n.child,r);else if(32&o){const e=ki(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=Xi(t,n);if(Array.isArray(e))r.push(...e);else{const n=Ai(t[16]);_h(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class wh{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return _h(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(me(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Fi(e,n),Dn(t,n))}this._attachedToViewContainer=!1}Vi(this._lView[1],this._lView)}onDestroy(e){Bs(this._lView[1],this._lView,null,e)}markForCheck(){uo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){co(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){st(!0);try{co(e,t,n)}finally{st(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,rs(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class bh extends wh{constructor(e){super(e),this._view=e}detectChanges(){lo(this._view)}checkNoChanges(){!function(e){st(!0);try{lo(e)}finally{st(!1)}}(this._view)}get context(){return null}}const Ih=function(e){return function(e,t,n){if(ye(e)&&!n){const n=Ue(e.index,t);return new wh(n,n)}return 47&e.type?new wh(t[16],t):null}(Je(),We(),16==(16&e))};let Th=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ih,e})();const Eh=[new dh],Sh=new gh([new sh]),kh=new vh(Eh),Ah=function(){return Dh(Je(),We())};let Ch=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ah,e})();const Nh=Ch,xh=class extends Nh{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Ns(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Os(t,n,e),new wh(n)}};function Dh(e,t){return 4&e.type?new xh(t,e,Wl(e,t)):null}class Rh{}class Oh{}const Ph=function(){return jh(Je(),We())};let Lh=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ph,e})();const Mh=Lh,Fh=class extends Mh{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Wl(this._hostTNode,this._hostLView)}get injector(){return new dn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Xt(this._hostTNode,this._hostLView);if(Ht(e)){const t=$t(e,this._hostLView),n=Zt(e);return new dn(t[1].data[n+8],t)}return new dn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Vh(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-fe}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(Rh,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(me(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Fh(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=fe+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-fe?(t[4]=n[i],xn(n,fe+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=es(i,s),a=n[11],u=Zi(a,s[7]);return null!==u&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,rs(e,r,n,1,i,s)}(r,s[6],a,n,u,o),e.attachToViewContainerRef(),xn(Uh(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Vh(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Fi(this._lContainer,t);n&&(Dn(Uh(this._lContainer),t),Vi(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Fi(this._lContainer,t);return n&&null!=Dn(Uh(this._lContainer),t)?new wh(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Vh(e){return e[8]}function Uh(e){return e[8]||(e[8]=[])}function jh(e,t){let n;const r=t[e.index];if(me(r))n=r;else{let i;if(8&e.type)i=Pe(r);else{const n=t[11];i=n.createComment("");const r=Me(e,t);Bi(n,Zi(n,r),i,function(e,t){return Re(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=ro(r,t,i,e),ao(t,n)}return new Fh(n,e,t)}const qh={};class Bh extends Gl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=le(e);return new Zh(t,this.ngModule)}}function zh(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Hh=new Tn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>_i});class Zh extends Zl{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(vs).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return zh(this.componentDef.inputs)}get outputs(){return zh(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,qh,i);return s!==qh||r===qh?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(Xl,Oe),o=i.get(nh,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(Re(e))return e.selectRootElement(t,n===V.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Li(s.createRenderer(null,this.componentDef),u,function(e){const t=e.toLowerCase();return"svg"===t?Ae:"math"===t?Ce:null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:_i,clean:fo,playerHandler:null,flags:0},d=qs(0,null,null,1,0,null,null,null,null,null),f=Ns(null,d,h,l,null,null,s,a,o,i);let p,m;_t(f);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=xs(o,20,2,"#host",null),u=a.mergedAttrs=t.hostAttrs;null!==u&&(wo(a,u,!0),null!==e&&(Ut(i,e,u),null!==a.classes&&os(i,e,a.classes),null!==a.styles&&ss(i,e,a.styles)));const c=r.createRenderer(e,t),l=Ns(n,js(t),null,t.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(en(Qt(a,n),o,t.type),Ks(o,a),Qs(a,n.length,1)),ao(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)Ut(a,c,["ng-version",ih.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!fs(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&Ut(a,c,e),t&&t.length>0&&os(a,c,t.join(" "))}if(m=Fe(d,de),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=Je();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ys(e,r,t,Rs(e,t,1,null),n));const i=cn(t,e,r.directiveStart,r);hi(i,t);const s=Me(r,t);return s&&hi(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=Je();t.contentQueries(1,o,e.directiveStart)}const a=Je();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(kt(a.index),$s(n[1],a,0,a.directiveStart,a.directiveEnd,t),Gs(t,o)),o}(e,this.componentDef,f,h,[Fo]),Os(d,f,null)}finally{Et()}return new $h(this.componentType,p,Wl(m,f),f,m)}}class $h extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new bh(r),this.componentType=e}get injector(){return new dn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Gh(e,t,n,r){return M(()=>{const i=e;null!==t&&(i.hasOwnProperty("decorators")&&void 0!==i.decorators?i.decorators.push(...t):i.decorators=t),null!==n&&(i.ctorParameters=n),null!==r&&(i.propDecorators=i.hasOwnProperty("propDecorators")&&void 0!==i.propDecorators?Object.assign(Object.assign({},i.propDecorators),r):r)})}const Kh=new Map;class Wh extends Rh{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Bh(this);const n=he(e),r=e[Q]||null;r&&Fc(r),this._bootstrapComponents=Ti(n.bootstrap),this._r3Injector=Co(e,t,[{provide:Rh,useValue:this},{provide:Gl,useValue:this.componentFactoryResolver}],d(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Mo.THROW_IF_NOT_FOUND,n=R.Default){return e===Mo||e===Rh||e===bo?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Qh extends Oh{constructor(e){super(),this.moduleType=e,null!==he(e)&&function(e){const t=new Set;!function e(n){const r=he(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${d(t)} vs ${d(t.name)}`)}(i,Kh.get(i),n),Kh.set(i,n));const s=Ti(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Wh(this.moduleType,e)}}function Yh(e,t,n){const r=ot()+e,i=We();return i[r]===_s?Jo(i,r,n?t.call(n):t()):Xo(i,r)}function Jh(e,t,n,r){return ud(We(),ot(),e,t,n,r)}function Xh(e,t,n,r,i){return cd(We(),ot(),e,t,n,r,i)}function ed(e,t,n,r,i,s){return ld(We(),ot(),e,t,n,r,i,s)}function td(e,t,n,r,i,s,o){return hd(We(),ot(),e,t,n,r,i,s,o)}function nd(e,t,n,r,i,s,o,a){const u=ot()+e,c=We(),l=ra(c,u,n,r,i,s);return ea(c,u+4,o)||l?Jo(c,u+5,a?t.call(a,n,r,i,s,o):t(n,r,i,s,o)):Xo(c,u+5)}function rd(e,t,n,r,i,s,o,a,u){const c=ot()+e,l=We(),h=ra(l,c,n,r,i,s);return ta(l,c+4,o,a)||h?Jo(l,c+6,u?t.call(u,n,r,i,s,o,a):t(n,r,i,s,o,a)):Xo(l,c+6)}function id(e,t,n,r,i,s,o,a,u,c){const l=ot()+e,h=We();let d=ra(h,l,n,r,i,s);return na(h,l+4,o,a,u)||d?Jo(h,l+7,c?t.call(c,n,r,i,s,o,a,u):t(n,r,i,s,o,a,u)):Xo(h,l+7)}function sd(e,t,n,r,i,s,o,a,u,c,l){const h=ot()+e,d=We(),f=ra(d,h,n,r,i,s);return ra(d,h+4,o,a,u,c)||f?Jo(d,h+8,l?t.call(l,n,r,i,s,o,a,u,c):t(n,r,i,s,o,a,u,c)):Xo(d,h+8)}function od(e,t,n,r){return dd(We(),ot(),e,t,n,r)}function ad(e,t){const n=e[t];return n===_s?void 0:n}function ud(e,t,n,r,i,s){const o=t+n;return ea(e,o,i)?Jo(e,o+1,s?r.call(s,i):r(i)):ad(e,o+1)}function cd(e,t,n,r,i,s,o){const a=t+n;return ta(e,a,i,s)?Jo(e,a+2,o?r.call(o,i,s):r(i,s)):ad(e,a+2)}function ld(e,t,n,r,i,s,o,a){const u=t+n;return na(e,u,i,s,o)?Jo(e,u+3,a?r.call(a,i,s,o):r(i,s,o)):ad(e,u+3)}function hd(e,t,n,r,i,s,o,a,u){const c=t+n;return ra(e,c,i,s,o,a)?Jo(e,c+4,u?r.call(u,i,s,o,a):r(i,s,o,a)):ad(e,c+4)}function dd(e,t,n,r,i,s){let o=t+n,a=!1;for(let u=0;u<i.length;u++)ea(e,o++,i[u])&&(a=!0);return a?Jo(e,o,r.apply(s,i)):ad(e,o)}function fd(e,t){const n=Qe();let r;const i=e+de;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new v("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=we(r.type)),o=P(Da);try{const e=Kt(!1),t=s();return Kt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,We(),i,t),t}finally{P(o)}}function pd(e,t,n){const r=e+de,i=We(),s=Ve(i,r);return wd(i,_d(i,r)?ud(i,ot(),t,s.transform,n,s):s.transform(n))}function md(e,t,n,r){const i=e+de,s=We(),o=Ve(s,i);return wd(s,_d(s,i)?cd(s,ot(),t,o.transform,n,r,o):o.transform(n,r))}function gd(e,t,n,r,i){const s=e+de,o=We(),a=Ve(o,s);return wd(o,_d(o,s)?ld(o,ot(),t,a.transform,n,r,i,a):a.transform(n,r,i))}function yd(e,t,n,r,i,s){const o=e+de,a=We(),u=Ve(a,o);return wd(a,_d(a,o)?hd(a,ot(),t,u.transform,n,r,i,s,u):u.transform(n,r,i,s))}function vd(e,t,n){const r=e+de,i=We(),s=Ve(i,r);return wd(i,_d(i,r)?dd(i,ot(),t,s.transform,n,s):s.transform.apply(s,n))}function _d(e,t){return e[1].data[t].pure}function wd(e,t){return Wo.isWrapped(t)&&(t=Wo.unwrap(t),e[at()]=_s),t}function bd(e){return t=>{setTimeout(e,void 0,t)}}const Id=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,u=t||(()=>null),c=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),u=null===(s=t.error)||void 0===s?void 0:s.bind(t),c=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(u=bd(u),a&&(a=bd(a)),c&&(c=bd(c)));const l=super.subscribe({next:a,error:u,complete:c});return e instanceof i.w&&e.add(l),l}};function Td(){return this._results[Ko()]()}class Ed{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ko(),n=Ed.prototype;n[t]||(n[t]=Td)}get changes(){return this._changes||(this._changes=new Id)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=Cn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Sd{constructor(e){this.queryList=e,this.matches=null}clone(){return new Sd(this.queryList)}setDirty(){this.queryList.setDirty()}}class kd{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new kd(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==jd(e,t).matches&&this.queries[t].setDirty()}}class Ad{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Cd{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new Cd(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Nd{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Nd(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,xd(t,i)),this.matchTNodeWithReadOption(e,t,un(t,e,i,!1,!1))}else n===Ch?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,un(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Yl||r===Lh||r===Ch&&4&t.type)this.addMatch(t.index,-2);else{const n=un(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function xd(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Dd(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Wl(e,t):4&e.type?Dh(e,t):null}(t,e):-2===n?function(e,t,n){return n===Yl?Wl(t,e):n===Ch?Dh(t,e):n===Lh?jh(t,e):void 0}(e,t,r):cn(e,e[1],n,t)}function Rd(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:Dd(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function Od(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Rd(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=fe;e<o.length;e++){const t=o[e];t[17]===t[3]&&Od(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];Od(n[1],n,i,r)}}}}}return r}function Pd(e){const t=We(),n=Qe(),r=mt();gt(r+1);const i=jd(n,r);if(e.dirty&&je(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?Od(n,t,r,[]):Rd(n,t,i,r);e.reset(s,Jl),e.notifyOnChanges()}return!0}return!1}function Ld(e,t,n){const r=Qe();r.firstCreatePass&&(Ud(r,new Ad(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Vd(r,We(),t)}function Md(e,t,n,r){const i=Qe();if(i.firstCreatePass){const s=Je();Ud(i,new Ad(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Vd(i,We(),n)}function Fd(){return e=We(),t=mt(),e[19].queries[t].queryList;var e,t}function Vd(e,t,n){const r=new Ed(4==(4&n));Bs(e,t,r,r.destroy),null===t[19]&&(t[19]=new kd),t[19].queries.push(new Sd(r))}function Ud(e,t,n){null===e.queries&&(e.queries=new Cd),e.queries.track(new Nd(t,n))}function jd(e,t){return e.queries.getByIndex(t)}function qd(e,t){return Dh(e,t)}const Bd=(()=>({"\u0275\u0275attribute":ia,"\u0275\u0275attributeInterpolate1":pa,"\u0275\u0275attributeInterpolate2":ma,"\u0275\u0275attributeInterpolate3":ga,"\u0275\u0275attributeInterpolate4":ya,"\u0275\u0275attributeInterpolate5":va,"\u0275\u0275attributeInterpolate6":_a,"\u0275\u0275attributeInterpolate7":wa,"\u0275\u0275attributeInterpolate8":ba,"\u0275\u0275attributeInterpolateV":Ia,"\u0275\u0275defineComponent":ee,"\u0275\u0275defineDirective":ue,"\u0275\u0275defineInjectable":T,"\u0275\u0275defineInjector":E,"\u0275\u0275defineNgModule":se,"\u0275\u0275definePipe":ce,"\u0275\u0275directiveInject":Da,"\u0275\u0275getInheritedFactory":fn,"\u0275\u0275inject":Qn,"\u0275\u0275injectAttribute":mn,"\u0275\u0275invalidFactory":Ra,"\u0275\u0275invalidFactoryDep":Yn,"\u0275\u0275templateRefExtractor":qd,"\u0275\u0275NgOnChangesFeature":Ie,"\u0275\u0275ProvidersFeature":Hl,"\u0275\u0275CopyDefinitionFeature":$o,"\u0275\u0275InheritDefinitionFeature":Uo,"\u0275\u0275nextContext":Qa,"\u0275\u0275namespaceHTML":xt,"\u0275\u0275namespaceMathML":Nt,"\u0275\u0275namespaceSVG":Ct,"\u0275\u0275enableBindings":Ge,"\u0275\u0275disableBindings":Ke,"\u0275\u0275elementStart":La,"\u0275\u0275elementEnd":Ma,"\u0275\u0275element":Fa,"\u0275\u0275elementContainerStart":Va,"\u0275\u0275elementContainerEnd":Ua,"\u0275\u0275elementContainer":ja,"\u0275\u0275pureFunction0":Yh,"\u0275\u0275pureFunction1":Jh,"\u0275\u0275pureFunction2":Xh,"\u0275\u0275pureFunction3":ed,"\u0275\u0275pureFunction4":td,"\u0275\u0275pureFunction5":nd,"\u0275\u0275pureFunction6":rd,"\u0275\u0275pureFunction7":id,"\u0275\u0275pureFunction8":sd,"\u0275\u0275pureFunctionV":od,"\u0275\u0275getCurrentView":qa,"\u0275\u0275restoreView":Ye,"\u0275\u0275listener":Za,"\u0275\u0275projection":Xa,"\u0275\u0275syntheticHostProperty":Tc,"\u0275\u0275syntheticHostListener":$a,"\u0275\u0275pipeBind1":pd,"\u0275\u0275pipeBind2":md,"\u0275\u0275pipeBind3":gd,"\u0275\u0275pipeBind4":yd,"\u0275\u0275pipeBindV":vd,"\u0275\u0275projectionDef":Ja,"\u0275\u0275hostProperty":Ic,"\u0275\u0275property":Oa,"\u0275\u0275propertyInterpolate":eu,"\u0275\u0275propertyInterpolate1":tu,"\u0275\u0275propertyInterpolate2":nu,"\u0275\u0275propertyInterpolate3":ru,"\u0275\u0275propertyInterpolate4":iu,"\u0275\u0275propertyInterpolate5":su,"\u0275\u0275propertyInterpolate6":ou,"\u0275\u0275propertyInterpolate7":au,"\u0275\u0275propertyInterpolate8":uu,"\u0275\u0275propertyInterpolateV":cu,"\u0275\u0275pipe":fd,"\u0275\u0275queryRefresh":Pd,"\u0275\u0275viewQuery":Ld,"\u0275\u0275loadQuery":Fd,"\u0275\u0275contentQuery":Md,"\u0275\u0275reference":Ea,"\u0275\u0275classMap":Su,"\u0275\u0275classMapInterpolate1":Wu,"\u0275\u0275classMapInterpolate2":Qu,"\u0275\u0275classMapInterpolate3":Yu,"\u0275\u0275classMapInterpolate4":Ju,"\u0275\u0275classMapInterpolate5":Xu,"\u0275\u0275classMapInterpolate6":ec,"\u0275\u0275classMapInterpolate7":tc,"\u0275\u0275classMapInterpolate8":nc,"\u0275\u0275classMapInterpolateV":rc,"\u0275\u0275styleMap":Tu,"\u0275\u0275styleMapInterpolate1":ic,"\u0275\u0275styleMapInterpolate2":sc,"\u0275\u0275styleMapInterpolate3":oc,"\u0275\u0275styleMapInterpolate4":ac,"\u0275\u0275styleMapInterpolate5":uc,"\u0275\u0275styleMapInterpolate6":cc,"\u0275\u0275styleMapInterpolate7":lc,"\u0275\u0275styleMapInterpolate8":hc,"\u0275\u0275styleMapInterpolateV":dc,"\u0275\u0275styleProp":bu,"\u0275\u0275stylePropInterpolate1":fc,"\u0275\u0275stylePropInterpolate2":pc,"\u0275\u0275stylePropInterpolate3":mc,"\u0275\u0275stylePropInterpolate4":gc,"\u0275\u0275stylePropInterpolate5":yc,"\u0275\u0275stylePropInterpolate6":vc,"\u0275\u0275stylePropInterpolate7":_c,"\u0275\u0275stylePropInterpolate8":wc,"\u0275\u0275stylePropInterpolateV":bc,"\u0275\u0275classProp":Iu,"\u0275\u0275advance":ws,"\u0275\u0275template":Ta,"\u0275\u0275text":Vu,"\u0275\u0275textInterpolate":Uu,"\u0275\u0275textInterpolate1":ju,"\u0275\u0275textInterpolate2":qu,"\u0275\u0275textInterpolate3":Bu,"\u0275\u0275textInterpolate4":zu,"\u0275\u0275textInterpolate5":Hu,"\u0275\u0275textInterpolate6":Zu,"\u0275\u0275textInterpolate7":$u,"\u0275\u0275textInterpolate8":Gu,"\u0275\u0275textInterpolateV":Ku,"\u0275\u0275i18n":Rl,"\u0275\u0275i18nAttributes":Ol,"\u0275\u0275i18nExp":Pl,"\u0275\u0275i18nStart":xl,"\u0275\u0275i18nEnd":Dl,"\u0275\u0275i18nApply":Ll,"\u0275\u0275i18nPostprocess":Ml,"\u0275\u0275resolveWindow":wi,"\u0275\u0275resolveDocument":bi,"\u0275\u0275resolveBody":Ii,"\u0275\u0275setComponentScope":te,"\u0275\u0275setNgModuleScope":oe,"\u0275\u0275sanitizeHtml":ni,"\u0275\u0275sanitizeStyle":ri,"\u0275\u0275sanitizeResourceUrl":si,"\u0275\u0275sanitizeScript":oi,"\u0275\u0275sanitizeUrl":ii,"\u0275\u0275sanitizeUrlOrResourceUrl":ci,"\u0275\u0275trustConstantHtml":ai,"\u0275\u0275trustConstantResourceUrl":ui,forwardRef:m,resolveForwardRef:g}))(),zd=[];function Hd(e){return function(e){return void 0!==e.ngModule}(e)?e.ngModule:e}const Zd=_n("NgModule",e=>e,void 0,void 0,(e,t)=>$d(e,t)),$d=function(e,t={}){!function(e,t,n=!1){const r=Cn(t.declarations||Z);let i=null;Object.defineProperty(e,W,{configurable:!0,get:()=>(null===i&&(i=Sn().compileNgModule(Bd,`ng:///${e.name}/\u0275mod.js`,{type:e,bootstrap:Cn(t.bootstrap||Z).map(g),declarations:r.map(g),imports:Cn(t.imports||Z).map(g).map(Hd),exports:Cn(t.exports||Z).map(g).map(Hd),schemas:t.schemas?Cn(t.schemas):null,id:t.id||null}),i.schemas||(i.schemas=[])),i)});let s=null;Object.defineProperty(e,Y,{get:()=>{if(null===s){const t=Sn();s=t.compileFactory(Bd,`ng:///${e.name}/\u0275fac.js`,{name:e.name,type:e,deps:ur(e),target:t.FactoryTarget.NgModule,typeArgumentCount:0})}return s},configurable:!1});let o=null;Object.defineProperty(e,N,{get:()=>{if(null===o){const n={name:e.name,type:e,providers:t.providers||Z,imports:[(t.imports||Z).map(g),(t.exports||Z).map(g)]};o=Sn().compileInjector(Bd,`ng:///${e.name}/\u0275inj.js`,n)}return o},configurable:!1})}(e,t),function(e,t){zd.push({moduleType:e,ngModule:t})}(e,t)},Gd=new Tn("Application Initializer");let Kd=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Kl,this.reject=Kl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Ba(t))e.push(t);else if(Ha(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Qn(Gd,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const Wd=new Tn("AppId"),Qd={provide:Wd,useFactory:function(){return`${Yd()}${Yd()}${Yd()}`},deps:[]};function Yd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Jd=new Tn("Platform Initializer"),Xd=new Tn("Platform ID"),ef=new Tn("appBootstrapListener");let tf=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const nf=new Tn("LocaleId"),rf=new Tn("DefaultCurrencyCode");class sf{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const of=function(e){return new Qh(e)},af=of,uf=function(e){return Promise.resolve(of(e))},cf=function(e){const t=of(e),n=Ti(he(e).declarations).reduce((e,t)=>{const n=le(t);return n&&e.push(new Zh(n)),e},[]);return new sf(t,n)},lf=cf,hf=function(e){return Promise.resolve(cf(e))};let df=(()=>{class e{constructor(){this.compileModuleSync=af,this.compileModuleAsync=uf,this.compileModuleAndAllComponentsSync=lf,this.compileModuleAndAllComponentsAsync=hf}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();const ff=(()=>Promise.resolve(0))();function pf(e){"undefined"==typeof Zone?ff.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class mf{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Id(!1),this.onMicrotaskEmpty=new Id(!1),this.onStable=new Id(!1),this.onError=new Id(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=z.requestAnimationFrame,t=z.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(z,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,vf(e),e.isCheckStableRunning=!0,yf(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),vf(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return _f(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),wf(e)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return _f(e),n.invoke(i,s,o,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),wf(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,vf(e),yf(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mf.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(mf.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,gf,Kl,Kl);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const gf={};function yf(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function vf(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function _f(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function wf(e){e._nesting--,yf(e)}class bf{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Id,this.onMicrotaskEmpty=new Id,this.onStable=new Id,this.onError=new Id}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let If=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mf.assertNotInAngularZone(),pf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())pf(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Qn(mf))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})(),Tf=(()=>{class e{constructor(){this._applications=new Map,Af.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Af.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();class Ef{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function Sf(e){Af=e}let kf,Af=new Ef,Cf=!0,Nf=!1;function xf(){return Nf=!0,Cf}function Df(){if(Nf)throw new Error("Cannot enable prod mode after platform setup.");Cf=!1}const Rf=new Tn("AllowMultipleToken");class Of{constructor(e,t){this.name=e,this.token=t}}function Pf(e,t,n=[]){const r=`Platform: ${t}`,i=new Tn(r);return(t=[])=>{let s=Lf();if(!s||s.injector.get(Rf,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:To,useValue:"platform"});!function(e){if(kf&&!kf.destroyed&&!kf.injector.get(Rf,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");kf=e.get(Mf);const t=e.get(Jd,null);t&&t.forEach(e=>e())}(Mo.create({providers:e,name:r}))}return function(e){const t=Lf();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Lf(){return kf&&!kf.destroyed?kf:null}let Mf=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new bf:("zone.js"===e?void 0:e)||new mf({enableLongStackTrace:xf(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:mf,useValue:n}];return n.run(()=>{const t=Mo.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(gi,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{Uf(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Ba(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(Kd);return e.runInitializers(),e.donePromise.then(()=>(Fc(i.injector.get(nf,Rc)||Rc),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=Ff({},t);return function(e,t,n){const r=new Qh(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Vf);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${d(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Qn(Mo))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function Ff(e,t){return Array.isArray(t)?t.reduce(Ff,e):Object.assign(Object.assign({},e),t)}let Vf=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),h=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{mf.assertNotInAngularZone(),pf(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{mf.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(e=>{return(0,u.x)()((t=c,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,a.N);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Zl?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Rh),i=n.create(Mo.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(If,null),a=o&&i.injector.get(Tf);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Uf(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Uf(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ef,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Qn(mf),Qn(Mo),Qn(gi),Qn(Gl),Qn(Kd))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function Uf(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class jf{}class qf{}const Bf={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let zf=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Bf}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>Hf(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>Hf(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(Qn(df),Qn(qf,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac}),e})();function Hf(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const Zf=function(e){return null},$f=Pf(null,"core",[{provide:Xd,useValue:"unknown"},{provide:Mf,deps:[Mo]},{provide:Tf,deps:[]},{provide:tf,deps:[]}]),Gf=[{provide:Vf,useClass:Vf,deps:[mf,Mo,gi,Gl,Kd]},{provide:Hh,deps:[mf],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Kd,useClass:Kd,deps:[[new tr,Gd]]},{provide:df,useClass:df,deps:[]},Qd,{provide:gh,useFactory:function(){return Sh},deps:[]},{provide:vh,useFactory:function(){return kh},deps:[]},{provide:nf,useFactory:function(e){return Fc(e=e||"undefined"!=typeof $localize&&$localize.locale||Rc),e},deps:[[new er(nf),new tr,new rr]]},{provide:rf,useValue:"USD"}];let Kf=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(Qn(Vf))},e.\u0275mod=se({type:e}),e.\u0275inj=E({providers:Gf}),e})()},9748:(e,t,n)=>{"use strict";n.d(t,{xv:()=>l,Dh:()=>c,GT:()=>a,on:()=>h,pX:()=>o});var r=n(7368),i=n(9001);n(5271),e=n.hmd(e);const s=["ngOnDestroy"],o=(e,t,n,r={})=>new Proxy(e,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(e[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,e[o]),e[o];if(s.indexOf(o)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[o];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(o,n,i),i})})})}),a=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class u{constructor(e){return e}}const c=new r.OlP("angularfire2.app.options"),l=new r.OlP("angularfire2.app.name");function h(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&d("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new u(o)}const d=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};new r.FiY},5271:(e,t,n)=>{"use strict";n.d(t,{q4:()=>c,iC:()=>_,f6:()=>v,HU:()=>g,cc:()=>d});var r=n(7368);(0,n(7092).registerVersion)("firebase","9.0.1","app");var i=n(8489),s=n(8569),o=n(6599),a=n(9098),u=n(4187);e=n.hmd(e);const c=new r.GfV("7.0.3"),l=!!e.hot,h=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};function d(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(h("error",`${t} was already initialized on the ${n} Firebase App with different settings.${l?" You may need to reload as Firebase is not HMR aware.":""}`),h("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}function f(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class p{constructor(e,t=i.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class m{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",f,{},f,f)),t.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let g=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new p(Zone.current)),this.insideAngular=e.run(()=>new p(Zone.current,s.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function y(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("AngularFireModule has not been provided");return e}function v(e){return e.pipe((0,a.QV)(y().insideAngular))}function _(e){return y(),(t=y(),function(e){return(e=e.lift(new m(t.ngZone))).pipe((0,u.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))})(e);var t}},1932:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(250),i=n(5119),s=n(7092),o=n(308);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const u=new e(a,n);return t[a.name]=u,u},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.1",void 0);const d=h},7092:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FirebaseError:()=>o.ZR,SDK_VERSION:()=>I,_DEFAULT_ENTRY_NAME:()=>l,_addComponent:()=>p,_addOrOverwriteComponent:()=>m,_apps:()=>d,_clearComponents:()=>_,_components:()=>f,_getProvider:()=>y,_registerComponent:()=>g,_removeServiceInstance:()=>v,deleteApp:()=>k,getApp:()=>E,getApps:()=>S,initializeApp:()=>T,onLog:()=>N,registerVersion:()=>C,setLogLevel:()=>x});var r=n(6304),i=n(5119),s=n(308),o=n(250);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const u="@firebase/app",c=new s.Yd("@firebase/app"),l="[DEFAULT]",h={[u]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,f=new Map;function p(e,t){try{e.container.addComponent(t)}catch(n){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function g(e){const t=e.name;if(f.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;f.set(t,e);for(const n of d.values())p(n,e);return!0}function y(e,t){return e.container.getProvider(t)}function v(e,t,n=l){y(e,t).clearInstance(n)}function _(){f.clear()}const w=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class b{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw w.create("app-deleted",{appName:this._name})}}const I="9.0.0";function T(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:l,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw w.create("bad-app-name",{appName:String(r)});const s=d.get(r);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw w.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of f.values())a.addComponent(i);const u=new b(e,n,a);return d.set(r,u),u}function E(e=l){const t=d.get(e);if(!t)throw w.create("no-app",{appName:e});return t}function S(){return Array.from(d.values())}function k(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)(function*(e){const t=e.name;d.has(t)&&(d.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function C(e,t,n){var r;let s=null!==(r=h[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void c.warn(e.join(" "))}g(new i.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function N(e,t){if(null!==e&&"function"!=typeof e)throw w.create("invalid-log-argument");(0,s.Am)(e,t)}function x(e){(0,s.Ub)(e)}g(new i.wA("platform-logger",e=>new a(e),"PRIVATE")),C(u,"0.7.0",void 0),C("fire-js","")},5119:(e,t,n)=>{"use strict";n.d(t,{wA:()=>s,H0:()=>u});var r=n(4762),i=n(250),s=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),o="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(s){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=(0,r.CR)(s.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var e;return(0,r.Jh)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.CR)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=o),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,s=void 0===i?{}:i,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:s});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];o===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(d){t={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var s=this.instances.get(r);return s&&e(s,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,s=this.onInitCallbacks.get(t);if(s)try{for(var o=(0,r.XA)(s),a=o.next();!a.done;a=o.next()){var u=a.value;try{u(e,t)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===o?void 0:t),options:i}),this.instances.set(n,s),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch(a){}return s||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=o),this.component?this.component.multipleInstances?e:o:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},308:(e,t,n)=>{"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}var i;n.d(t,{in:()=>o,Yd:()=>h,Ub:()=>d,Am:()=>f});var s=[],o=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var s=(new Date).toISOString(),o=c[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,r(["["+s+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function d(e){s.forEach(function(t){t.setLogLevel(e)})}function f(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=a[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:a,args:i,type:t.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},250:(e,t,n)=>{"use strict";n.d(t,{BH:()=>c,LL:()=>T,ZR:()=>I,tV:()=>a,r3:()=>k,Sg:()=>l,ne:()=>O,vZ:()=>C,ZB:()=>u,pd:()=>R,m9:()=>M,z$:()=>h,jU:()=>p,ru:()=>m,d:()=>y,xb:()=>A,w1:()=>v,hl:()=>b,uI:()=>d,UG:()=>f,b$:()=>g,G6:()=>w,Mn:()=>_,xO:()=>x,zd:()=>D});var r=n(4762),i=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,o||(l=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(s=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{s=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==s||null==o||null==a||null==u)throw Error();r.push(s<<2|o>>4),64!==a&&(r.push(o<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},o=function(e){return function(e){var t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=u(e[n],t[n]));return e}var c=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function l(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(a)),""].join(".")}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())}function f(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function p(){return"object"==typeof self&&self.self===self}function m(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return h().indexOf("Electron/")>=0}function v(){var e=h();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return h().indexOf("MSAppHost/")>=0}function w(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){return"indexedDB"in self&&null!=indexedDB}var I=function(e){function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name="FirebaseError",Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,T.prototype.create),s}return(0,r.ZT)(t,e),t}(Error),T=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,s=this.errors[e],o=s?E(s,r):"Error",a=this.serviceName+": "+o+" ("+i+").",u=new I(i,a,r);return u},e}();function E(e,t){return e.replace(S,function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"})}var S=/\{\$([^}]+)}/g;function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function A(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function C(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,s=n;i<s.length;i++){if(!r.includes(l=s[i]))return!1;var o=e[l],a=t[l];if(N(o)&&N(a)){if(!C(o,a))return!1}else if(o!==a)return!1}for(var u=0,c=r;u<c.length;u++){var l;if(!n.includes(l=c[u]))return!1}return!0}function N(e){return null!==e&&"object"==typeof e}function x(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r];n(s[0],s[1])}return t.length?"&"+t.join("&"):""}function D(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("="),r=n[1];t[decodeURIComponent(n[0])]=decodeURIComponent(r)}}),t}function R(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function O(e,t){var n=new P(e,t);return n.subscribe.bind(n)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,s,o=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),s=1518500249):(i=a^u^c,s=1859775393):r<60?(i=a&u|c&(a|u),s=2400959708):(i=a^u^c,s=3395469782);var h=(o<<5|o>>>27)+i+l+s+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=o,o=h}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,s=this.inbuf_;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++r,++s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++r,++s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}();var P=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),s},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function L(){}function M(e){return e&&e._delegate?e._delegate:e}},9001:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(1932);r.Z.registerVersion("firebase","9.0.1","app-compat")},1119:(e,t,n)=>{"use strict";n.r(t);var r=n(6304),i=n(1932),s=n(250),o=n(7092),a=n(4762),u=n(308),c=n(5119);const l=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=new s.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new u.Yd("@firebase/auth");function f(e,...t){d.logLevel<=u.in.ERROR&&d.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function p(e,...t){throw g(e,...t)}function m(e,...t){return g(e,...t)}function g(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h.create(e,...t)}function y(e,t,...n){if(!e)throw g(t,...n)}function v(e){const t="INTERNAL ASSERTION FAILED: "+e;throw f(t),new Error(t)}function _(e,t){e||v(t)}const w=new Map;function b(e){_(e instanceof Function,"Expected a class definition");let t=w.get(e);return t?(_(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,w.set(e,t),t)}function I(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function T(){return"http:"===E()||"https:"===E()}function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class S{constructor(e,t){this.shortDelay=e,this.longDelay=t,_(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(T()||(0,s.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function k(e,t){_(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class A{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void v("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void v("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void v("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const C={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded"},N=new S(3e4,6e4);function x(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function D(e,t,n,r){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)(function*(e,t,n,r,i={}){return O(e,i,()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,s.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),u=new(A.headers());return u.set("Content-Type","application/json"),u.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&u.set("X-Firebase-Locale",e.languageCode),A.fetch()(F(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},i))})})).apply(this,arguments)}function O(e,t,n){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},C),t);try{const t=new V(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw U(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=(i.ok?s.errorMessage:s.error.message).split(" : ")[0];if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw U(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===t)throw U(e,"email-already-in-use",s);p(e,r[t]||t.toLowerCase().replace(/[_\s]+/g,"-"))}}catch(i){if(i instanceof s.ZR)throw i;p(e,"network-request-failed")}})).apply(this,arguments)}function L(e,t,n,r){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)(function*(e,t,n,r,i={}){const s=yield D(e,t,n,r,i);return"mfaPendingCredential"in s&&p(e,"multi-factor-auth-required",{serverResponse:s}),s})).apply(this,arguments)}function F(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?k(e.config,i):`${e.config.apiScheme}://${i}`}class V{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(m(this.auth,"timeout")),N.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function U(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=m(e,t,r);return i.customData._tokenResponse=n,i}function j(){return(j=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function q(e,t){return B.apply(this,arguments)}function B(){return(B=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function z(e,t){return H.apply(this,arguments)}function H(){return(H=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function Z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function $(){return($=(0,r.Z)(function*(e,t=!1){const n=(0,s.m9)(e),r=yield n.getIdToken(t),i=K(r);y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Z(G(i.auth_time)),issuedAtTime:Z(G(i.iat)),expirationTime:Z(G(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function G(e){return 1e3*Number(e)}function K(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return f("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.tV)(n);return e?JSON.parse(e):(f("Failed to decode base64 JWT payload"),null)}catch(i){return f("Caught error parsing JWT payload as JSON",i),null}}function W(e,t){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof s.ZR&&Y(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function Y({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class J{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class X{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Z(this.lastLoginAt),this.creationTime=Z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ee(e){return te.apply(this,arguments)}function te(){return(te=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield W(e,z(n,{idToken:r}));y(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ie(s.providerUserInfo):[],a=re(e.providerData,o),u=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new X(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,c)})).apply(this,arguments)}function ne(){return(ne=(0,r.Z)(function*(e){const t=(0,s.m9)(e);yield ee(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function re(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function ie(e){return e.map(e=>{var{providerId:t}=e,n=(0,a._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function se(){return(se=(0,r.Z)(function*(e,t){const n=yield O(e,{},()=>{const n=(0,s.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=F(e,r,"/v1/token",`key=${i}`);return A.fetch()(o,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class oe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y(void 0!==e.idToken,"internal-error"),y(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=K(e);return y(t,"internal-error"),y(void 0!==t.exp,"internal-error"),y(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return y(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return se.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new oe;return n&&(y("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(y("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(y("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oe,this.toJSON())}_performRefresh(){return v("not implemented")}}function ae(e,t){y("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ue{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=(0,a._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new J(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.metadata=new X(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield W(t,t.stsTokenManager.getToken(t.auth,e));return y(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return $.apply(this,arguments)}(this,e)}reload(){return function(e){return ne.apply(this,arguments)}(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ue(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ee(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield W(e,function(e,t){return j.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,u,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(u=t.createdAt)&&void 0!==u?u:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:_,emailVerified:w,isAnonymous:b,providerData:I,stsTokenManager:T}=t;y(_&&T,e,"internal-error");const E=oe.fromJSON(this.name,T);y("string"==typeof _,e,"internal-error"),ae(l,e.name),ae(h,e.name),y("boolean"==typeof w,e,"internal-error"),y("boolean"==typeof b,e,"internal-error"),ae(d,e.name),ae(f,e.name),ae(p,e.name),ae(m,e.name),ae(g,e.name),ae(v,e.name);const S=new ue({uid:_,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:v});return I&&Array.isArray(I)&&(S.providerData=I.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new oe;r.updateFromServerResponse(t);const i=new ue({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield ee(i),i})()}}const ce=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function le(e,t,n){return`firebase:${e}:${t}:${n}`}class he{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=le(this.userKey,r.apiKey,i),this.fullPersistenceKey=le("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?ue._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new he(b(ce),e,n);const i=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=i[0]||b(ce);const o=le(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=ue._fromJSON(e,t);n!==s&&(a=r),s=n;break}}catch(c){}const u=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(c){}});return function(t){return e.apply(this,arguments)}}())),new he(s,e,n)):new he(s,e,n)})()}}function de(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ge(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(fe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ve(t))return"Blackberry";if(_e(t))return"Webos";if(pe(t))return"Safari";if((t.includes("chrome/")||me(t))&&!t.includes("edge/"))return"Chrome";if(ye(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function fe(e=(0,s.z$)()){return/firefox\//i.test(e)}function pe(e=(0,s.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function me(e=(0,s.z$)()){return/crios\//i.test(e)}function ge(e=(0,s.z$)()){return/iemobile/i.test(e)}function ye(e=(0,s.z$)()){return/android/i.test(e)}function ve(e=(0,s.z$)()){return/blackberry/i.test(e)}function _e(e=(0,s.z$)()){return/webos/i.test(e)}function we(e=(0,s.z$)()){return/iphone|ipad|ipod/i.test(e)}function be(e=(0,s.z$)()){return we(e)||ye(e)||_e(e)||ve(e)||/windows phone/i.test(e)||ge(e)}function Ie(e,t=[]){let n;switch(e){case"Browser":n=de((0,s.z$)());break;case"Worker":n=`${de((0,s.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${r}`}class Te{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Se(this),this.idTokenSubscription=new Se(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=b(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r;n._deleted||(n.persistenceManager=yield he.create(n,e),n._deleted||((null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)&&(yield n._popupRedirectResolver._initialize(n)),yield n.initializeCurrentUser(t),n._deleted||(n._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t)):void 0})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;let r=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const i=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==r?void 0:r._redirectEventId,o=yield t.tryRedirectSignIn(e);i&&i!==s||!(null==o?void 0:o.user)||(r=o.user)}return r?r._redirectEventId?(y(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===r._redirectEventId?t.directlySetCurrentUser(r):t.reloadAndSetCurrentUserOrClear(r)):t.reloadAndSetCurrentUserOrClear(r):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield ee(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,s.m9)(e):null;return n&&y(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){if(!t._deleted)return e&&y(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,r.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(b(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new s.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&b(e)||t._popupRedirectResolver;y(n,t,"argument-error"),t.redirectPersistenceManager=yield he.create(t,[b(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,i;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return y(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ie(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ee(e){return(0,s.m9)(e)}class Se{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.ne)(e=>this.observer=e)}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ke(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ae(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ce{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return v("not implemented")}_getIdTokenResponse(e){return v("not implemented")}_linkToIdToken(e,t){return v("not implemented")}_getReauthenticationResolver(e){return v("not implemented")}}function Ne(e,t){return xe.apply(this,arguments)}function xe(){return(xe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:resetPassword",x(e,t))})).apply(this,arguments)}function De(e,t){return Re.apply(this,arguments)}function Re(){return(Re=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Oe(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",x(e,t))})).apply(this,arguments)}function Le(){return(Le=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:signInWithPassword",x(e,t))})).apply(this,arguments)}function Me(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:sendOobCode",x(e,t))})).apply(this,arguments)}function Ve(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,r.Z)(function*(e,t){return Me(e,t)})).apply(this,arguments)}function je(e,t){return qe.apply(this,arguments)}function qe(){return(qe=(0,r.Z)(function*(e,t){return Me(e,t)})).apply(this,arguments)}function Be(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,r.Z)(function*(e,t){return Me(e,t)})).apply(this,arguments)}function He(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,r.Z)(function*(e,t){return Me(e,t)})).apply(this,arguments)}function $e(){return($e=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:signInWithEmailLink",x(e,t))})).apply(this,arguments)}function Ge(){return(Ge=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:signInWithEmailLink",x(e,t))})).apply(this,arguments)}class Ke extends Ce{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ke(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Ke(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return Le.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return $e.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:p(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return De(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return Ge.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:p(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function We(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:signInWithIdp",x(e,t))})).apply(this,arguments)}class Ye extends Ce{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ye(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):p("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,a._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ye(n,r);return Object.assign(s,i),s}_getIdTokenResponse(e){return We(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,We(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,We(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.xO)(t)}return e}}function Je(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:sendVerificationCode",x(e,t))})).apply(this,arguments)}function et(){return(et=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:signInWithPhoneNumber",x(e,t))})).apply(this,arguments)}function tt(){return(tt=(0,r.Z)(function*(e,t){const n=yield L(e,"POST","/v1/accounts:signInWithPhoneNumber",x(e,t));if(n.temporaryProof)throw U(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const nt={USER_NOT_FOUND:"user-not-found"};function rt(){return(rt=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:signInWithPhoneNumber",x(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),nt)})).apply(this,arguments)}class it extends Ce{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new it({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new it({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return et.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return tt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return rt.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new it({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class st{constructor(e){var t,n,r,i,o,a;const u=(0,s.zd)((0,s.pd)(e)),c=null!==(t=u.apiKey)&&void 0!==t?t:null,l=null!==(n=u.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);y(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,s.zd)((0,s.pd)(e)).link,n=t?(0,s.zd)((0,s.pd)(t)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(e)).deep_link_id;return(r?(0,s.zd)((0,s.pd)(r)).link:null)||r||n||t||e}(e);try{return new st(t)}catch(n){return null}}}let ot=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Ke._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=st.parseLink(t);return y(n,"argument-error"),Ke._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class at{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ut extends at{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ct extends ut{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return y("providerId"in t&&"signInMethod"in t,"argument-error"),Ye._fromParams(t)}credential(e){return this._credential(e)}_credential(e){return y(e.idToken||e.accessToken,"argument-error"),Ye._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ct.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ct.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new ct(o)._credential({idToken:t,accessToken:n,rawNonce:s,pendingToken:i})}catch(a){return null}}}let lt=(()=>{class e extends ut{constructor(){super("facebook.com")}static credential(t){return Ye._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),ht=(()=>{class e extends ut{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ye._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),dt=(()=>{class e extends ut{constructor(){super("github.com")}static credential(t){return Ye._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class ft extends Ce{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return We(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,We(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,We(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new ft(n,i):null}static _create(e,t){return new ft(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let pt=(()=>{class e extends ut{constructor(){super("twitter.com")}static credential(t,n){return Ye._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function mt(e,t){return gt.apply(this,arguments)}function gt(){return(gt=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:signUp",x(e,t))})).apply(this,arguments)}class yt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,i=!1){return(0,r.Z)(function*(){const r=yield ue._fromIdTokenResponse(e,n,i),s=vt(n);return new yt({user:r,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=vt(n);return new yt({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function vt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function _t(){return(_t=(0,r.Z)(function*(e){var t;const n=Ee(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new yt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield mt(n,{returnSecureToken:!0}),i=yield yt._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class wt extends s.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,wt.prototype),this.appName=e.name,this.code=t.code,this.tenantId=null!==(i=e.tenantId)&&void 0!==i?i:void 0,this.serverResponse=t.customData.serverResponse}static _fromErrorAndOperation(e,t,n,r){return new wt(e,t,n,r)}}function bt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw wt._fromErrorAndOperation(e,n,t,r);throw n})}function It(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function Tt(){return(Tt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);yield kt(!0,n,t);const{providerUserInfo:r}=yield q(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),i=It(r||[]);return n.providerData=n.providerData.filter(e=>i.has(e.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function Et(e,t){return St.apply(this,arguments)}function St(){return(St=(0,r.Z)(function*(e,t,n=!1){const r=yield W(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return yt._forOperation(e,"link",r)})).apply(this,arguments)}function kt(e,t,n){return At.apply(this,arguments)}function At(){return(At=(0,r.Z)(function*(e,t,n){yield ee(t);const r=!1===e?"provider-already-linked":"no-such-provider";y(It(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Ct(e,t){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=yield W(e,bt(r,i,t,e),n);y(s.idToken,r,"internal-error");const o=K(s.idToken);y(o,r,"internal-error");const{sub:a}=o;return y(e.uid===a,r,"user-mismatch"),yt._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&p(r,"user-mismatch"),s}})).apply(this,arguments)}function xt(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,r.Z)(function*(e,t,n=!1){const r="signIn",i=yield bt(e,r,t),s=yield yt._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(s.user)),s})).apply(this,arguments)}function Rt(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,r.Z)(function*(e,t){return xt(Ee(e),t)})).apply(this,arguments)}function Pt(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e);return yield kt(!1,n,t.providerId),Et(n,t)})).apply(this,arguments)}function Mt(e,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,r.Z)(function*(e,t){return Ct((0,s.m9)(e),t)})).apply(this,arguments)}function Vt(e,t){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:signInWithCustomToken",x(e,t))})).apply(this,arguments)}function jt(){return(jt=(0,r.Z)(function*(e,t){const n=Ee(e),r=yield Vt(n,{token:t,returnSecureToken:!0}),i=yield yt._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class qt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Bt._fromServerResponse(e,t):p(e,"internal-error")}}class Bt extends qt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Bt(t)}}function zt(e,t,n){var r;y((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),y(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(y(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iosBundleId=n.iOS.bundleId),n.android&&(y(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ht(){return(Ht=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"PASSWORD_RESET",email:t};n&&zt(r,i,n),yield je(r,i)})).apply(this,arguments)}function Zt(){return(Zt=(0,r.Z)(function*(e,t,n){yield Ne((0,s.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function $t(){return($t=(0,r.Z)(function*(e,t){yield Oe((0,s.m9)(e),{oobCode:t})})).apply(this,arguments)}function Gt(e,t){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r=yield Ne(n,{oobCode:t}),i=r.requestType;switch(y(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":y(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":y(r.mfaInfo,n,"internal-error");default:y(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=qt._fromServerResponse(Ee(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}})).apply(this,arguments)}function Wt(){return(Wt=(0,r.Z)(function*(e,t){const{data:n}=yield Gt((0,s.m9)(e),t);return n.email})).apply(this,arguments)}function Qt(){return(Qt=(0,r.Z)(function*(e,t,n){const r=Ee(e),i=yield mt(r,{returnSecureToken:!0,email:t,password:n}),s=yield yt._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function Yt(){return(Yt=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"EMAIL_SIGNIN",email:t};y(n.handleCodeInApp,r,"argument-error"),n&&zt(r,i,n),yield Be(r,i)})).apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=ot.credentialWithLink(t,n||I());return y(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Rt(r,i)})).apply(this,arguments)}function Xt(e,t){return en.apply(this,arguments)}function en(){return(en=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:createAuthUri",x(e,t))})).apply(this,arguments)}function tn(){return(tn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:T()?I():"http://localhost"},{signinMethods:r}=yield Xt((0,s.m9)(e),n);return r||[]})).apply(this,arguments)}function nn(){return(nn=(0,r.Z)(function*(e,t){const n=(0,s.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&zt(n.auth,r,t);const{email:i}=yield Ve(n.auth,r);i!==e.email&&(yield e.reload())})).apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&zt(r.auth,i,n);const{email:o}=yield He(r.auth,i);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function sn(e,t){return on.apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t){return D(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function an(){return(an=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,s.m9)(e),i={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield W(r,sn(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function un(e,t,n){return cn.apply(this,arguments)}function cn(){return(cn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield W(e,De(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class ln{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class hn extends ln{constructor(e,t,n,r){super(e,t,n),this.username=r}}class dn extends ln{constructor(e,t){super(e,"facebook.com",t)}}class fn extends hn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class pn extends ln{constructor(e,t){super(e,"google.com",t)}}class mn extends hn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function gn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=K(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new ln(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new dn(s,i);case"github.com":return new fn(s,i);case"google.com":return new pn(s,i);case"twitter.com":return new mn(s,i,e.screenName||null);case"custom":case"anonymous":return new ln(s,null);default:return new ln(s,r,i)}}(n)}class yn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new yn("enroll",e)}static _fromMfaPendingCredential(e){return new yn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return yn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return yn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class vn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ee(e),i=(t.serverResponse.mfaInfo||[]).map(e=>qt._fromServerResponse(n,e));y(t.serverResponse.mfaPendingCredential,n,"internal-error");const s=yn._fromMfaPendingCredential(t.serverResponse.mfaPendingCredential);return new vn(s,i,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,s);delete t.serverResponse.mfaInfo,delete t.serverResponse.mfaPendingCredential;const i=Object.assign(Object.assign({},t.serverResponse),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield yt._fromIdTokenResponse(n,t.operationType,i);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return y(t.user,n,"internal-error"),yt._forOperation(t.user,t.operationType,i);default:p(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function _n(e,t){return D(e,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:e.tenantId},t))}class wn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>qt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new wn(e)}getSession(){var e=this;return(0,r.Z)(function*(){return yn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,i=yield n.getSession(),s=yield W(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield W(t.user,(s=t.user.auth,o={idToken:r,mfaEnrollmentId:n},D(s,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:s.tenantId},o))));var s,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const bn=new WeakMap,In="__sak";class Tn{constructor(e,t){this.storage=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(In,"1"),this.storage.removeItem(In),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}}const En=(()=>{class e extends Tn{constructor(){super(window.localStorage,"LOCAL"),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,s.z$)();return pe(e)||we(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=be(),this._shouldAllowMigration=!0,this.boundEventHandler=this.onStorageEvent.bind(this)}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,e,t),i.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),Sn=(()=>{class e extends Tn{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let kn=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:i,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),c=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function An(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class Cn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=An("",20);r.port1.start();const l=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function Nn(){return window}function xn(){return void 0!==Nn().WorkerGlobalScope&&"function"==typeof Nn().importScripts}function Dn(){return(Dn=(0,r.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})).apply(this,arguments)}const Rn="firebaseLocalStorageDb",On="firebaseLocalStorage",Pn="fbase_key";class Ln{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mn(e,t){return e.transaction([On],t?"readwrite":"readonly").objectStore(On)}function Fn(){const e=indexedDB.open(Rn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(On,{keyPath:Pn})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains(On)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(Rn);return new Ln(e).toPromise()}(),t(yield Fn()))}))})}function Vn(e,t,n){return Un.apply(this,arguments)}function Un(){return(Un=(0,r.Z)(function*(e,t,n){const r=Mn(e,!0).put({[Pn]:t,value:n});return new Ln(r).toPromise()})).apply(this,arguments)}function jn(){return(jn=(0,r.Z)(function*(e,t){const n=Mn(e,!1).get(t),r=yield new Ln(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function qn(e,t){const n=Mn(e,!0).delete(t);return new Ln(n).toPromise()}const Bn=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield Fn()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return xn()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=kn._getInstance(xn()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return Dn.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new Cn(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){var n;if(t.sender&&t.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield Fn();return yield Vn(e,In,"1"),yield qn(e,In),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>Vn(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return jn.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>qn(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=Mn(e,!1).getAll();return new Ln(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function zn(e,t){return D(e,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:e.tenantId},t))}function Hn(){return(Hn=(0,r.Z)(function*(e){return(yield D(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zn(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function $n(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Gn=1e12;class Kn{constructor(e){this.auth=e,this.counter=Gn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Wn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Gn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Gn))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||Gn))||void 0===n||n.execute(),""})()}}class Wn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;y(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qn=$n("rcb"),Yn=new S(3e4,6e4);class Jn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Nn().grecaptcha}load(e,t=""){return y(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Nn().grecaptcha):new Promise((n,r)=>{const i=Nn().setTimeout(()=>{r(m(e,"network-request-failed"))},Yn.get());Nn()[Qn]=()=>{Nn().clearTimeout(i),delete Nn()[Qn];const s=Nn().grecaptcha;if(!s)return void r(m(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)},Zn(`https://www.google.com/recaptcha/api.js??${(0,s.xO)({onload:Qn,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(i),r(m(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Nn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xn{load(e){return(0,r.Z)(function*(){return new Kn(e)})()}clearedOneInstance(){}}const er="recaptcha",tr={theme:"light",type:"image"};class nr{constructor(e,t=Object.assign({},tr),n){this.parameters=t,this.type=er,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ee(n),this.isInvisible="invisible"===this.parameters.size,y("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;y(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xn:new Jn,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const i=t=>{t&&(e.tokenChangeListeners.delete(i),r(t))};e.tokenChangeListeners.add(i),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){y(!this.parameters.sitekey,this.auth,"argument-error"),y(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),y("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Nn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){y(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){y(T()&&!xn(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return Hn.apply(this,arguments)}(e.auth);y(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return y(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rr{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=it._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function ir(){return(ir=(0,r.Z)(function*(e,t,n){const r=Ee(e),i=yield ar(r,t,(0,s.m9)(n));return new rr(i,e=>Rt(r,e))})).apply(this,arguments)}function sr(){return(sr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);yield kt(!1,r,"phone");const i=yield ar(r.auth,t,(0,s.m9)(n));return new rr(i,e=>Pt(r,e))})).apply(this,arguments)}function or(){return(or=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e),i=yield ar(r.auth,t,(0,s.m9)(n));return new rr(i,e=>Mt(r,e))})).apply(this,arguments)}function ar(e,t,n){return ur.apply(this,arguments)}function ur(){return(ur=(0,r.Z)(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(y("string"==typeof i,e,"argument-error"),y(n.type===er,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return y("enroll"===t.type,e,"internal-error"),(yield _n(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{y("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return y(n,e,"missing-multi-factor-info"),(yield zn(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield Je(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function cr(){return(cr=(0,r.Z)(function*(e,t){yield Et((0,s.m9)(e),t)})).apply(this,arguments)}let lr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ee(t)}verifyPhoneNumber(e,t){return ar(this.auth,e,(0,s.m9)(t))}static credential(e,t){return it._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?it._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function hr(e,t){return t?b(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class dr extends Ce{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return We(e,this._buildIdpRequest())}_linkToIdToken(e,t){return We(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return We(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fr(e){return xt(e.auth,new dr(e),e.bypassAuthState)}function pr(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),Ct(n,new dr(e),e.bypassAuthState)}function mr(e){return gr.apply(this,arguments)}function gr(){return(gr=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),Et(n,new dr(e),e.bypassAuthState)})).apply(this,arguments)}class yr{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const u={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(u))}catch(c){t.reject(c)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fr;case"linkViaPopup":case"linkViaRedirect":return mr;case"reauthViaPopup":case"reauthViaRedirect":return pr;default:p(this.auth,"internal-error")}}resolve(e){_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vr=new S(2e3,1e4);function _r(){return(_r=(0,r.Z)(function*(e,t,n){const r=Ee(e);y(t instanceof at,e,"argument-error");const i=hr(r,n);return new Ir(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function wr(){return(wr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(t instanceof at,r.auth,"argument-error");const i=hr(r.auth,n);return new Ir(r.auth,"reauthViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}function br(){return(br=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(t instanceof at,r.auth,"argument-error");const i=hr(r.auth,n);return new Ir(r.auth,"linkViaPopup",t,i,r).executeNotNull()})).apply(this,arguments)}let Ir=(()=>{class e extends yr{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return y(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){_(1===e.filter.length,"Popup operations only handle one event");const t=An();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(m(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,vr.get())};e()}}return e.currentPopupAction=null,e})();const Tr=new Map;class Er extends yr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Tr.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return Sr.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Tr.set(t.auth._key(),n)}return n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function Sr(){return(Sr=(0,r.Z)(function*(e,t){const n=Nr(t),r="true"===(yield Cr(e)._get(n));return yield Cr(e)._remove(n),r})).apply(this,arguments)}function kr(e,t){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,r.Z)(function*(e,t){return Cr(e)._set(Nr(t),"true")})).apply(this,arguments)}function Cr(e){return b(e._redirectPersistence)}function Nr(e){return le("pendingRedirect",e.config.apiKey,e.name)}function xr(){return(xr=(0,r.Z)(function*(e,t,n){const r=Ee(e);y(t instanceof at,e,"argument-error");const i=hr(r,n);return yield kr(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function Dr(){return(Dr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(t instanceof at,r.auth,"argument-error");const i=hr(r.auth,n);yield kr(i,r.auth);const o=yield Mr(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function Rr(){return(Rr=(0,r.Z)(function*(e,t,n){const r=(0,s.m9)(e);y(t instanceof at,r.auth,"argument-error");const i=hr(r.auth,n);yield kt(!1,r,t.providerId),yield kr(i,r.auth);const o=yield Mr(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function Or(){return(Or=(0,r.Z)(function*(e,t){return yield Ee(e)._initializationPromise,Pr(e,t,!1)})).apply(this,arguments)}function Pr(e,t){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t,n=!1){const r=Ee(e),i=hr(r,t),s=new Er(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function Mr(e){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,r.Z)(function*(e){const t=An(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class Vr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!jr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ur(e))}saveEventToCache(e){this.cachedEventUids.add(Ur(e)),this.lastProcessedEventTime=Date.now()}}function Ur(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function jr({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function qr(e){return Br.apply(this,arguments)}function Br(){return(Br=(0,r.Z)(function*(e,t={}){return D(e,"GET","/v1/projects",t)})).apply(this,arguments)}const zr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hr=/^https?/;function Zr(){return(Zr=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield qr(e);for(const r of t)try{if($r(r))return}catch(n){}p(e,"unauthorized-domain")})).apply(this,arguments)}function $r(e){const t=I(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Hr.test(n))return!1;if(zr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Gr=new S(3e4,6e4);function Kr(){const e=Nn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Wr=null;function Qr(e){return Wr=Wr||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Kr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Kr(),n(m(e,"network-request-failed"))},timeout:Gr.get()})}if(null===(i=null===(r=Nn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Nn().gapi)||void 0===s?void 0:s.load)){const t=$n("iframefcb");return Nn()[t]=()=>{gapi.load?o():n(m(e,"network-request-failed"))},Zn(`https://apis.google.com/js/api.js?onload=${t}`)}o()}}).catch(e=>{throw Wr=null,e})}(e),Wr}const Yr=new S(5e3,15e3),Jr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Xr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ei(e){const t=e.config;y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?k(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},i=Xr.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,s.xO)(r).slice(1)}`}function ti(){return(ti=(0,r.Z)(function*(e){const t=yield Qr(e),n=Nn().gapi;return y(n,e,"internal-error"),t.open({where:document.body,url:ei(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jr,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=m(e,"network-request-failed"),s=Nn().setTimeout(()=>{r(i)},Yr.get());function o(){Nn().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const ni={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ri{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ii(e,t,n,r,i,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");const u={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.SDK_VERSION,eventId:i};if(t instanceof at){t.setDefaultLanguage(e.languageCode),u.providerId=t.providerId||"",(0,s.xb)(t.getCustomParameters())||(u.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))u[e]=t}if(t instanceof ut){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(u.scopes=e.join(","))}e.tenantId&&(u.tid=e.tenantId);const c=u;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];return`${function({config:e}){return e.emulator?k(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,s.xO)(c).slice(1)}`}const si="webStorageSupport";class oi extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return v("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new oi(e)}_finalizeEnroll(e,t,n){return function(e,t){return D(e,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return D(e,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}var ai;class ui{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ci(){return window}function li(){return(li=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:i}=ci();_(t.sessionId,"AuthEvent did not contain a session ID");const s=yield fi(t.sessionId),o={};return we()?o.ibi=i.packageName:ye()?o.apn=i.packageName:p(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,ii(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)})).apply(this,arguments)}function hi(){return(hi=(0,r.Z)(function*(e){const{BuildInfo:t}=ci(),n={};we()?n.iosBundleId=t.packageName:ye()?n.androidPackageName=t.packageName:p(e,"operation-not-supported-in-this-environment"),yield qr(e,n)})).apply(this,arguments)}function di(){return(di=(0,r.Z)(function*(e,t,n){const{cordova:r}=ci();let i=()=>{};try{yield new Promise((s,o)=>{let a=null;function u(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(m(e,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(u),document.addEventListener("resume",c,!1),ye()&&document.addEventListener("visibilitychange",l,!1),i=()=>{t.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}})}finally{i()}})).apply(this,arguments)}function fi(e){return pi.apply(this,arguments)}function pi(){return(pi=(0,r.Z)(function*(e){const t=mi(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function mi(e){if(_(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}ai="Browser",(0,o._registerComponent)(new c.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{y(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),y(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:ai,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ie(ai)},s=new Te(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(b);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new c.wA("auth-internal",e=>{return t=Ee(e.getProvider("auth").getImmediate()),new ui(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)("@firebase/auth","0.17.1",void 0);class gi extends Vr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function yi(e){return vi.apply(this,arguments)}function vi(){return(vi=(0,r.Z)(function*(e){const t=yield wi()._get(bi(e));return t&&(yield wi()._remove(bi(e))),t})).apply(this,arguments)}function _i(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function wi(){return b(En)}function bi(e){return le("authEvent",e.config.apiKey,e.name)}function Ii(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,s.zd)(n.join("?"))}function Ti(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:m("no-auth-event")}}function Ei(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Si(e=(0,s.z$)()){return!("file:"!==Ei()&&"ionic:"!==Ei()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function ki(){try{const e=self.localStorage,t=An();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,s.z$)()){return(0,s.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,s.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,s.hl)()}catch(e){return Ai()&&(0,s.hl)()}return!1}function Ai(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ci(){return("http:"===Ei()||"https:"===Ei()||(0,s.ru)()||Si())&&!((0,s.b$)()||(0,s.UG)())&&ki()&&!Ai()}function Ni(){return Si()&&"undefined"!=typeof document}function xi(){return(xi=(0,r.Z)(function*(){return!!Ni()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const Di={LOCAL:"local",NONE:"none",SESSION:"session"},Ri=y,Oi="persistence";function Pi(e){return Li.apply(this,arguments)}function Li(){return(Li=(0,r.Z)(function*(e){yield e._initializationPromise;const t=Mi(),n=le(Oi,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())})).apply(this,arguments)}function Mi(){return"undefined"!=typeof window?window:null}const Fi=y;class Vi{constructor(){this.browserResolver=b(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sn,this._completeRedirectFn=Pr}_openPopup(e,t,n,i){var o=this;return(0,r.Z)(function*(){var r;_(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=ii(e,t,n,I(),i);return function(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},ni),{width:r.toString(),height:i.toString(),top:o,left:a}),l=(0,s.z$)().toLowerCase();n&&(u=me(l)?"_blank":n),fe(l)&&(t=t||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,s.z$)()){var t;return we(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==u)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new ri(null);const d=window.open(t||"",u,h);y(d,e,"popup-blocked");try{d.focus()}catch(f){}return new ri(d)}(e,a,An())})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){var r;return yield s._originValidation(e),r=ii(e,t,n,I(),i),Nn().location.href=r,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(_(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return ti.apply(this,arguments)}(e),r=new Vr(e);return n.register("authEvent",t=>(y(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(si,{type:si},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),p(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Zr.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return be()||pe()||we()}}),this.cordovaResolver=b(class{constructor(){this._redirectPersistence=Sn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pr}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new gi(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){p(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,i){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,i,s,o,a,u,c,l;const h=ci();y("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),y(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),y("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),y("function"==typeof(null===(u=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),y("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),Tr.clear(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:_i(),postBody:null,tenantId:e.tenantId,error:m(e,"no-auth-event")}}(e,n,i);yield function(e,t){return wi()._set(bi(e),t)}(e,a);const u=yield function(e,t,n){return li.apply(this,arguments)}(e,a,t),c=yield function(e){const{cordova:t}=ci();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=(0,s.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)})})}(u);return function(e,t,n){return di.apply(this,arguments)}(e,r,c)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return hi.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=ci(),o=setTimeout((0,r.Z)(function*(){yield yi(e),t.onEvent(Ti())}),500),a=function(){var n=(0,r.Z)(function*(n){clearTimeout(o);const r=yield yi(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=Ii(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ii(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ii(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Ii(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?m(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||Ti())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const u=i,c=`${s.packageName.toLowerCase()}://`;ci().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(c)&&a({url:e}),"function"==typeof u)try{u(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Sn,this._completeRedirectFn=Pr}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,i)})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ni()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fi(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return xi.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function Ui(e){return e.unwrap()}function ji(e){return Bi(e)}function qi(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Gi(e,function(e,t){var n;const r=(0,s.m9)(e),i=t;return y(t.operationType,r,"argument-error"),y(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),vn._fromError(r,i)}(e,t));else if(r){const e=Bi(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Bi(e){const{_tokenResponse:t}=e instanceof s.ZR?e.customData:e;if(!t)return null;if(!(e instanceof s.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return lr.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=ht;break;case"facebook.com":r=lt;break;case"github.com":r=dt;break;case"twitter.com":r=pt;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?ft._create(n,o):Ye._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new ct(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof s.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function zi(e,t){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,r.Z)(function*(e,t){let n;try{n=yield t}catch(o){throw o instanceof s.ZR&&qi(e,o),o}const{operationType:r,user:i}=n;return{operationType:r,credential:ji(n),additionalUserInfo:gn(n),user:Ki.getOrCreate(i)}})).apply(this,arguments)}function Zi(e,t){return $i.apply(this,arguments)}function $i(){return($i=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>zi(e,n.confirm(t))}})).apply(this,arguments)}class Gi{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return zi(Ui(this.auth),this.resolver.resolveSignIn(e))}}let Ki=(()=>{class e{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,s.m9)(e);return bn.has(t)||bn.set(t,wn._fromUser(t)),bn.get(t)}(e)}static getOrCreate(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return zi(t.auth,Pt(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return Zi(n.auth,function(e,t,n){return sr.apply(this,arguments)}(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return zi(t.auth,function(e,t,n){return br.apply(this,arguments)}(t._delegate,e,Vi))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Pi(Ee(t.auth)),function(e,t,n){return function(e,t,n){return Rr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Vi)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return zi(t.auth,Mt(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return Zi(this.auth,function(e,t,n){return or.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return zi(this.auth,function(e,t,n){return wr.apply(this,arguments)}(this._delegate,e,Vi))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Pi(Ee(t.auth)),function(e,t,n){return function(e,t,n){return Dr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Vi)})()}sendEmailVerification(e){return function(e,t){return nn.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield function(e,t){return Tt.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function(e,t){return un((0,s.m9)(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return un((0,s.m9)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return function(e,t){return cr.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function(e,t){return an.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function(e,t,n){return rn.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}return e.USER_MAP=new WeakMap,e})();const Wi=y;let Qi=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Wi(n,"invalid-api-key",{appName:e.name});let r=[ce];if("undefined"!=typeof window){r=function(e,t){const n=Mi();if(!(null==n?void 0:n.sessionStorage))return[];const r=le(Oi,e,t);switch(n.sessionStorage.getItem(r)){case Di.NONE:return[ce];case Di.LOCAL:return[Bn,Sn];case Di.SESSION:return[Sn];default:return[]}}(n,e.name);for(const e of[Bn,En,Sn])r.includes(e)||r.push(e)}Wi(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?Vi:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:i}}),this._delegate._updateErrorMap(l),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ki.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=Ee(e);y(r._canInitEmulator,r,"emulator-config-failed"),y(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=ke(t),{host:o,port:a}=function(e){const t=ke(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ae(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ae(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),function(e){function t(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"==typeof window||"undefined"==typeof document||e||("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}(i)}(this._delegate,e,t)}applyActionCode(e){return function(e,t){return $t.apply(this,arguments)}(this._delegate,e)}checkActionCode(e){return Gt(this._delegate,e)}confirmPasswordReset(e,t){return function(e,t,n){return Zt.apply(this,arguments)}(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return zi(n._delegate,function(e,t,n){return Qt.apply(this,arguments)}(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return function(e,t){return tn.apply(this,arguments)}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=st.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){Wi(Ci(),e._delegate,"operation-not-supported-in-this-environment");const t=yield function(e,t){return Or.apply(this,arguments)}(e._delegate,Vi);return t?zi(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){Ee(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Yi(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Yi(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return function(e,t,n){return Yt.apply(this,arguments)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return function(e,t,n){return Ht.apply(this,arguments)}(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){Ri(Object.values(Di).includes(t),e,"invalid-persistence-type"),(0,s.b$)()?Ri(t!==Di.SESSION,e,"unsupported-persistence-type"):(0,s.UG)()?Ri(t===Di.NONE,e,"unsupported-persistence-type"):Ai()?Ri(t===Di.NONE||t===Di.LOCAL&&(0,s.hl)(),e,"unsupported-persistence-type"):Ri(t===Di.NONE||ki(),e,"unsupported-persistence-type")}(t._delegate,e),e){case Di.SESSION:n=Sn;break;case Di.LOCAL:n=(yield b(Bn)._isAvailable())?Bn:En;break;case Di.NONE:n=ce;break;default:return p("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return zi(this._delegate,function(e){return _t.apply(this,arguments)}(this._delegate))}signInWithCredential(e){return zi(this._delegate,Rt(this._delegate,e))}signInWithCustomToken(e){return zi(this._delegate,function(e,t){return jt.apply(this,arguments)}(this._delegate,e))}signInWithEmailAndPassword(e,t){return zi(this._delegate,function(e,t,n){return Rt((0,s.m9)(e),ot.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return zi(this._delegate,function(e,t,n){return Jt.apply(this,arguments)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Zi(this._delegate,function(e,t,n){return ir.apply(this,arguments)}(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return Wi(Ci(),t._delegate,"operation-not-supported-in-this-environment"),zi(t._delegate,function(e,t,n){return _r.apply(this,arguments)}(t._delegate,e,Vi))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return Wi(Ci(),t._delegate,"operation-not-supported-in-this-environment"),yield Pi(t._delegate),function(e,t,n){return function(e,t,n){return xr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Vi)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return function(e,t){return Wt.apply(this,arguments)}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=Di,e})();function Yi(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Ki.getOrCreate(e)),error:t,complete:n}}let Ji=(()=>{class e{constructor(){this.providerId="phone",this._delegate=new lr(Ui(i.Z.auth()))}static credential(e,t){return lr.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}return e.PHONE_SIGN_IN_METHOD=lr.PHONE_SIGN_IN_METHOD,e.PROVIDER_ID=lr.PROVIDER_ID,e})();const Xi=y;var es;(es=i.Z).INTERNAL.registerComponent(new c.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Qi(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ot,FacebookAuthProvider:lt,GithubAuthProvider:dt,GoogleAuthProvider:ht,OAuthProvider:ct,PhoneAuthProvider:Ji,PhoneMultiFactorGenerator:class{constructor(){}static assertion(e){return oi._fromCredential(e)}},RecaptchaVerifier:class{constructor(e,t,n=i.Z.app()){var r;Xi(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new nr(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:pt,Auth:Qi,AuthCredential:Ce,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),es.registerVersion("@firebase/auth-compat","0.1.1")},8318:(e,t,n)=>{"use strict";n.d(t,{y:()=>c});var r=n(6673),i=n(5331),s=n(7498),o=n(6197),a=n(3392),u=n(1484);let c=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){u.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=l(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=l(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function l(e){if(e||(e=u.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},7498:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(1484),i=n(4294);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},5959:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),s=n(7570),o=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(e){super(e),this.destination=e}}let l=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends l{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},9291:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(7570);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},6673:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var r=n(5024),i=n(7498),s=n(7570),o=n(5331),a=n(1484),u=n(4294);class c extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof c?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new c(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class l extends c{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,u.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,u.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},7570:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(8470),i=n(2056),s=n(5024);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let a=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if((0,s.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){t=h instanceof o?u(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof o?t=t.concat(u(h.errors)):t.push(h)}}}if(t)throw new o(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var t;return e.EMPTY=((t=new e).closed=!0,t),e})();function u(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}},1484:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(e,t,n)=>{"use strict";n.d(t,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),s=n(6015);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function u(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},2875:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,N:()=>u});var r=n(5959),i=n(8318),s=n(7570),o=n(1564);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new c(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const u=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class c extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},653:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,c:()=>s});var r=n(8318);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},9764:(e,t,n)=>{"use strict";n.d(t,{D:()=>h});var r=n(8318),i=n(6015),s=n(7570),o=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,l.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[u.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[u.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},9342:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(8318),i=n(625),s=n(2570);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},1906:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(8318),i=n(6163),s=n(7471),o=n(9342);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},878:(e,t,n)=>{"use strict";n.d(t,{of:()=>o});var r=n(6163),i=n(9342),s=n(2570);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},9996:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(6673);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},7471:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(3982),i=n(3392);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},3982:(e,t,n)=>{"use strict";n.d(t,{zg:()=>o});var r=n(9996),i=n(9764),s=n(6882);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new u(e,this.project,this.concurrent))}}class u extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9098:(e,t,n)=>{"use strict";n.d(t,{ht:()=>l,QV:()=>u});var r=n(6673),i=n(653),s=n(878),o=n(8318);let a=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return e=this.error,new o.y(t=>t.error(e));case"C":return(0,i.c)()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();function u(e,t=0){return function(n){return n.lift(new c(e,t))}}class c{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new l(e,this.scheduler,this.delay))}}class l extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(e,this.destination)))}_next(e){this.scheduleMessage(a.createNext(e))}_error(e){this.scheduleMessage(a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(e,t){this.notification=e,this.destination=t}}},1564:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(6673);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},4187:(e,t,n)=>{"use strict";n.d(t,{R:()=>g});var r=n(8318);let i=1;const s=(()=>Promise.resolve())(),o={};function a(e){return e in o&&(delete o[e],!0)}const u={setImmediate(e){const t=i++;return o[t]=!0,s.then(()=>a(t)&&e()),t},clearImmediate(e){a(e)}};var c=n(8277);class l extends c.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=u.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(u.clearImmediate(t),e.scheduled=void 0)}}var h=n(1098);class d extends h.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}const f=new d(l);var p=n(8470);class m extends r.y{constructor(e,t=0,n=f){var r;super(),this.source=e,this.delayTime=t,this.scheduler=n,((0,p.k)(r=t)||!(r-parseFloat(r)+1>=0)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(e,t=0,n=f){return new m(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(m.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function g(e,t=0){return function(n){return n.lift(new y(e,t))}}class y{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new m(t,this.delay,this.scheduler).subscribe(e)}}},6599:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(6673);function i(){}var s=n(5024);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new u(e,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i,this._tapError=t.error||i,this._tapComplete=t.complete||i)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},2570:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var r=n(8318),i=n(7570);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var r=n(7570);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},1098:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},8569:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var r=n(8277);const i=new(n(1098).v)(r.o)},8489:(e,t,n)=>{"use strict";n.d(t,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}var s=n(1098);class o extends s.v{}const a=new o(i),u=a},5686:(e,t,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,{hZ:()=>i});const i=r()},6197:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4294:(e,t,n)=>{"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:()=>r})},3392:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},8470:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});const r=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))()},9653:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},5024:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},2056:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:()=>r})},5168:(e,t,n)=>{"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>r})},6163:(e,t,n)=>{"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:()=>r})},6015:(e,t,n)=>{"use strict";n.d(t,{s:()=>l});var r=n(625),i=n(4294),s=n(5686),o=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=e=>{if(e&&"function"==typeof e[o.L])return l=e,e=>{const t=l[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,r.V)(e);if((0,u.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,i.z),e);if(e&&"function"==typeof e[s.hZ])return t=e,e=>{const n=t[s.hZ]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,c.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,l}},625:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},5005:(e,t,n)=>{"use strict";var r=n(7368);let i=null;const s=new r.OlP("DocumentToken");class o extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new o,i||(i=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(u=u||document.querySelector("base"),u?u.getAttribute("href"):null);return null==t?null:function(e){a=a||document.createElement("a"),a.setAttribute("href",e);const t=a.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){u=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,e)}}let a,u=null;class c{static init(){(0,r.VLi)(new c)}addToWindow(e){r.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(e=>{const t=r.dqk.getAllAngularTestabilities();let n=t.length,i=!1;const s=function(t){i=i||t,n--,0==n&&e(i)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?i.isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}const l=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){o.makeCurrent(),c.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]);"undefined"!=typeof window&&window;var h=n(6304),d=n(5959),f=n(878),p=n(8318),m=n(9764),g=n(1906),y=n(9098),v=n(9996),_=n(6882);function w(e,t){return"function"==typeof t?n=>n.pipe(w((n,r)=>(0,m.D)(e(n,r)).pipe((0,v.U)((e,i)=>t(n,e,r,i))))):t=>t.lift(new b(e))}class b{constructor(e){this.project=e}call(e,t){return t.subscribe(new I(e,this.project))}}class I extends _.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new _.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,_.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}var T=n(8489),E=n(7570),S=n(3895),k=n(9291);class A extends d.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new C(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new S.N;if(this.isStopped||this.hasError?s=E.w.EMPTY:(this.observers.push(e),s=new k.W(this,e)),r&&e.add(e=new y.ht(e,r)),t)for(let o=0;o<i&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||T.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class C{constructor(e,t){this.time=e,this.value=t}}function N(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new A(e,t,r),l=i.subscribe(this),s=c.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}const x=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();var D=n(6673);function R(e,t){return function(n){return n.lift(new O(e,t))}}class O{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new P(e,this.predicate,this.thisArg))}}class P extends D.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}const L=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();var M=n(653);function F(e){return t=>0===e?(0,M.c)():t.lift(new V(e))}class V{constructor(e){if(this.total=e,this.total<0)throw new L}call(e,t){return t.subscribe(new U(e,this.total))}}class U extends D.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function j(e=null){return t=>t.lift(new q(e))}class q{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new B(e,this.defaultValue))}}class B extends D.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function z(e=$){return t=>t.lift(new H(e))}class H{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Z(e,this.errorFactory))}}class Z extends D.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function $(){return new x}var G=n(3392);function K(e,t){return t?w(()=>e,t):w(()=>e)}var W=n(4187),Q=n(5271),Y=n(9748);n(9001);const J=new r.OlP("angularfire2.auth.use-emulator"),X=new r.OlP("angularfire2.auth.settings"),ee=new r.OlP("angularfire2.auth.tenant-id"),te=new r.OlP("angularfire2.auth.langugage-code"),ne=new r.OlP("angularfire2.auth.use-device-language"),re=new r.OlP("angularfire.auth.persistence");(0,Y.GT)((()=>{class e{constructor(e,t,r,i,s,o,a,u,c,l,h){const _=new d.xQ,b=(0,f.of)(void 0).pipe((0,y.QV)(s.outsideAngular),w(()=>i.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,1119)))),(0,v.U)(()=>(0,Y.on)(e,i,t)),(0,v.U)(e=>((e,t,n,r,i,s,o,a)=>(0,Q.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const u=t.runOutsideAngular(()=>e.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))u.settings[e]=t;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]))(e,i,o,u,c,l,a,h)),N({bufferSize:1,refCount:!1}));if(function(e){return"server"===e}(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,f.of)(null);else{b.pipe(function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?R((t,n)=>e(t,n,r)):G.y,F(1),n?j(t):z(()=>new x))}()).subscribe();const e=b.pipe(w(e=>e.getRedirectResult().then(e=>e,()=>null)),Q.iC,N({bufferSize:1,refCount:!1})),t=b.pipe(w(e=>new p.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=b.pipe(w(e=>new p.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(K(t),(0,W.R)(s.outsideAngular),(0,y.QV)(s.insideAngular)),this.user=e.pipe(K(n),(0,W.R)(s.outsideAngular),(0,y.QV)(s.insideAngular)),this.idToken=this.user.pipe(w(e=>e?(0,m.D)(e.getIdToken()):(0,f.of)(null))),this.idTokenResult=this.user.pipe(w(e=>e?(0,m.D)(e.getIdTokenResult()):(0,f.of)(null))),this.credential=(0,g.T)(e,_,this.authState.pipe(R(e=>!e))).pipe((0,v.U)(e=>(null==e?void 0:e.user)?e:null),(0,W.R)(s.outsideAngular),(0,y.QV)(s.insideAngular))}return(0,Y.pX)(this,b,i,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>_.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Y.Dh),r.LFG(Y.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(Q.HU),r.LFG(J,8),r.LFG(X,8),r.LFG(ee,8),r.LFG(te,8),r.LFG(ne,8),r.LFG(re,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),[{name:null,config:null,emulatorConfig:null,app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]),n(8569),n(7471),n(6163),n(1119);var ie=n(1932),se=n(7092),oe=n(5119),ae=n(308),ue=n(250),ce=function(e,t){return(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function le(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var he,de="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fe=fe||{},pe=de||self;function me(){}function ge(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ye(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ve="closure_uid_"+(1e9*Math.random()>>>0),_e=0;function we(e,t,n){return e.call.apply(e.bind,arguments)}function be(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ie(e,t,n){return(Ie=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?we:be).apply(null,arguments)}function Te(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ee(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Se(){this.s=this.s,this.o=this.o}var ke={};Se.prototype.s=!1,Se.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ve)&&e[ve]||(e[ve]=++_e)}(this);delete ke[e]}},Se.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ae=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Ce=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function Ne(e){return Array.prototype.concat.apply([],arguments)}function xe(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function De(e){return/^[\s\xa0]*$/.test(e)}var Re,Oe=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Pe(e,t){return-1!=e.indexOf(t)}function Le(e,t){return e<t?-1:e>t?1:0}e:{var Me=pe.navigator;if(Me){var Fe=Me.userAgent;if(Fe){Re=Fe;break e}}Re=""}function Ve(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ue(e){var t={};for(var n in e)t[n]=e[n];return t}var je="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function qe(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var s=0;s<je.length;s++)n=je[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Be(e){return Be[" "](e),e}Be[" "]=me;var ze,He,Ze=Pe(Re,"Opera"),$e=Pe(Re,"Trident")||Pe(Re,"MSIE"),Ge=Pe(Re,"Edge"),Ke=Ge||$e,We=Pe(Re,"Gecko")&&!(Pe(Re.toLowerCase(),"webkit")&&!Pe(Re,"Edge"))&&!(Pe(Re,"Trident")||Pe(Re,"MSIE"))&&!Pe(Re,"Edge"),Qe=Pe(Re.toLowerCase(),"webkit")&&!Pe(Re,"Edge");function Ye(){var e=pe.document;return e?e.documentMode:void 0}e:{var Je="",Xe=(He=Re,We?/rv:([^\);]+)(\)|;)/.exec(He):Ge?/Edge\/([\d\.]+)/.exec(He):$e?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(He):Qe?/WebKit\/(\S+)/.exec(He):Ze?/(?:Version)[ \/]?(\S+)/.exec(He):void 0);if(Xe&&(Je=Xe?Xe[1]:""),$e){var et=Ye();if(null!=et&&et>parseFloat(Je)){ze=String(et);break e}}ze=Je}var tt={};var nt=pe.document&&$e&&(Ye()||parseInt(ze,10))||void 0,rt=function(){if(!pe.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{pe.addEventListener("test",me,t),pe.removeEventListener("test",me,t)}catch(n){}return e}();function it(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function st(e,t){if(it.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(We){e:{try{Be(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:ot[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&st.Z.h.call(this)}}it.prototype.h=function(){this.defaultPrevented=!0},Ee(st,it);var ot={2:"touch",3:"pen",4:"mouse"};st.prototype.h=function(){st.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),ut=0;function ct(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ut,this.ca=this.fa=!1}function lt(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ht(e){this.src=e,this.g={},this.h=0}function dt(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Ae(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(lt(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ft(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}ht.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ft(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ct(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var pt="closure_lm_"+(1e6*Math.random()|0),mt={};function gt(e,t,n,r,i){if(r&&r.once)return vt(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)gt(e,t[s],n,r,i);return null}return n=St(n),e&&e[at]?e.N(t,n,ye(r)?!!r.capture:!!r,i):yt(e,t,n,!1,r,i)}function yt(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ye(i)?!!i.capture:!!i,a=Tt(e);if(a||(e[pt]=a=new ht(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=It;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)rt||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(bt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function vt(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)vt(e,t[s],n,r,i);return null}return n=St(n),e&&e[at]?e.O(t,n,ye(r)?!!r.capture:!!r,i):yt(e,t,n,!0,r,i)}function _t(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)_t(e,t[s],n,r,i);else r=ye(r)?!!r.capture:!!r,n=St(n),e&&e[at]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=ft(s=e.g[t],n,r,i))&&(lt(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=Tt(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ft(t,n,r,i)),(n=-1<e?t[e]:null)&&wt(n))}function wt(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[at])dt(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Tt(t))?(dt(n,e),0==n.h&&(n.src=null,t[pt]=null)):lt(e)}}}function bt(e){return e in mt?mt[e]:mt[e]="on"+e}function It(e,t){if(e.ca)e=!0;else{t=new st(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&wt(e),e=n.call(r,t)}return e}function Tt(e){return(e=e[pt])instanceof ht?e:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(e){return"function"==typeof e?e:(e[Et]||(e[Et]=function(t){return e.handleEvent(t)}),e[Et])}function kt(){Se.call(this),this.i=new ht(this),this.P=this,this.I=null}function At(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new it(t,e);else if(t instanceof it)t.target=t.target||e;else{var i=t;qe(t=new it(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Ct(o,r,!0,t)&&i}if(i=Ct(o=t.g=e,r,!0,t)&&i,i=Ct(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Ct(o=t.g=n[s],r,!1,t)&&i}function Ct(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&dt(e.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ee(kt,Se),kt.prototype[at]=!0,kt.prototype.removeEventListener=function(e,t,n,r){_t(this,e,t,n,r)},kt.prototype.M=function(){if(kt.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)lt(n[r]);delete t.g[e],t.h--}}this.I=null},kt.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},kt.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Nt=pe.JSON.stringify;function xt(){var e=Vt,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Dt,Rt=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Ot.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Ot=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,this.g=(e=this.g).next,e.next=null):e=this.i(),e},e}())(function(){return new Pt},function(e){return e.reset()}),Pt=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Lt(e){pe.setTimeout(function(){throw e},0)}function Mt(e,t){Dt||function(){var e=pe.Promise.resolve(void 0);Dt=function(){e.then(Ut)}}(),Ft||(Dt(),Ft=!0),Vt.add(e,t)}var Ft=!1,Vt=new Rt;function Ut(){for(var e;e=xt();){try{e.h.call(e.g)}catch(n){Lt(n)}var t=Ot;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ft=!1}function jt(e,t){kt.call(this),this.h=e||1,this.g=t||pe,this.j=Ie(this.kb,this),this.l=Date.now()}function qt(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Bt(e,t,n){if("function"==typeof e)n&&(e=Ie(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ie(e.handleEvent,e)}return 2147483647<Number(t)?-1:pe.setTimeout(e,t||0)}function zt(e){e.g=Bt(function(){e.g=null,e.i&&(e.i=!1,zt(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ee(jt,kt),(he=jt.prototype).da=!1,he.S=null,he.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),At(this,"tick"),this.da&&(qt(this),this.start()))}},he.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},he.M=function(){jt.Z.M.call(this),qt(this),delete this.g};var Ht=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ce(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:zt(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Se);function Zt(e){Se.call(this),this.h=e,this.g={}}Ee(Zt,Se);var $t=[];function Gt(e,t,n,r){Array.isArray(n)||(n&&($t[0]=n.toString()),n=$t);for(var i=0;i<n.length;i++){var s=gt(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Kt(e){Ve(e.g,function(e,t){this.g.hasOwnProperty(t)&&wt(e)},e),e.g={}}function Wt(){this.g=!0}function Qt(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Nt(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Zt.prototype.M=function(){Zt.Z.M.call(this),Kt(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wt.prototype.Aa=function(){this.g=!1},Wt.prototype.info=function(){};var Yt={},Jt=null;function Xt(){return Jt=Jt||new kt}function en(e){it.call(this,Yt.Ma,e)}function tn(e){var t=Xt();At(t,new en(t,e))}function nn(e,t){it.call(this,Yt.STAT_EVENT,e),this.stat=t}function rn(e){var t=Xt();At(t,new nn(t,e))}function sn(e,t){it.call(this,Yt.Na,e),this.size=t}function on(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return pe.setTimeout(function(){e()},t)}Yt.Ma="serverreachability",Ee(en,it),Yt.STAT_EVENT="statevent",Ee(nn,it),Yt.Na="timingevent",Ee(sn,it);var an={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},un={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function cn(){}function ln(){}cn.prototype.h=null;var hn,dn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function fn(){it.call(this,"d")}function pn(){it.call(this,"c")}function mn(){}function gn(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Zt(this),this.P=vn,this.W=new jt(e=Ke?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new yn}function yn(){this.i=null,this.g="",this.h=!1}Ee(fn,it),Ee(pn,it),Ee(mn,cn),mn.prototype.g=function(){return new XMLHttpRequest},mn.prototype.i=function(){return{}},hn=new mn;var vn=45e3,_n={},wn={};function bn(e,t,n){e.K=1,e.v=Hn(Vn(t)),e.s=n,e.U=!0,In(e,null)}function In(e,t){e.F=Date.now(),kn(e),e.A=Vn(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),rr(n.h,"t",r),e.C=0,n=e.l.H,e.h=new yn,e.g=ii(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ht(Ie(e.Ia,e,e.g),e.O)),Gt(e.V,e.g,"readystatechange",e.gb),t=e.H?Ue(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),tn(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function Tn(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function En(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Sn(e,n))==wn){4==t&&(e.o=4,rn(14),i=!1),Qt(e.j,e.m,null,"[Incomplete Response]");break}if(r==_n){e.o=4,rn(15),Qt(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Qt(e.j,e.m,r,null),Dn(e,r)}Tn(e)&&r!=wn&&r!=_n&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,rn(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qr(t),t.L=!0,rn(11))):(Qt(e.j,e.m,n,"[Invalid Chunked Response]"),xn(e),Nn(e))}function Sn(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?wn:(n=Number(t.substring(n,r)),isNaN(n)?_n:(r+=1)+n>t.length?wn:(t=t.substr(r,n),e.C=r+n,t))}function kn(e){e.Y=Date.now()+e.P,An(e,e.P)}function An(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=on(Ie(e.eb,e),t)}function Cn(e){e.B&&(pe.clearTimeout(e.B),e.B=null)}function Nn(e){0==e.l.G||e.I||Xr(e.l,e)}function xn(e){Cn(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,qt(e.W),Kt(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Dn(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||lr(n.i,e)))if(n.I=e.N,!e.J&&lr(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(s){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Jr(n),qr(n)}Wr(n),rn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=on(Ie(n.ab,n),6e3));if(1>=cr(n.i)&&n.ka){try{n.ka()}catch(s){}n.ka=void 0}}else ti(n,11)}else if((e.J||n.g==e)&&Jr(n),!De(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var s=i[t];if(n.U=s[0],s=s[1],2==n.G)if("c"==s[0]){n.J=s[1],n.la=s[2];var o=s[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var a=s[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=s[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Pe(l,"spdy")||Pe(l,"quic")||Pe(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(hr(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,zn(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var f=e;if((r=n).oa=ri(r,r.H?r.la:null,r.W),f.J){dr(r.i,f);var p=f,m=r.K;m&&p.setTimeout(m),p.B&&(Cn(p),kn(p)),r.g=f}else Kr(r);0<n.l.length&&Hr(n)}else"stop"!=s[0]&&"close"!=s[0]||ti(n,7);else 3==n.G&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?ti(n,7):jr(n):"noop"!=s[0]&&n.j&&n.j.wa(s),n.A=0)}tn(4)}catch(s){}}function Rn(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ge(e)||"string"==typeof e)Ce(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(ge(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(ge(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function On(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof On)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Pn(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ln(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ln(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ln(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(he=gn.prototype).setTimeout=function(e){this.P=e},he.gb=function(e){e=e.target;var t=this.L;t&&3==Lr(e)?t.l():this.Ia(e)},he.Ia=function(e){try{if(e==this.g)e:{var t=Lr(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ke||this.g&&(this.h.h||this.g.ga()||Mr(this.g)))){this.I||4!=t||7==n||tn(8==n||0>=r?3:2),Cn(this);var i=this.g.ba();this.N=i;t:if(Tn(this)){var s=Mr(this.g);e="";var o=s.length,a=4==Lr(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){xn(this),Nn(this);var u="";break t}this.h.i=new pe.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(s[n],{stream:a&&n==o-1});s.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!De(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,rn(12),xn(this),Nn(this);break e}Qt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Dn(this,i)}this.U?(En(this,t,u),Ke&&this.i&&3==t&&(Gt(this.V,this.W,"tick",this.fb),this.W.start())):(Qt(this.j,this.m,u,null),Dn(this,u)),4==t&&xn(this),this.i&&!this.I&&(4==t?Xr(this.l,this):(this.i=!1,kn(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,rn(12)):(this.o=0,rn(13)),xn(this),Nn(this)}}}catch(t){}},he.fb=function(){if(this.g){var e=Lr(this.g),t=this.g.ga();this.C<t.length&&(Cn(this),En(this,e,t),this.i&&4!=e&&kn(this))}},he.cancel=function(){this.I=!0,xn(this)},he.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(tn(3),rn(17)),xn(this),this.o=2,Nn(this)):An(this,this.Y-e)},(he=On.prototype).R=function(){Pn(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},he.T=function(){return Pn(this),this.g.concat()},he.get=function(e,t){return Ln(this.h,e)?this.h[e]:t},he.set=function(e,t){Ln(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},he.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fn(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Fn){this.g=void 0!==t?t:e.g,Un(this,e.j),this.s=e.s,jn(this,e.i),qn(this,e.m),this.l=e.l,t=e.h;var n=new Xn;n.i=t.i,t.g&&(n.g=new On(t.g),n.h=t.h),Bn(this,n),this.o=e.o}else e&&(n=String(e).match(Mn))?(this.g=!!t,Un(this,n[1]||"",!0),this.s=Zn(n[2]||""),jn(this,n[3]||"",!0),qn(this,n[4]),this.l=Zn(n[5]||"",!0),Bn(this,n[6]||"",!0),this.o=Zn(n[7]||"")):(this.g=!!t,this.h=new Xn(null,this.g))}function Vn(e){return new Fn(e)}function Un(e,t,n){e.j=n?Zn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function jn(e,t,n){e.i=n?Zn(t,!0):t}function qn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Bn(e,t,n){t instanceof Xn?(e.h=t,function(e,t){t&&!e.j&&(er(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(tr(this,t),rr(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=$n(t,Yn)),e.h=new Xn(t,e.g))}function zn(e,t,n){e.h.set(t,n)}function Hn(e){return zn(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Zn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function $n(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Gn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Fn.prototype.toString=function(){var e=[],t=this.j;t&&e.push($n(t,Kn,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push($n(t,Kn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push($n(n,"/"==n.charAt(0)?Qn:Wn,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",$n(n,Jn)),e.join("")};var Kn=/[#\/\?@]/g,Wn=/[#\?:]/g,Qn=/[#\?]/g,Yn=/[#\?@]/g,Jn=/#/g;function Xn(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function er(e){e.g||(e.g=new On,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function tr(e,t){er(e),t=ir(e,t),Ln(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ln((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Pn(e)))}function nr(e,t){return er(e),t=ir(e,t),Ln(e.g.h,t)}function rr(e,t,n){tr(e,t),0<n.length&&(e.i=null,e.g.set(ir(e,t),xe(n)),e.h+=n.length)}function ir(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(he=Xn.prototype).add=function(e,t){er(this),this.i=null,e=ir(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},he.forEach=function(e,t){er(this),this.g.forEach(function(n,r){Ce(n,function(n){e.call(t,n,r,this)},this)},this)},he.T=function(){er(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},he.R=function(e){er(this);var t=[];if("string"==typeof e)nr(this,e)&&(t=Ne(t,this.g.get(ir(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Ne(t,e[n])}return t},he.set=function(e,t){return er(this),this.i=null,nr(this,e=ir(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},he.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},he.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var sr=function(){return function(e,t){this.h=e,this.g=t}}();function or(e){this.l=e||ar,e=pe.PerformanceNavigationTiming?0<(e=pe.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(pe.g&&pe.g.Ea&&pe.g.Ea()&&pe.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ar=10;function ur(e){return!!e.h||!!e.g&&e.g.size>=e.j}function cr(e){return e.h?1:e.g?e.g.size:0}function lr(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function hr(e,t){e.g?e.g.add(t):e.h=t}function dr(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function fr(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=le(e.g.values()),s=i.next();!s.done;s=i.next())r=r.concat(s.value.D)}catch(o){t={error:o}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return xe(e.i)}function pr(){}function mr(){this.g=new pr}function gr(e,t,n){var r=n||"";try{Rn(e,function(e,n){var i=e;ye(e)&&(i=Nt(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function yr(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function vr(e){this.l=e.$b||null,this.j=e.ib||!1}function _r(e,t){kt.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=wr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}or.prototype.cancel=function(){var e,t;if(this.i=fr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=le(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){e={error:i}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},pr.prototype.stringify=function(e){return pe.JSON.stringify(e,void 0)},pr.prototype.parse=function(e){return pe.JSON.parse(e,void 0)},Ee(vr,cn),vr.prototype.g=function(){return new _r(this.l,this.j)},vr.prototype.i=function(e){return function(){return e}}({}),Ee(_r,kt);var wr=0;function br(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ir(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Tr(e)}function Tr(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(he=_r.prototype).open=function(e,t){if(this.readyState!=wr)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Tr(this)},he.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||pe).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},he.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ir(this)),this.readyState=wr},he.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==pe.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;br(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},he.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ir(this):Tr(this),3==this.readyState&&br(this)}},he.Ua=function(e){this.g&&(this.response=this.responseText=e,Ir(this))},he.Ta=function(e){this.g&&(this.response=e,Ir(this))},he.ha=function(){this.g&&Ir(this)},he.setRequestHeader=function(e,t){this.v.append(e,t)},he.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},he.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_r.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Er=pe.JSON.parse;function Sr(e){kt.call(this),this.headers=new On,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kr,this.K=this.L=!1}Ee(Sr,kt);var kr="",Ar=/^https?$/i,Cr=["POST","PUT"];function Nr(e){return"content-type"==e.toLowerCase()}function xr(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Dr(e),Or(e)}function Dr(e){e.D||(e.D=!0,At(e,"complete"),At(e,"error"))}function Rr(e){if(e.h&&void 0!==fe&&(!e.C[1]||4!=Lr(e)||2!=e.ba()))if(e.v&&4==Lr(e))Bt(e.Fa,0,e);else if(At(e,"readystatechange"),4==Lr(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.H).match(Mn)[1]||null;if(!s&&pe.self&&pe.self.location){var o=pe.self.location.protocol;s=o.substr(0,o.length-1)}i=!Ar.test(s?s.toLowerCase():"")}t=i}if(t)At(e,"complete"),At(e,"success");else{e.m=6;try{var a=2<Lr(e)?e.g.statusText:""}catch(u){a=""}e.j=a+" ["+e.ba()+"]",Dr(e)}}finally{Or(e)}}}function Or(e,t){if(e.g){Pr(e);var n=e.g,r=e.C[0]?me:null;e.g=null,e.C=null,t||At(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Pr(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(pe.clearTimeout(e.A),e.A=null)}function Lr(e){return e.g?e.g.readyState:0}function Mr(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case kr:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Fr(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Ve(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):zn(e,t,n))}function Vr(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ur(e){this.za=0,this.l=[],this.h=new Wt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vr("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vr("baseRetryDelayMs",5e3,e),this.$a=Vr("retryDelaySeedMs",1e4,e),this.Ya=Vr("forwardChannelMaxRetries",2,e),this.ra=Vr("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new or(e&&e.concurrentRequestLimit),this.Ca=new mr,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function jr(e){if(Br(e),3==e.G){var t=e.V++,n=Vn(e.F);zn(n,"SID",e.J),zn(n,"RID",t),zn(n,"TYPE","terminate"),$r(e,n),(t=new gn(e,e.h,t,void 0)).K=2,t.v=Hn(Vn(n)),n=!1,pe.navigator&&pe.navigator.sendBeacon&&(n=pe.navigator.sendBeacon(t.v.toString(),"")),!n&&pe.Image&&((new Image).src=t.v,n=!0),n||(t.g=ii(t.l,null),t.g.ea(t.v)),t.F=Date.now(),kn(t)}ni(e)}function qr(e){e.g&&(Qr(e),e.g.cancel(),e.g=null)}function Br(e){qr(e),e.u&&(pe.clearTimeout(e.u),e.u=null),Jr(e),e.i.cancel(),e.m&&("number"==typeof e.m&&pe.clearTimeout(e.m),e.m=null)}function zr(e,t){e.l.push(new sr(e.Za++,t)),3==e.G&&Hr(e)}function Hr(e){ur(e.i)||e.m||(e.m=!0,Mt(e.Ha,e),e.C=0)}function Zr(e,t){var n;n=t?t.m:e.V++;var r=Vn(e.F);zn(r,"SID",e.J),zn(r,"RID",n),zn(r,"AID",e.U),$r(e,r),e.o&&e.s&&Fr(r,e.o,e.s),n=new gn(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Gr(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),hr(e.i,n),bn(n,r,t)}function $r(e,t){e.j&&Rn({},function(e,n){zn(t,n,e)})}function Gr(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Ie(e.j.Oa,e.j,e):null;e:for(var i=e.l,s=-1;;){var o=["count="+n];-1==s?0<n?o.push("ofs="+(s=i[0].h)):s=0:o.push("ofs="+s);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=s))s=Math.max(0,i[u].h-100),a=!1;else try{gr(l,o,"req"+c+"_")}catch(Oi){r&&r(l)}}if(a){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Kr(e){e.g||e.u||(e.Y=1,Mt(e.Ga,e),e.A=0)}function Wr(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=on(Ie(e.Ga,e),ei(e,e.A)),e.A++,0))}function Qr(e){null!=e.B&&(pe.clearTimeout(e.B),e.B=null)}function Yr(e){e.g=new gn(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Vn(e.oa);zn(t,"RID","rpc"),zn(t,"SID",e.J),zn(t,"CI",e.N?"0":"1"),zn(t,"AID",e.U),$r(e,t),zn(t,"TYPE","xmlhttp"),e.o&&e.s&&Fr(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Hn(Vn(t)),n.s=null,n.U=!0,In(n,e)}function Jr(e){null!=e.v&&(pe.clearTimeout(e.v),e.v=null)}function Xr(e,t){var n=null;if(e.g==t){Jr(e),Qr(e),e.g=null;var r=2}else{if(!lr(e.i,t))return;n=t.D,dr(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;At(r=Xt(),new sn(r,n,t,i)),Hr(e)}else Kr(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(cr(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=on(Ie(e.Ha,e,t),ei(e,e.C)),e.C++,0)))}(e,t)||2==r&&Wr(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ti(e,5);break;case 4:ti(e,10);break;case 3:ti(e,6);break;default:ti(e,2)}}function ei(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ti(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Ie(e.jb,e);n||(n=new Fn("//www.google.com/images/cleardot.gif"),pe.location&&"http"==pe.location.protocol||Un(n,"https"),Hn(n)),function(e,t){var n=new Wt;if(pe.Image){var r=new Image;r.onload=Te(yr,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Te(yr,n,r,"TestLoadImage: error",!1,t),r.onabort=Te(yr,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Te(yr,n,r,"TestLoadImage: timeout",!1,t),pe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else rn(2);e.G=0,e.j&&e.j.va(t),ni(e),Br(e)}function ni(e){e.G=0,e.I=-1,e.j&&(0==fr(e.i).length&&0==e.l.length||(e.i.i.length=0,xe(e.l),e.l.length=0),e.j.ua())}function ri(e,t,n){var r=function(e){return e instanceof Fn?Vn(e):new Fn(e,void 0)}(n);if(""!=r.i)t&&jn(r,t+"."+r.i),qn(r,r.m);else{var i=pe.location;r=function(e,t,n,r){var i=new Fn(null,void 0);return e&&Un(i,e),t&&jn(i,t),n&&qn(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Ve(e.aa,function(e,t){zn(r,t,e)}),n=e.sa,(t=e.D)&&n&&zn(r,t,n),zn(r,"VER",e.ma),$r(e,r),r}function ii(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Sr(n&&e.Ba&&!e.qa?new vr({ib:!0}):e.qa)).L=e.H,t}function si(){}function oi(){if($e&&!(10<=Number(nt)))throw Error("Environmental error: no available transport.")}function ai(e,t){kt.call(this),this.g=new Ur(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!De(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!De(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new li(this)}function ui(e){fn.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ci(){pn.call(this),this.status=1}function li(e){this.g=e}(he=Sr.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hn.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:hn),this.g.onreadystatechange=Ie(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void xr(this,s)}e=n||"";var i=new On(this.headers);r&&Rn(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=Nr,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=pe.FormData&&e instanceof pe.FormData,!(0<=Ae(Cr,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Pr(this),0<this.B&&((this.K=function(e){return $e&&function(){return e=tt,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=Oe(String(ze)).split("."),n=Oe("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var s=t[i]||"",o=n[i]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==s[0].length&&0==o[0].length)break;e=Le(0==s[1].length?0:parseInt(s[1],10),0==o[1].length?0:parseInt(o[1],10))||Le(0==s[2].length,0==o[2].length)||Le(s[2],o[2]),s=s[3],o=o[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ie(this.pa,this)):this.A=Bt(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){xr(this,s)}},he.pa=function(){void 0!==fe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,At(this,"timeout"),this.abort(8))},he.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,At(this,"complete"),At(this,"abort"),Or(this))},he.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Or(this,!0)),Sr.Z.M.call(this)},he.Fa=function(){this.s||(this.F||this.v||this.l?Rr(this):this.cb())},he.cb=function(){Rr(this)},he.ba=function(){try{return 2<Lr(this)?this.g.status:-1}catch(He){return-1}},he.ga=function(){try{return this.g?this.g.responseText:""}catch(He){return""}},he.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Er(t)}},he.Da=function(){return this.m},he.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(he=Ur.prototype).ma=8,he.G=1,he.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},he.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new gn(this,this.h,e,void 0),n=this.s;if(this.P&&(n?qe(n=Ue(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var s=this.l[i];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(r+=s)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Gr(this,t,r),zn(i=Vn(this.F),"RID",e),zn(i,"CVER",22),this.D&&zn(i,"X-HTTP-Session-Id",this.D),$r(this,i),this.o&&n&&Fr(i,this.o,n),hr(this.i,t),this.Ra&&zn(i,"TYPE","init"),this.ja?(zn(i,"$req",r),zn(i,"SID","null"),t.$=!0,bn(t,i,null)):bn(t,i,r),this.G=2}}else 3==this.G&&(e?Zr(this,e):0==this.l.length||ur(this.i)||Zr(this))},he.Ga=function(){if(this.u=null,Yr(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=on(Ie(this.bb,this),e)}},he.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rn(10),qr(this),Yr(this))},he.ab=function(){null!=this.v&&(this.v=null,qr(this),Wr(this),rn(19))},he.jb=function(e){e?(this.h.info("Successfully pinged google.com"),rn(2)):(this.h.info("Failed to ping google.com"),rn(1))},(he=si.prototype).xa=function(){},he.wa=function(){},he.va=function(){},he.ua=function(){},he.Oa=function(){},oi.prototype.g=function(e,t){return new ai(e,t)},Ee(ai,kt),ai.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Mt(Ie(e.hb,e,t))),rn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=ri(e,null,e.W),Hr(e)},ai.prototype.close=function(){jr(this.g)},ai.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,zr(this.g,t)}else this.v?((t={}).__data__=Nt(e),zr(this.g,t)):zr(this.g,e)},ai.prototype.M=function(){this.g.j=null,delete this.j,jr(this.g),delete this.g,ai.Z.M.call(this)},Ee(ui,fn),Ee(ci,pn),Ee(li,si),li.prototype.xa=function(){At(this.g,"a")},li.prototype.wa=function(e){At(this.g,new ui(e))},li.prototype.va=function(e){At(this.g,new ci(e))},li.prototype.ua=function(){At(this.g,"b")},oi.prototype.createWebChannel=oi.prototype.g,ai.prototype.send=ai.prototype.u,ai.prototype.open=ai.prototype.m,ai.prototype.close=ai.prototype.close,an.NO_ERROR=0,an.TIMEOUT=8,an.HTTP_ERROR=6,un.COMPLETE="complete",ln.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",kt.prototype.listen=kt.prototype.N,Sr.prototype.listenOnce=Sr.prototype.O,Sr.prototype.getLastError=Sr.prototype.La,Sr.prototype.getLastErrorCode=Sr.prototype.Da,Sr.prototype.getStatus=Sr.prototype.ba,Sr.prototype.getResponseJson=Sr.prototype.Qa,Sr.prototype.getResponseText=Sr.prototype.ga,Sr.prototype.send=Sr.prototype.ea;var hi=an,di=un,fi=Yt,pi=vr,mi=ln,gi=Sr;class yi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let vi="9.0.1";const _i=new ae.Yd("@firebase/firestore");function wi(){return _i.logLevel}function bi(e,...t){if(_i.logLevel<=ae.in.DEBUG){const n=t.map(Ei);_i.debug(`Firestore (${vi}): ${e}`,...n)}}function Ii(e,...t){if(_i.logLevel<=ae.in.ERROR){const n=t.map(Ei);_i.error(`Firestore (${vi}): ${e}`,...n)}}function Ti(e,...t){if(_i.logLevel<=ae.in.WARN){const n=t.map(Ei);_i.warn(`Firestore (${vi}): ${e}`,...n)}}function Ei(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Si(e="Unexpected state"){const t=`FIRESTORE (${vi}) INTERNAL ASSERTION FAILED: `+e;throw Ii(t),new Error(t)}function ki(e,t){e||Si()}function Ai(e,t){return e}const Ci={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ni extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Di{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Ri{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yi.UNAUTHENTICATED))}shutdown(){}}class Oi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Pi{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new xi,e.enqueueRetryable(()=>i(this.currentUser))};const o=t=>{e.enqueueRetryable((0,h.Z)(function*(){bi("FirebaseCredentialsProvider","Auth detected"),n.auth=t,n.auth.addAuthTokenListener(n.o),yield s.promise,yield i(n.currentUser)}))};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(bi("FirebaseCredentialsProvider","Auth not yet detected"),s.resolve(),s=new xi)}},0),e.enqueueRetryable((0,h.Z)(function*(){0===n.i&&(yield s.promise,yield i(n.currentUser))}))}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(bi("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ki("string"==typeof t.accessToken),new Di(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ki(null===e||"string"==typeof e),new yi(e)}}class Li{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=yi.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class Mi{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Li(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(yi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Vi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Fi.T=-1;class Ui{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Vi(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function ji(e,t){return e<t?-1:e>t?1:0}function qi(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Bi(e){return e+"\0"}class zi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ni(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ni(Ci.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ni(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ni(Ci.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zi.fromMillis(Date.now())}static fromDate(e){return zi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new zi(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ji(this.nanoseconds,e.nanoseconds):ji(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Hi{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Hi(e)}static min(){return new Hi(new zi(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Zi(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $i(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Gi(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ki{constructor(e,t,n){void 0===t?t=0:t>e.length&&Si(),void 0===n?n=e.length-t:n>e.length-t&&Si(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Ki.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wi extends Ki{construct(e,t,n){return new Wi(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Wi(t)}static emptyPath(){return new Wi([])}}const Qi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yi extends Ki{construct(e,t,n){return new Yi(e,t,n)}static isValidIdentifier(e){return Qi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yi(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ni(Ci.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ni(Ci.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ni(Ci.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yi(t)}static emptyPath(){return new Yi([])}}class Ji{constructor(e){this.fields=e,e.sort(Yi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qi(this.fields,e.fields,(e,t)=>e.isEqual(t))}}let Xi=(()=>{class e{constructor(e){this.binaryString=e}static fromBase64String(t){const n=atob(t);return new e(n)}static fromUint8Array(t){const n=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ji(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}return e.EMPTY_BYTE_STRING=new e(""),e})();const es=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(e){if(ki(!!e),"string"==typeof e){let t=0;const n=es.exec(e);if(ki(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ns(e.seconds),nanos:ns(e.nanos)}}function ns(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function rs(e){return"string"==typeof e?Xi.fromBase64String(e):Xi.fromUint8Array(e)}function is(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ss(e){const t=e.mapValue.fields.__previous_value__;return is(t)?ss(t):t}function os(e){const t=ts(e.mapValue.fields.__local_write_time__.timestampValue);return new zi(t.seconds,t.nanos)}function as(e){return null==e}function us(e){return 0===e&&1/e==-1/0}function cs(e){return"number"==typeof e&&Number.isInteger(e)&&!us(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class ls{constructor(e){this.path=e}static fromPath(e){return new ls(Wi.fromString(e))}static fromName(e){return new ls(Wi.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Wi.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wi.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ls(new Wi(e.slice()))}}function hs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?is(e)?4:10:Si()}function ds(e,t){const n=hs(e);if(n!==hs(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return os(e).isEqual(os(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ts(e.timestampValue),r=ts(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return rs(e.bytesValue).isEqual(rs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ns(e.geoPointValue.latitude)===ns(t.geoPointValue.latitude)&&ns(e.geoPointValue.longitude)===ns(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ns(e.integerValue)===ns(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ns(e.doubleValue),r=ns(t.doubleValue);return n===r?us(n)===us(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return qi(e.arrayValue.values||[],t.arrayValue.values||[],ds);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Zi(n)!==Zi(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ds(n[i],r[i])))return!1;return!0}(e,t);default:return Si()}}function fs(e,t){return void 0!==(e.values||[]).find(e=>ds(e,t))}function ps(e,t){const n=hs(e),r=hs(t);if(n!==r)return ji(n,r);switch(n){case 0:return 0;case 1:return ji(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ns(e.integerValue||e.doubleValue),r=ns(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ms(e.timestampValue,t.timestampValue);case 4:return ms(os(e),os(t));case 5:return ji(e.stringValue,t.stringValue);case 6:return function(e,t){const n=rs(e),r=rs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ji(n[i],r[i]);if(0!==e)return e}return ji(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ji(ns(e.latitude),ns(t.latitude));return 0!==n?n:ji(ns(e.longitude),ns(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ps(n[i],r[i]);if(e)return e}return ji(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ji(r[o],s[o]);if(0!==e)return e;const t=ps(n[r[o]],i[s[o]]);if(0!==t)return t}return ji(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Si()}}function ms(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ji(e,t);const n=ts(e),r=ts(t),i=ji(n.seconds,r.seconds);return 0!==i?i:ji(n.nanos,r.nanos)}function gs(e){return ys(e)}function ys(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ts(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?rs(e.bytesValue).toBase64():"referenceValue"in e?ls.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ys(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${ys(e.fields[i])}`;return n+"}"}(e.mapValue):Si();var t}function vs(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function _s(e){return!!e&&"integerValue"in e}function ws(e){return!!e&&"arrayValue"in e}function bs(e){return!!e&&"nullValue"in e}function Is(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ts(e){return!!e&&"mapValue"in e}function Es(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $i(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Es(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Es(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Ss{constructor(e){this.value=e}static empty(){return new Ss({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ts(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Es(t)}setAll(e){let t=Yi.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Es(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ts(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ds(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ts(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){$i(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ss(Es(this.value))}}function ks(e){const t=[];return $i(e.fields,(e,n)=>{const r=new Yi([e]);if(Ts(n)){const e=ks(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Ji(t)}class As{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new As(e,0,Hi.min(),Ss.empty(),0)}static newFoundDocument(e,t,n){return new As(e,1,t,n,0)}static newNoDocument(e,t){return new As(e,2,t,Ss.empty(),0)}static newUnknownDocument(e,t){return new As(e,3,t,Ss.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof As&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new As(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cs{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function Ns(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Cs(e,t,n,r,i,s,o)}function xs(e){const t=Ai(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+gs(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),as(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=zs(t.startAt)),t.endAt&&(e+="|ub:",e+=zs(t.endAt)),t.A=e}return t.A}function Ds(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!Zs(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!ds(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gs(e.startAt,t.startAt)&&Gs(e.endAt,t.endAt)}function Rs(e){return ls.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Os extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new Ps(e,t,n):"array-contains"===t?new Vs(e,n):"in"===t?new Us(e,n):"not-in"===t?new js(e,n):"array-contains-any"===t?new qs(e,n):new Os(e,t,n)}static R(e,t,n){return"in"===t?new Ls(e,n):new Ms(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(ps(t,this.value)):null!==t&&hs(this.value)===hs(t)&&this.P(ps(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Si()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ps extends Os{constructor(e,t,n){super(e,t,n),this.key=ls.fromName(n.referenceValue)}matches(e){const t=ls.comparator(e.key,this.key);return this.P(t)}}class Ls extends Os{constructor(e,t){super(e,"in",t),this.keys=Fs(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ms extends Os{constructor(e,t){super(e,"not-in",t),this.keys=Fs(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fs(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ls.fromName(e.referenceValue))}class Vs extends Os{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ws(t)&&fs(t.arrayValue,this.value)}}class Us extends Os{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fs(this.value.arrayValue,t)}}class js extends Os{constructor(e,t){super(e,"not-in",t)}matches(e){if(fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fs(this.value.arrayValue,t)}}class qs extends Os{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ws(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>fs(this.value.arrayValue,e))}}class Bs{constructor(e,t){this.position=e,this.before=t}}function zs(e){return`${e.before?"b":"a"}:${e.position.map(e=>gs(e)).join(",")}`}class Hs{constructor(e,t="asc"){this.field=e,this.dir=t}}function Zs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function $s(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ls.comparator(ls.fromName(o.referenceValue),n.key):ps(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Gs(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ds(e.position[n],t.position[n]))return!1;return!0}class Ks{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null}}function Ws(e,t,n,r,i,s,o,a){return new Ks(e,t,n,r,i,s,o,a)}function Qs(e){return new Ks(e)}function Ys(e){return!as(e.limit)&&"F"===e.limitType}function Js(e){return!as(e.limit)&&"L"===e.limitType}function Xs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function eo(e){for(const t of e.filters)if(t.v())return t.field;return null}function to(e){return null!==e.collectionGroup}function no(e){const t=Ai(e);if(null===t.V){t.V=[];const e=eo(t),n=Xs(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new Hs(e)),t.V.push(new Hs(Yi.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Hs(Yi.keyField(),e))}}}return t.V}function ro(e){const t=Ai(e);if(!t.S)if("F"===t.limitType)t.S=Ns(t.path,t.collectionGroup,no(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of no(t))e.push(new Hs(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new Bs(t.endAt.position,!t.endAt.before):null,r=t.startAt?new Bs(t.startAt.position,!t.startAt.before):null;t.S=Ns(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function io(e,t,n){return new Ks(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function so(e,t){return Ds(ro(e),ro(t))&&e.limitType===t.limitType}function oo(e){return`${xs(ro(e))}|lt:${e.limitType}`}function ao(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${gs(t.value)}`;var t}).join(", ")}]`),as(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+zs(e.startAt)),e.endAt&&(t+=", endAt: "+zs(e.endAt)),`Target(${t})`}(ro(e))}; limitType=${e.limitType})`}function uo(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ls.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!$s(e.startAt,no(e),t)||e.endAt&&$s(e.endAt,no(e),t))}(e,t)}function co(e){return(t,n)=>{let r=!1;for(const i of no(e)){const e=lo(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function lo(e,t,n){const r=e.field.isKeyField()?ls.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ps(r,i):Si()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Si()}}function ho(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:us(t)?"-0":t}}function fo(e){return{integerValue:""+e}}function po(e,t){return cs(t)?fo(t):ho(e,t)}class mo{constructor(){this._=void 0}}function go(e,t,n){return e instanceof _o?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof wo?bo(e,t):e instanceof Io?To(e,t):function(e,t){const n=vo(e,t),r=So(n)+So(e.C);return _s(n)&&_s(e.C)?fo(r):ho(e.N,r)}(e,t)}function yo(e,t,n){return e instanceof wo?bo(e,t):e instanceof Io?To(e,t):n}function vo(e,t){return e instanceof Eo?_s(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class _o extends mo{}class wo extends mo{constructor(e){super(),this.elements=e}}function bo(e,t){const n=ko(t);for(const r of e.elements)n.some(e=>ds(e,r))||n.push(r);return{arrayValue:{values:n}}}class Io extends mo{constructor(e){super(),this.elements=e}}function To(e,t){let n=ko(t);for(const r of e.elements)n=n.filter(e=>!ds(e,r));return{arrayValue:{values:n}}}class Eo extends mo{constructor(e,t){super(),this.N=e,this.C=t}}function So(e){return ns(e.integerValue||e.doubleValue)}function ko(e){return ws(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ao{constructor(e,t){this.field=e,this.transform=t}}class Co{constructor(e,t){this.version=e,this.transformResults=t}}class No{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new No}static exists(e){return new No(void 0,e)}static updateTime(e){return new No(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xo(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Do{}function Ro(e,t,n){e instanceof Fo?function(e,t,n){const r=e.value.clone(),i=jo(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Vo?function(e,t,n){if(!xo(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=jo(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Uo(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Oo(e,t,n){e instanceof Fo?function(e,t,n){if(!xo(e.precondition,t))return;const r=e.value.clone(),i=qo(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Mo(t),r).setHasLocalMutations()}(e,t,n):e instanceof Vo?function(e,t,n){if(!xo(e.precondition,t))return;const r=qo(e.fieldTransforms,n,t),i=t.data;i.setAll(Uo(e)),i.setAll(r),t.convertToFoundDocument(Mo(t),i).setHasLocalMutations()}(e,t,n):function(e,t){xo(e.precondition,t)&&t.convertToNoDocument(Hi.min())}(e,t)}function Po(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=vo(r.transform,e||null);null!=i&&(null==n&&(n=Ss.empty()),n.set(r.field,i))}return n||null}function Lo(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&qi(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wo&&t instanceof wo||e instanceof Io&&t instanceof Io?qi(e.elements,t.elements,ds):e instanceof Eo&&t instanceof Eo?ds(e.C,t.C):e instanceof _o&&t instanceof _o}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Mo(e){return e.isFoundDocument()?e.version:Hi.min()}class Fo extends Do{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Vo extends Do{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Uo(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function jo(e,t,n){const r=new Map;ki(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,yo(o,a,n[i]))}return r}function qo(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,go(e,s,t))}return r}class Bo extends Do{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class zo extends Do{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ho{constructor(e){this.count=e}}var Zo,$o;function Go(e){switch(e){case Ci.OK:return Si();case Ci.CANCELLED:case Ci.UNKNOWN:case Ci.DEADLINE_EXCEEDED:case Ci.RESOURCE_EXHAUSTED:case Ci.INTERNAL:case Ci.UNAVAILABLE:case Ci.UNAUTHENTICATED:return!1;case Ci.INVALID_ARGUMENT:case Ci.NOT_FOUND:case Ci.ALREADY_EXISTS:case Ci.PERMISSION_DENIED:case Ci.FAILED_PRECONDITION:case Ci.ABORTED:case Ci.OUT_OF_RANGE:case Ci.UNIMPLEMENTED:case Ci.DATA_LOSS:return!0;default:return Si()}}function Ko(e){if(void 0===e)return Ii("GRPC error has no .code"),Ci.UNKNOWN;switch(e){case Zo.OK:return Ci.OK;case Zo.CANCELLED:return Ci.CANCELLED;case Zo.UNKNOWN:return Ci.UNKNOWN;case Zo.DEADLINE_EXCEEDED:return Ci.DEADLINE_EXCEEDED;case Zo.RESOURCE_EXHAUSTED:return Ci.RESOURCE_EXHAUSTED;case Zo.INTERNAL:return Ci.INTERNAL;case Zo.UNAVAILABLE:return Ci.UNAVAILABLE;case Zo.UNAUTHENTICATED:return Ci.UNAUTHENTICATED;case Zo.INVALID_ARGUMENT:return Ci.INVALID_ARGUMENT;case Zo.NOT_FOUND:return Ci.NOT_FOUND;case Zo.ALREADY_EXISTS:return Ci.ALREADY_EXISTS;case Zo.PERMISSION_DENIED:return Ci.PERMISSION_DENIED;case Zo.FAILED_PRECONDITION:return Ci.FAILED_PRECONDITION;case Zo.ABORTED:return Ci.ABORTED;case Zo.OUT_OF_RANGE:return Ci.OUT_OF_RANGE;case Zo.UNIMPLEMENTED:return Ci.UNIMPLEMENTED;case Zo.DATA_LOSS:return Ci.DATA_LOSS;default:return Si()}}($o=Zo||(Zo={}))[$o.OK=0]="OK",$o[$o.CANCELLED=1]="CANCELLED",$o[$o.UNKNOWN=2]="UNKNOWN",$o[$o.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$o[$o.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$o[$o.NOT_FOUND=5]="NOT_FOUND",$o[$o.ALREADY_EXISTS=6]="ALREADY_EXISTS",$o[$o.PERMISSION_DENIED=7]="PERMISSION_DENIED",$o[$o.UNAUTHENTICATED=16]="UNAUTHENTICATED",$o[$o.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$o[$o.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$o[$o.ABORTED=10]="ABORTED",$o[$o.OUT_OF_RANGE=11]="OUT_OF_RANGE",$o[$o.UNIMPLEMENTED=12]="UNIMPLEMENTED",$o[$o.INTERNAL=13]="INTERNAL",$o[$o.UNAVAILABLE=14]="UNAVAILABLE",$o[$o.DATA_LOSS=15]="DATA_LOSS";class Wo{constructor(e,t){this.comparator=e,this.root=t||Yo.EMPTY}insert(e,t){return new Wo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yo.BLACK,null,null))}remove(e){return new Wo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qo(this.root,e,this.comparator,!0)}}class Qo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Yo.RED,this.left=null!=r?r:Yo.EMPTY,this.right=null!=i?i:Yo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Yo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Yo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Yo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Si();if(this.right.isRed())throw Si();const e=this.left.check();if(e!==this.right.check())throw Si();return e+(this.isRed()?0:1)}}Yo.EMPTY=null,Yo.RED=!0,Yo.BLACK=!1,Yo.EMPTY=new class{constructor(){this.size=0}get key(){throw Si()}get value(){throw Si()}get color(){throw Si()}get left(){throw Si()}get right(){throw Si()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Yo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Jo{constructor(e){this.comparator=e,this.data=new Wo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xo(this.data.getIterator())}getIteratorFrom(e){return new Xo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Jo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Jo(this.comparator);return t.data=e,t}}class Xo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const ea=new Wo(ls.comparator);function ta(){return ea}const na=new Wo(ls.comparator);function ra(){return na}const ia=new Wo(ls.comparator);function sa(){return ia}const oa=new Jo(ls.comparator);function aa(...e){let t=oa;for(const n of e)t=t.add(n);return t}const ua=new Jo(ji);function ca(){return ua}class la{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,ha.createSynthesizedTargetChangeForCurrentChange(e,t)),new la(Hi.min(),n,ca(),ta(),aa())}}class ha{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ha(Xi.EMPTY_BYTE_STRING,t,aa(),aa(),aa())}}class da{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class fa{constructor(e,t){this.targetId=e,this.O=t}}class pa{constructor(e,t,n=Xi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ma{constructor(){this.F=0,this.M=va(),this.L=Xi.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=aa(),t=aa(),n=aa();return this.M.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Si()}}),new ha(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=va()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class ga{constructor(e){this.tt=e,this.et=new Map,this.nt=ta(),this.st=ya(),this.it=new Jo(ji)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:Si()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((e,n)=>{this.ht(n)&&t(n)})}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(Rs(e))if(0===n){const n=new ls(e.path);this.at(t,n,As.newNoDocument(n,Hi.min()))}else ki(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((n,r)=>{const i=this.dt(r);if(i){if(n.current&&Rs(i.target)){const t=new ls(i.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.at(r,t,As.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}});let n=aa();this.st.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new la(e,t,this.it,this.nt,n);return this.nt=ta(),this.st=ya(),this.it=new Jo(ji),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new ma,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new Jo(ji),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||bi("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}lt(e){this.et.set(e,new ma),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function ya(){return new Wo(ls.comparator)}function va(){return new Wo(ls.comparator)}const _a={asc:"ASCENDING",desc:"DESCENDING"},wa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ba{constructor(e,t){this.databaseId=e,this.D=t}}function Ia(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ta(e,t){return e.D?t.toBase64():t.toUint8Array()}function Ea(e,t){return Ia(e,t.toTimestamp())}function Sa(e){return ki(!!e),Hi.fromTimestamp(function(e){const t=ts(e);return new zi(t.seconds,t.nanos)}(e))}function ka(e,t){return function(e){return new Wi(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Aa(e){const t=Wi.fromString(e);return ki(Ya(t)),t}function Ca(e,t){return ka(e.databaseId,t.path)}function Na(e,t){const n=Aa(t);if(n.get(1)!==e.databaseId.projectId)throw new Ni(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ni(Ci.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ls(Oa(n))}function xa(e,t){return ka(e.databaseId,t)}function Da(e){const t=Aa(e);return 4===t.length?Wi.emptyPath():Oa(t)}function Ra(e){return new Wi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Oa(e){return ki(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Pa(e,t,n){return{name:Ca(e,t),fields:n.value.mapValue.fields}}function La(e,t,n){const r=Na(e,t.name),i=Sa(t.updateTime),s=new Ss({mapValue:{fields:t.fields}}),o=As.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ma(e,t){let n;if(t instanceof Fo)n={update:Pa(e,t.key,t.value)};else if(t instanceof Bo)n={delete:Ca(e,t.key)};else if(t instanceof Vo)n={update:Pa(e,t.key,t.data),updateMask:Qa(t.fieldMask)};else{if(!(t instanceof zo))return Si();n={verify:Ca(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof _o)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wo)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Io)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Eo)return{fieldPath:t.field.canonicalString(),increment:n.C};throw Si()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ea(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Si()}(e,t.precondition)),n}function Fa(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?No.updateTime(Sa(e.updateTime)):void 0!==e.exists?No.exists(e.exists):No.none()}(t.currentDocument):No.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(ki("REQUEST_TIME"===t.setToServerValue),n=new _o):"appendMissingElements"in t?n=new wo(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new Io(t.removeAllFromArray.values||[]):"increment"in t?n=new Eo(e,t.increment):Si();const r=Yi.fromServerFormat(t.fieldPath);return new Ao(r,n)}(e,t)):[];if(t.update){const i=Na(e,t.update.name),s=new Ss({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new Ji((e.fieldPaths||[]).map(e=>Yi.fromServerFormat(e)))}(t.updateMask);return new Vo(i,s,e,n,r)}return new Fo(i,s,n,r)}if(t.delete){const r=Na(e,t.delete);return new Bo(r,n)}if(t.verify){const r=Na(e,t.verify);return new zo(r,n)}return Si()}function Va(e,t){return{documents:[xa(e,t.path)]}}function Ua(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=xa(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=xa(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(Is(e.value))return{unaryFilter:{field:$a(e.field),op:"IS_NAN"}};if(bs(e.value))return{unaryFilter:{field:$a(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Is(e.value))return{unaryFilter:{field:$a(e.field),op:"IS_NOT_NAN"}};if(bs(e.value))return{unaryFilter:{field:$a(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(e.field),op:Za(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:$a(e.field),direction:Ha(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.D||as(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=Ba(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Ba(t.endAt)),n}function ja(e){let t=Da(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ki(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=qa(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new Hs(Ga(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,as(t)?null:t}(n.limit));let u=null;n.startAt&&(u=za(n.startAt));let c=null;return n.endAt&&(c=za(n.endAt)),Ws(t,i,o,s,a,"F",u,c)}function qa(e){return e?void 0!==e.unaryFilter?[Wa(e)]:void 0!==e.fieldFilter?[Ka(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>qa(e)).reduce((e,t)=>e.concat(t)):Si():[]}function Ba(e){return{before:e.before,values:e.position}}function za(e){return new Bs(e.values||[],!!e.before)}function Ha(e){return _a[e]}function Za(e){return wa[e]}function $a(e){return{fieldPath:e.canonicalString()}}function Ga(e){return Yi.fromServerFormat(e.fieldPath)}function Ka(e){return Os.create(Ga(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Si()}}(e.fieldFilter.op),e.fieldFilter.value)}function Wa(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ga(e.unaryFilter.field);return Os.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ga(e.unaryFilter.field);return Os.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ga(e.unaryFilter.field);return Os.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ga(e.unaryFilter.field);return Os.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Si()}}function Qa(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ya(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ja(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=eu(t)),t=Xa(e.get(n),t);return eu(t)}function Xa(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function eu(e){return e+"\x01\x01"}function tu(e){const t=e.length;if(ki(t>=2),2===t)return ki("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Wi.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Si(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Si()}s=t+2}return new Wi(r)}class nu{constructor(e,t){this.seconds=e,this.nanoseconds=t}}let ru=(()=>{class e{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}return e.store="owner",e.key="owner",e})(),iu=(()=>{class e{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}return e.store="mutationQueues",e.keyPath="userId",e})();class su{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}su.store="mutations",su.keyPath="batchId",su.userMutationsIndex="userMutationsIndex",su.userMutationsKeyPath=["userId","batchId"];let ou=(()=>{class e{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Ja(t)]}static key(e,t,n){return[e,Ja(t),n]}}return e.store="documentMutations",e.PLACEHOLDER=new e,e})();class au{constructor(e,t){this.path=e,this.readTime=t}}class uu{constructor(e,t){this.path=e,this.version=t}}class cu{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}cu.store="remoteDocuments",cu.readTimeIndex="readTimeIndex",cu.readTimeIndexPath="readTime",cu.collectionReadTimeIndex="collectionReadTimeIndex",cu.collectionReadTimeIndexPath=["parentPath","readTime"];let lu=(()=>{class e{constructor(e){this.byteSize=e}}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e})();class hu{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}hu.store="targets",hu.keyPath="targetId",hu.queryTargetsIndexName="queryTargetsIndex",hu.queryTargetsKeyPath=["canonicalId","targetId"];class du{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}du.store="targetDocuments",du.keyPath=["targetId","path"],du.documentTargetsIndex="documentTargetsIndex",du.documentTargetsKeyPath=["path","targetId"];let fu=(()=>{class e{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}return e.key="targetGlobalKey",e.store="targetGlobal",e})(),pu=(()=>{class e{constructor(e,t){this.collectionId=e,this.parent=t}}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e})(),mu=(()=>{class e{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}return e.store="clientMetadata",e.keyPath="clientId",e})(),gu=(()=>{class e{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}return e.store="bundles",e.keyPath="bundleId",e})(),yu=(()=>{class e{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}return e.store="namedQueries",e.keyPath="name",e})();const vu=[iu.store,su.store,ou.store,cu.store,hu.store,ru.store,fu.store,du.store,mu.store,lu.store,pu.store,gu.store,yu.store],_u="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class bu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Si(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new bu((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof bu?t:bu.resolve(t)}catch(e){return bu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):bu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):bu.reject(t)}static resolve(e){return new bu((t,n)=>{t(e)})}static reject(e){return new bu((t,n)=>{n(e)})}static waitFor(e){return new bu((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=bu.resolve(!1);for(const n of e)t=t.next(e=>e?bu.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class Iu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Tt=new xi,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{t.error?this.Tt.reject(new Su(e,t.error)):this.Tt.resolve()},this.transaction.onerror=t=>{const n=xu(t.target.error);this.Tt.reject(new Su(e,n))}}static open(e,t,n,r){try{return new Iu(t,e.transaction(r,n))}catch(e){throw new Su(t,e)}}get It(){return this.Tt.promise}abort(e){e&&this.Tt.reject(e),this.aborted||(bi("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Au(t)}}class Tu{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===Tu.Rt((0,ue.z$)())&&Ii("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return bi("SimpleDb","Removing database:",e),Cu(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if("undefined"==typeof indexedDB)return!1;if(Tu.bt())return!0;const e=(0,ue.z$)(),t=Tu.Rt(e),n=0<t&&t<10,r=Tu.vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static bt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Dt(e){var t=this;return(0,h.Z)(function*(){return t.db||(bi("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new Su(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new Ni(Ci.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Su(e,n))},i.onupgradeneeded=e=>{bi("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{bi("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=e=>t.Nt(e)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return(0,h.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.Dt(e);const t=Iu.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).catch(e=>(t.abort(e),bu.reject(e))).toPromise();return o.catch(()=>{}),yield t.It,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(bi("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),i.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Eu{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Cu(this.kt.delete())}}class Su extends Ni{constructor(e,t){super(Ci.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ku(e){return"IndexedDbTransactionError"===e.name}class Au{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(bi("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(bi("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Cu(n)}add(e){return bi("SimpleDb","ADD",this.store.name,e,e),Cu(this.store.add(e))}get(e){return Cu(this.store.get(e)).next(t=>(void 0===t&&(t=null),bi("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return bi("SimpleDb","DELETE",this.store.name,e),Cu(this.store.delete(e))}count(){return bi("SimpleDb","COUNT",this.store.name),Cu(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(e,t)=>{r.push(t)}).next(()=>r)}Ut(e,t){bi("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,(e,t,n)=>n.delete())}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new bu((n,r)=>{t.onerror=e=>{const t=xu(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Bt(e,t){const n=[];return new bu((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Eu(i),o=t(i.primaryKey,i.value,s);if(o instanceof bu){const e=o.catch(e=>(s.done(),bu.reject(e)));n.push(e)}s.isDone?r():null===s.Ft?i.continue():i.continue(s.Ft)}}).next(()=>bu.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cu(e){return new bu((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=xu(e.target.error);n(t)}})}let Nu=!1;function xu(e){const t=Tu.Rt((0,ue.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Ni("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Nu||(Nu=!0,setTimeout(()=>{throw e},0)),e}}return e}class Du extends wu{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Ru(e,t){const n=Ai(e);return Tu.St(n.Qt,t)}class Ou{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ro(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Oo(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Oo(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Hi.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),aa())}isEqual(e){return this.batchId===e.batchId&&qi(this.mutations,e.mutations,(e,t)=>Lo(e,t))&&qi(this.baseMutations,e.baseMutations,(e,t)=>Lo(e,t))}}class Pu{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ki(e.mutations.length===n.length);let r=sa();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Pu(e,t,n,r)}}class Lu{constructor(e,t,n,r,i=Hi.min(),s=Hi.min(),o=Xi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Lu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Mu{constructor(e){this.Wt=e}}function Fu(e,t){if(t.document)return La(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=ls.fromSegments(t.noDocument.path),n=Bu(t.noDocument.readTime),r=As.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=ls.fromSegments(t.unknownDocument.path),n=Bu(t.unknownDocument.version);return As.newUnknownDocument(e,n)}return Si()}function Vu(e,t,n){const r=Uu(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:Ca(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ia(e,t.version.toTimestamp())}}(e.Wt,t);return new cu(null,null,n,t.hasCommittedMutations,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=qu(t.version),s=t.hasCommittedMutations;return new cu(null,new au(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=qu(t.version);return new cu(new uu(e,n),null,null,!0,r,i)}return Si()}function Uu(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ju(e){const t=new zi(e[0],e[1]);return Hi.fromTimestamp(t)}function qu(e){const t=e.toTimestamp();return new nu(t.seconds,t.nanoseconds)}function Bu(e){const t=new zi(e.seconds,e.nanoseconds);return Hi.fromTimestamp(t)}function zu(e,t){const n=(t.baseMutations||[]).map(t=>Fa(e.Wt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>Fa(e.Wt,t)),i=zi.fromMillis(t.localWriteTimeMs);return new Ou(t.batchId,i,n,r)}function Hu(e){const t=Bu(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Bu(e.lastLimboFreeSnapshotVersion):Hi.min();let r;var i;return void 0!==e.query.documents?(ki(1===(i=e.query).documents.length),r=ro(Qs(Da(i.documents[0])))):r=function(e){return ro(ja(e))}(e.query),new Lu(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Xi.fromBase64String(e.resumeToken))}function Zu(e,t){const n=qu(t.snapshotVersion),r=qu(t.lastLimboFreeSnapshotVersion);let i;i=Rs(t.target)?Va(e.Wt,t.target):Ua(e.Wt,t.target);const s=t.resumeToken.toBase64();return new hu(t.targetId,xs(t.target),n,s,t.sequenceNumber,r,i)}function $u(e){const t=ja({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?io(t,t.limit,"L"):t}class Gu{getBundleMetadata(e,t){return Ku(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:Bu(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return Ku(e).put({bundleId:(n=t).id,createTime:qu(Sa(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Wu(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:$u(t.bundledQuery),readTime:Bu(t.readTime)};var t})}saveNamedQuery(e,t){return Wu(e).put(function(e){return{name:e.name,readTime:qu(Sa(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Ku(e){return Ru(e,gu.store)}function Wu(e){return Ru(e,yu.store)}class Qu{constructor(){this.Gt=new Yu}addToCollectionParentIndex(e,t){return this.Gt.add(t),bu.resolve()}getCollectionParents(e,t){return bu.resolve(this.Gt.getEntries(t))}}class Yu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Jo(Wi.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Jo(Wi.comparator)).toArray()}}class Ju{constructor(){this.zt=new Yu}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const i={collectionId:n,parent:Ja(r)};return Xu(e).put(i)}return bu.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Bi(t),""],!1,!0);return Xu(e).Lt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(tu(r.parent))}return n})}}function Xu(e){return Ru(e,pu.store)}const ec={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new tc(e,tc.DEFAULT_COLLECTION_PERCENTILE,tc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nc(e,t,n){const r=e.store(su.store),i=e.store(ou.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.Kt({range:o},(e,t,n)=>(a++,n.delete()));s.push(u.next(()=>{ki(1===a)}));const c=[];for(const l of n.mutations){const e=ou.key(t,l.key.path,n.batchId);s.push(i.delete(e)),c.push(l.key)}return bu.waitFor(s).next(()=>c)}function rc(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Si();t=e.noDocument}return JSON.stringify(t).length}tc.DEFAULT_COLLECTION_PERCENTILE=10,tc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tc.DEFAULT=new tc(41943040,tc.DEFAULT_COLLECTION_PERCENTILE,tc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tc.DISABLED=new tc(-1,0,0);class ic{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){ki(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new ic(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oc(e).Kt({index:su.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=ac(e),s=oc(e);return s.add({}).next(o=>{ki("number"==typeof o);const a=new Ou(o,t,n,r),u=function(e,t,n){const r=n.baseMutations.map(t=>Ma(e.Wt,t)),i=n.mutations.map(t=>Ma(e.Wt,t));return new su(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.N,this.userId,a),c=[];let l=new Jo((e,t)=>ji(e.canonicalString(),t.canonicalString()));for(const e of r){const t=ou.key(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),c.push(s.put(u)),c.push(i.put(t,ou.PLACEHOLDER))}return l.forEach(t=>{c.push(this.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),bu.waitFor(c).next(()=>a)})}lookupMutationBatch(e,t){return oc(e).get(t).next(e=>e?(ki(e.userId===this.userId),zu(this.N,e)):null)}Xt(e,t){return this.Jt[t]?bu.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return oc(e).Kt({index:su.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(ki(t.batchId>=n),i=zu(this.N,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return oc(e).Kt({index:su.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oc(e).Lt(su.userMutationsIndex,t).next(e=>e.map(e=>zu(this.N,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ou.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return ac(e).Kt({range:r},(n,r,s)=>{const[o,a,u]=n,c=tu(a);if(o===this.userId&&t.path.isEqual(c))return oc(e).get(u).next(e=>{if(!e)throw Si();ki(e.userId===this.userId),i.push(zu(this.N,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Jo(ji);const r=[];return t.forEach(t=>{const i=ou.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=ac(e).Kt({range:s},(e,r,i)=>{const[s,o,a]=e,u=tu(o);s===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()});r.push(o)}),bu.waitFor(r).next(()=>this.Zt(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ou.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Jo(ji);return ac(e).Kt({range:s},(e,t,i)=>{const[s,a,u]=e,c=tu(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(u)):i.done()}).next(()=>this.Zt(e,o))}Zt(e,t){const n=[],r=[];return t.forEach(t=>{r.push(oc(e).get(t).next(e=>{if(null===e)throw Si();ki(e.userId===this.userId),n.push(zu(this.N,e))}))}),bu.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return nc(e.Qt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),bu.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return bu.resolve();const n=IDBKeyRange.lowerBound(ou.prefixForUser(this.userId)),r=[];return ac(e).Kt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=tu(e[1]);r.push(t)}else n.done()}).next(()=>{ki(0===r.length)})})}containsKey(e,t){return sc(e,this.userId,t)}ee(e){return uc(e).get(this.userId).next(e=>e||new iu(this.userId,-1,""))}}function sc(e,t,n){const r=ou.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ac(e).Kt({range:s,qt:!0},(e,n,r)=>{const[s,a,u]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function oc(e){return Ru(e,su.store)}function ac(e){return Ru(e,ou.store)}function uc(e){return Ru(e,iu.store)}class cc{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new cc(0)}static ie(){return new cc(-1)}}class lc{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const n=new cc(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(e=>Hi.fromTimestamp(new zi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.re(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(n=>(n.targetCount+=1,this.ce(t,n),this.oe(e,n))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>hc(e).delete(t.targetId)).next(()=>this.re(e)).next(t=>(ki(t.targetCount>0),t.targetCount-=1,this.oe(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return hc(e).Kt((s,o)=>{const a=Hu(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>bu.waitFor(i)).next(()=>r)}forEachTarget(e,t){return hc(e).Kt((e,n)=>{const r=Hu(n);t(r)})}re(e){return dc(e).get(fu.key).next(e=>(ki(null!==e),e))}oe(e,t){return dc(e).put(fu.key,t)}ae(e,t){return hc(e).put(Zu(this.N,t))}ce(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next(e=>e.targetCount)}getTargetData(e,t){const n=xs(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return hc(e).Kt({range:r,index:hu.queryTargetsIndexName},(e,n,r)=>{const s=Hu(n);Ds(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=fc(e);return t.forEach(t=>{const s=Ja(t.path);r.push(i.put(new du(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))}),bu.waitFor(r)}removeMatchingKeys(e,t,n){const r=fc(e);return bu.forEach(t,t=>{const i=Ja(t.path);return bu.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=fc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=fc(e);let i=aa();return r.Kt({range:n,qt:!0},(e,t,n)=>{const r=tu(e[1]),s=new ls(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=Ja(t.path),r=IDBKeyRange.bound([n],[Bi(n)],!1,!0);let i=0;return fc(e).Kt({index:du.documentTargetsIndex,qt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Et(e,t){return hc(e).get(t).next(e=>e?Hu(e):null)}}function hc(e){return Ru(e,hu.store)}function dc(e){return Ru(e,fu.store)}function fc(e){return Ru(e,du.store)}function pc(e){return mc.apply(this,arguments)}function mc(){return(mc=(0,h.Z)(function*(e){if(e.code!==Ci.FAILED_PRECONDITION||e.message!==_u)throw e;bi("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function gc([e,t],[n,r]){const i=ji(e,n);return 0===i?ji(t,r):i}class yc{constructor(e){this.ue=e,this.buffer=new Jo(gc),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();gc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vc{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const n=this.de?3e5:6e4;bi("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,h.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(e){ku(e)?bi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield pc(e)}yield t._e(e)}))}}class _c{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return bu.resolve(Fi.T);const n=new yc(t);return this.me.forEachTarget(e,e=>n.fe(e.sequenceNumber)).next(()=>this.me.ye(e,e=>n.fe(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(bi("LruGarbageCollector","Garbage collection skipped; disabled"),bu.resolve(ec)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(bi("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ec):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,i,s,o,a,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(bi("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),wi()<=ae.in.DEBUG&&bi("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-c}ms`),bu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class wc{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new _c(e,t)}(this,t)}ge(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Ee(e){let t=0;return this.ye(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Te(e,(e,n)=>t(n))}addReference(e,t,n){return bc(e,n)}removeReference(e,t,n){return bc(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return bc(e,t)}Ie(e,t){return function(e,t){let n=!1;return uc(e).jt(r=>sc(e,r,t).next(e=>(e&&(n=!0),bu.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Te(e,(s,o)=>{if(o<=t){const t=this.Ie(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s),fc(e).delete([0,Ja(s.path)])))});r.push(t)}}).next(()=>bu.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return bc(e,t)}Te(e,t){const n=fc(e);let r,i=Fi.T;return n.Kt({index:du.documentTargetsIndex},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==Fi.T&&t(new ls(tu(r)),i),i=o,r=s):i=Fi.T}).next(()=>{i!==Fi.T&&t(new ls(tu(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bc(e,t){return fc(e).put(function(e,t){return new du(0,Ja(e.path),t)}(t,e.currentSequenceNumber))}class Ic{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){$i(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Gi(this.inner)}}class Tc{constructor(){this.changes=new Ic(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Hi.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:As.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?bu.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ec{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return Ac(e).put(Cc(t),n)}removeEntry(e,t){const n=Ac(e),r=Cc(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Ae(e,n)))}getEntry(e,t){return Ac(e).get(Cc(t)).next(e=>this.Re(t,e))}Pe(e,t){return Ac(e).get(Cc(t)).next(e=>({document:this.Re(t,e),size:rc(e)}))}getEntries(e,t){let n=ta();return this.be(e,t,(e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)}).next(()=>n)}ve(e,t){let n=ta(),r=new Wo(ls.comparator);return this.be(e,t,(e,t)=>{const i=this.Re(e,t);n=n.insert(e,i),r=r.insert(e,rc(t))}).next(()=>({documents:n,Ve:r}))}be(e,t,n){if(t.isEmpty())return bu.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return Ac(e).Kt({range:r},(e,t,r)=>{const o=ls.fromSegments(e);for(;s&&ls.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Mt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=ta();const i=t.path.length+1,s={};if(n.isEqual(Hi.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=Uu(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=cu.collectionReadTimeIndex}return Ac(e).Kt(s,(e,n,s)=>{if(e.length!==i)return;const o=Fu(this.N,n);t.path.isPrefixOf(o.key.path)?uo(t,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(e){return new Sc(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return kc(e).get(lu.key).next(e=>(ki(!!e),e))}Ae(e,t){return kc(e).put(lu.key,t)}Re(e,t){if(t){const e=Fu(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(Hi.min()))return e}return As.newInvalidDocument(e)}}class Sc extends Tc{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new Ic(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Jo((e,t)=>ji(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.De.get(i);if(s.document.isValidDocument()){const a=Vu(this.Se.N,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const u=rc(a);n+=u-o,t.push(this.Se.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=Vu(this.Se.N,As.newNoDocument(i,Hi.min()),this.getReadTime(i));t.push(this.Se.addEntry(e,i,n))}else t.push(this.Se.removeEntry(e,i))}),r.forEach(n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))}),t.push(this.Se.updateMetadata(e,n)),bu.waitFor(t)}getFromCache(e,t){return this.Se.Pe(e,t).next(e=>(this.De.set(t,e.size),e.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:e,Ve:t})=>(t.forEach((e,t)=>{this.De.set(e,t)}),e))}}function kc(e){return Ru(e,lu.store)}function Ac(e){return Ru(e,cu.store)}function Cc(e){return e.path.toArray()}class Nc{constructor(e){this.N=e}Ct(e,t,n,r){ki(n<r&&n>=0&&r<=11);const i=new Iu("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(ru.store)}(e),function(e){e.createObjectStore(iu.store,{keyPath:iu.keyPath}),e.createObjectStore(su.store,{keyPath:su.keyPath,autoIncrement:!0}).createIndex(su.userMutationsIndex,su.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ou.store)}(e),xc(e),function(e){e.createObjectStore(cu.store)}(e));let s=bu.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(du.store),e.deleteObjectStore(hu.store),e.deleteObjectStore(fu.store)}(e),xc(e)),s=s.next(()=>function(e){const t=e.store(fu.store),n=new fu(0,0,Hi.min().toTimestamp(),0);return t.put(fu.key,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store(su.store).Lt().next(n=>{e.deleteObjectStore(su.store),e.createObjectStore(su.store,{keyPath:su.keyPath,autoIncrement:!0}).createIndex(su.userMutationsIndex,su.userMutationsKeyPath,{unique:!0});const r=t.store(su.store),i=n.map(e=>r.put(e));return bu.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore(mu.store,{keyPath:mu.keyPath})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Ce(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore(lu.store)}(e),this.Ne(i)))),n<7&&r>=7&&(s=s.next(()=>this.xe(i))),n<8&&r>=8&&(s=s.next(()=>this.ke(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(cu.store);t.createIndex(cu.readTimeIndex,cu.readTimeIndexPath,{unique:!1}),t.createIndex(cu.collectionReadTimeIndex,cu.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(s=s.next(()=>this.$e(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore(gu.store,{keyPath:gu.keyPath})}(e),function(e){e.createObjectStore(yu.store,{keyPath:yu.keyPath})}(e)})),s}Ne(e){let t=0;return e.store(cu.store).Kt((e,n)=>{t+=rc(n)}).next(()=>{const n=new lu(t);return e.store(lu.store).put(lu.key,n)})}Ce(e){const t=e.store(iu.store),n=e.store(su.store);return t.Lt().next(t=>bu.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(su.userMutationsIndex,r).next(n=>bu.forEach(n,n=>{ki(n.userId===t.userId);const r=zu(this.N,n);return nc(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(du.store),n=e.store(cu.store);return e.store(fu.store).get(fu.key).next(e=>{const r=[];return n.Kt((n,i)=>{const s=new Wi(n),o=function(e){return[0,Ja(e)]}(s);r.push(t.get(o).next(n=>n?bu.resolve():(n=>t.put(new du(0,Ja(n),e.highestListenSequenceNumber)))(s)))}).next(()=>bu.waitFor(r))})}ke(e,t){e.createObjectStore(pu.store,{keyPath:pu.keyPath});const n=t.store(pu.store),r=new Yu,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ja(r)})}};return t.store(cu.store).Kt({qt:!0},(e,t)=>{const n=new Wi(e);return i(n.popLast())}).next(()=>t.store(ou.store).Kt({qt:!0},([e,t,n],r)=>{const s=tu(t);return i(s.popLast())}))}$e(e){const t=e.store(hu.store);return t.Kt((e,n)=>{const r=Hu(n),i=Zu(this.N,r);return t.put(i)})}}function xc(e){e.createObjectStore(du.store,{keyPath:du.keyPath}).createIndex(du.documentTargetsIndex,du.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(hu.store,{keyPath:hu.keyPath}).createIndex(hu.queryTargetsIndexName,hu.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(fu.store)}const Dc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Rc{constructor(e,t,n,r,i,s,o,a,u,c){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Fe=u,this.Me=c,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!Rc.Pt())throw new Ni(Ci.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wc(this,r),this.We=t+"main",this.N=new Mu(a),this.Ge=new Tu(this.We,11,new Nc(this.N)),this.ze=new lc(this.referenceDelegate,this.N),this.Ht=new Ju,this.He=function(e,t){return new Ec(e,t)}(this.N,this.Ht),this.Je=new Gu,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===c&&Ii("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ni(Ci.FAILED_PRECONDITION,Dc);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new Fi(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var n=(0,h.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,h.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,h.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pc(e).put(new mu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(ku(e))return bi("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return bi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return Oc(e).get(ru.key).next(e=>bu.resolve(this.cn(e)))}un(e){return Pc(e).delete(this.clientId)}hn(){var e=this;return(0,h.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Ru(t,mu.store);return n.Lt().next(t=>{const r=e.fn(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return bu.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.Ye)for(const n of t)e.Ye.removeItem(e.dn(n.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?bu.resolve(!0):Oc(e).get(ru.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new Ni(Ci.FAILED_PRECONDITION,Dc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pc(e).Lt().next(e=>void 0===this.fn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&bi("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,h.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[ru.store,mu.store],t=>{const n=new Du(t,Fi.T);return e.on(n).next(()=>e.un(n))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Pc(e).Lt().next(e=>this.fn(e,18e5).map(e=>e.clientId)))}get started(){return this.Be}getMutationQueue(e){return ic.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){let r;return bi("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",vu,i=>(r=new Du(i,this.Le?this.Le.next():Fi.T),"readwrite-primary"===t?this.sn(r).next(e=>!!e||this.rn(r)).next(t=>{if(!t)throw Ii(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Ni(Ci.FAILED_PRECONDITION,_u);return n(r)}).next(e=>this.an(r).next(()=>e)):this.En(r).next(()=>n(r)))).then(e=>(r.raiseOnCommittedEvent(),e))}En(e){return Oc(e).get(ru.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.cn(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ni(Ci.FAILED_PRECONDITION,Dc)})}an(e){const t=new ru(this.clientId,this.allowTabSynchronization,Date.now());return Oc(e).put(ru.key,t)}static Pt(){return Tu.Pt()}on(e){const t=Oc(e);return t.get(ru.key).next(e=>this.cn(e)?(bi("IndexedDbPersistence","Releasing primary lease."),t.delete(ru.key)):bu.resolve())}ln(e,t){const n=Date.now();return!(e<n-t||e>n&&(Ii(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,ue.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return bi("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Ii("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Ii("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Oc(e){return Ru(e,ru.store)}function Pc(e){return Ru(e,mu.store)}function Lc(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Mc{constructor(e,t){this.progress=e,this.Tn=t}}class Fc{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Rn(e,t,n))}Rn(e,t,n){return this.He.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}Pn(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}bn(e,t){return this.He.getEntries(e,t).next(t=>this.vn(e,t).next(()=>t))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.Pn(t,e))}getDocumentsMatchingQuery(e,t,n){return function(e){return ls.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):to(t)?this.Sn(e,t,n):this.Dn(e,t,n)}Vn(e,t){return this.An(e,new ls(t)).next(e=>{let t=ra();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Sn(e,t,n){const r=t.collectionGroup;let i=ra();return this.Ht.getCollectionParents(e,r).next(s=>bu.forEach(s,s=>{const o=function(e,t){return new Ks(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.Dn(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}Dn(e,t,n){let r,i;return this.He.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(i=t,this.Cn(e,i,r).next(e=>{r=e;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=As.newInvalidDocument(n),r=r.insert(n,i)),Oo(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{uo(t,n)||(r=r.remove(e))}),r))}Cn(e,t,n){let r=aa();for(const s of t)for(const e of s.mutations)e instanceof Vo&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))}),i))}}class Vc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=aa(),r=aa();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Vc(e,t.fromCache,n,r)}}class Uc{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Hi.min())?this.Fn(e,t):this.On.bn(e,r).next(i=>{const s=this.Mn(t,i);return(Ys(t)||Js(t))&&this.Ln(t.limitType,s,r,n)?this.Fn(e,t):(wi()<=ae.in.DEBUG&&bi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ao(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(s.forEach(t=>{e=e.insert(t.key,t)}),e)))})}Mn(e,t){let n=new Jo(co(e));return t.forEach((t,r)=>{uo(e,r)&&(n=n.add(r))}),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,t){return wi()<=ae.in.DEBUG&&bi("QueryEngine","Using full collection scan to execute query:",ao(t)),this.On.getDocumentsMatchingQuery(e,t,Hi.min())}}class jc{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new Wo(ji),this.qn=new Ic(e=>xs(e),Ds),this.Kn=Hi.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new Fc(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function qc(e,t,n,r){return new jc(e,t,n,r)}function Bc(e,t){return zc.apply(this,arguments)}function zc(){return(zc=(0,h.Z)(function*(e,t){const n=Ai(e);let r=n.In,i=n.Qn;const s=yield n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.In.getAllMutationBatches(e).next(o=>(s=o,r=n.persistence.getMutationQueue(t),i=new Fc(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=aa();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.bn(e,o).next(e=>({Wn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s})).apply(this,arguments)}function Hc(e,t){const n=Ai(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=bu.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);ki(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.In.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.bn(e,r))})}function Zc(e){const t=Ai(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ze.getLastRemoteSnapshotVersion(e))}function $c(e,t){const n=Ai(e),r=t.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];t.targetChanges.forEach((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,s).next(()=>n.ze.addMatchingKeys(e,t.addedDocuments,s)));const u=t.resumeToken;if(u.approximateByteSize()>0){const c=a.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,c),function(e,t,n){return ki(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,t)&&o.push(n.ze.updateTargetData(e,c))}});let a=ta();if(t.documentUpdates.forEach((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Gc(e,s,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(Hi.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next(t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return bu.waitFor(o).next(()=>s.apply(e)).next(()=>n.Qn.vn(e,a)).next(()=>a)}).then(e=>(n.Un=i,e))}function Gc(e,t,n,r,i){let s=aa();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=ta();return n.forEach((n,o)=>{const a=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Hi.min())?(t.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,u),s=s.insert(n,o)):bi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function Kc(e,t){const n=Ai(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)))}function Wc(e,t){const n=Ai(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.ze.getTargetData(e,t).next(i=>i?(r=i,bu.resolve(r)):n.ze.allocateTargetId(e).next(i=>(r=new Lu(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function Qc(e,t,n){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,h.Z)(function*(e,t,n){const r=Ai(e),i=r.Un.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ku(e))throw e;bi("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Un=r.Un.remove(t),r.qn.delete(i.target)})).apply(this,arguments)}function Jc(e,t,n){const r=Ai(e);let i=Hi.min(),s=aa();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Ai(e),i=r.qn.get(n);return void 0!==i?bu.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,ro(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Bn.getDocumentsMatchingQuery(e,t,n?i:Hi.min(),n?s:aa())).next(e=>({documents:e,Gn:s})))}function Xc(e,t){const n=Ai(e),r=Ai(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function el(e){const t=Ai(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=Ai(e);let i=ta(),s=Uu(n);const o=Ac(t),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:cu.readTimeIndex,range:a},(e,t)=>{const n=Fu(r.N,t);i=i.insert(n.key,n),s=t.readTime}).next(()=>({Tn:i,readTime:ju(s)}))}(t.jn,e,t.Kn)).then(({Tn:e,readTime:n})=>(t.Kn=n,e))}function tl(){return(tl=(0,h.Z)(function*(e){const t=Ai(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=Ac(e);let n=Hi.min();return t.Kt({index:cu.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=ju(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.Kn=e})})).apply(this,arguments)}function nl(){return(nl=(0,h.Z)(function*(e,t,n,r){const i=Ai(e);let s=aa(),o=ta(),a=sa();for(const l of n){const e=t.zn(l.metadata.name);l.document&&(s=s.add(e)),o=o.insert(e,t.Hn(l)),a=a.insert(e,t.Jn(l.metadata.readTime))}const u=i.jn.newChangeBuffer({trackRemovals:!0}),c=yield Wc(i,function(e){return ro(Qs(Wi.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>Gc(e,u,o,Hi.min(),a).next(t=>(u.apply(e),t)).next(t=>i.ze.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.ze.addMatchingKeys(e,s,c.targetId)).next(()=>i.Qn.vn(e,t)).next(()=>t)))})).apply(this,arguments)}function rl(e,t){return il.apply(this,arguments)}function il(){return(il=(0,h.Z)(function*(e,t,n=aa()){const r=yield Wc(e,ro($u(t.bundledQuery))),i=Ai(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=Sa(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Je.saveNamedQuery(e,t);const o=r.withResumeToken(Xi.EMPTY_BYTE_STRING,s);return i.Un=i.Un.insert(o.targetId,o),i.ze.updateTargetData(e,o).next(()=>i.ze.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.ze.addMatchingKeys(e,n,r.targetId)).next(()=>i.Je.saveNamedQuery(e,t))})})).apply(this,arguments)}class sl{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return bu.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:Sa(n.createTime)}),bu.resolve()}getNamedQuery(e,t){return bu.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:$u(e.bundledQuery),readTime:Sa(e.readTime)}}(t)),bu.resolve()}}class ol{constructor(){this.Zn=new Jo(al.ts),this.es=new Jo(al.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new al(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.rs(new al(e,t))}os(e,t){e.forEach(e=>this.removeReference(e,t))}cs(e){const t=new ls(new Wi([])),n=new al(t,e),r=new al(t,e+1),i=[];return this.es.forEachInRange([n,r],e=>{this.rs(e),i.push(e.key)}),i}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new ls(new Wi([])),n=new al(t,e),r=new al(t,e+1);let i=aa();return this.es.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new al(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class al{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return ls.comparator(e.key,t.key)||ji(e.ls,t.ls)}static ns(e,t){return ji(e.ls,t.ls)||ls.comparator(e.key,t.key)}}class ul{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new Jo(al.ts)}checkEmpty(e){return bu.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++;const s=new Ou(i,t,n,r);this.In.push(s);for(const o of r)this.ds=this.ds.add(new al(o.key,i)),this.Ht.addToCollectionParentIndex(e,o.key.path.popLast());return bu.resolve(s)}lookupMutationBatch(e,t){return bu.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=this._s(t+1),r=n<0?0:n;return bu.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return bu.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return bu.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new al(t,0),r=new al(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],e=>{const t=this.ws(e.ls);i.push(t)}),bu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Jo(ji);return t.forEach(e=>{const t=new al(e,0),r=new al(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],e=>{n=n.add(e.ls)})}),bu.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ls.isDocumentKey(i)||(i=i.child(""));const s=new al(new ls(i),0);let o=new Jo(ji);return this.ds.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},s),bu.resolve(this.gs(o))}gs(e){const t=[];return e.forEach(e=>{const n=this.ws(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ki(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return bu.forEach(t.mutations,r=>{const i=new al(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=n})}te(e){}containsKey(e,t){const n=new al(t,0),r=this.ds.firstAfterOrEqual(n);return bu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return bu.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class cl{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Wo(ls.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return bu.resolve(n?n.document.clone():As.newInvalidDocument(t))}getEntries(e,t){let n=ta();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():As.newInvalidDocument(e))}),bu.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=ta();const i=new ls(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||uo(t,i)&&(r=r.insert(i.key,i.clone()))}return bu.resolve(r)}Es(e,t){return bu.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ll(this)}getSize(e){return bu.resolve(this.size)}}class ll extends Tc{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)}),bu.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class hl{constructor(e){this.persistence=e,this.Ts=new Ic(e=>xs(e),Ds),this.lastRemoteSnapshotVersion=Hi.min(),this.highestTargetId=0,this.Is=0,this.As=new ol,this.targetCount=0,this.Rs=cc.se()}forEachTarget(e,t){return this.Ts.forEach((e,n)=>t(n)),bu.resolve()}getLastRemoteSnapshotVersion(e){return bu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bu.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),bu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),bu.resolve()}ae(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new cc(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,bu.resolve()}updateTargetData(e,t){return this.ae(t),bu.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,bu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Ts.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Ts.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),bu.waitFor(i).next(()=>r)}getTargetCount(e){return bu.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return bu.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),bu.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),bu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),bu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return bu.resolve(n)}containsKey(e,t){return bu.resolve(this.As.containsKey(t))}}class dl{constructor(e,t){this.Ps={},this.Le=new Fi(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new hl(this),this.Ht=new Qu,this.He=function(e,t){return new cl(e,t)}(this.Ht,e=>this.referenceDelegate.bs(e)),this.N=new Mu(t),this.Je=new sl(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new ul(this.Ht,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){bi("MemoryPersistence","Starting transaction:",e);const r=new fl(this.Le.next());return this.referenceDelegate.vs(),n(r).next(e=>this.referenceDelegate.Vs(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ss(e,t){return bu.or(Object.values(this.Ps).map(n=>()=>n.containsKey(e,t)))}}class fl extends wu{constructor(e){super(),this.currentSequenceNumber=e}}class pl{constructor(e){this.persistence=e,this.Ds=new ol,this.Cs=null}static Ns(e){return new pl(e)}get xs(){if(this.Cs)return this.Cs;throw Si()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),bu.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),bu.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),bu.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bu.forEach(this.xs,n=>{const r=ls.fromPath(n);return this.ks(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}bs(e){return 0}ks(e,t){return bu.or([()=>bu.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function ml(e,t){return`firestore_clients_${e}_${t}`}function gl(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function yl(e,t){return`firestore_targets_${e}_${t}`}class vl{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ni(r.error.code,r.error.message))),s?new vl(e,t,r.state,i):(Ii("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _l{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Ni(n.error.code,n.error.message))),i?new _l(e,n.state,r):(Ii("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ca();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=cs(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new wl(e,i):(Ii("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class bl{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new bl(t.clientId,t.onlineState):(Ii("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Il{constructor(){this.activeTargetIds=ca()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tl{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Wo(ji),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.js=ml(this.persistenceKey,this.Ls),this.Qs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new Il),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Js=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static Pt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,h.Z)(function*(){const t=yield e.syncEngine.pn();for(const r of t){if(r===e.Ls)continue;const t=e.getItem(ml(e.persistenceKey,r));if(t){const n=wl.$s(r,t);n&&(e.qs=e.qs.insert(n.clientId,n))}}e.Ys();const n=e.storage.getItem(e.Hs);if(n){const t=e.Xs(n);t&&e.Zs(t)}for(const r of e.Ks)e.Us(r);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,n){this.ei(e,t,n),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(yl(this.persistenceKey,e));if(n){const r=_l.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yl(this.persistenceKey,e))}updateQueryState(e,t,n){this.ii(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.ni(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return bi("SharedClientState","READ",e,t),t}setItem(e,t){bi("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){bi("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const n=e;if(n.storageArea===this.storage){if(bi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void Ii("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,h.Z)(function*(){if(t.started){if(null!==n.key)if(t.Ws.test(n.key)){if(null==n.newValue){const e=t.ai(n.key);return t.ci(e,null)}{const e=t.ui(n.key,n.newValue);if(e)return t.ci(e.clientId,e)}}else if(t.Gs.test(n.key)){if(null!==n.newValue){const e=t.hi(n.key,n.newValue);if(e)return t.li(e)}}else if(t.zs.test(n.key)){if(null!==n.newValue){const e=t.fi(n.key,n.newValue);if(e)return t.di(e)}}else if(n.key===t.Hs){if(null!==n.newValue){const e=t.Xs(n.newValue);if(e)return t.Zs(e)}}else if(n.key===t.Qs){const e=function(e){let t=Fi.T;if(null!=e)try{const n=JSON.parse(e);ki("number"==typeof n),t=n}catch(e){Ii("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==Fi.T&&t.sequenceNumberHandler(e)}else if(n.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(n)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,n){const r=new vl(this.currentUser,e,t,n),i=gl(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}ni(e){const t=gl(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,n){const r=yl(this.persistenceKey,e),i=new _l(e,t,n);this.setItem(r,i.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const n=this.ai(e);return wl.$s(n,t)}hi(e,t){const n=this.Gs.exec(e),r=Number(n[1]);return vl.$s(new yi(void 0!==n[2]?n[2]:null),r,t)}fi(e,t){const n=this.zs.exec(e),r=Number(n[1]);return _l.$s(r,t)}Xs(e){return bl.$s(e)}li(e){var t=this;return(0,h.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);bi("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const n=t?this.qs.insert(e,t):this.qs.remove(e),r=this.ti(this.qs),i=this.ti(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.gi(s,o).then(()=>{this.qs=n})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=ca();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class El{constructor(){this.yi=new Il,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new Il,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Sl{Ei(e){}shutdown(){}}class kl{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.Pi=[],this.bi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}bi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){bi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}Ri(){bi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Al={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Cl{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class Nl extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const i=this.Bi(e,t);bi("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(e,i,s,n).then(e=>(bi("RestConnection","Received: ",e),e),t=>{throw Ti("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t})}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+vi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){return`${this.Fi}/v1/${t}:${Al[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise((i,s)=>{const o=new gi;o.listenOnce(di.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case hi.NO_ERROR:const t=o.getResponseJson();bi("Connection","XHR received:",JSON.stringify(t)),i(t);break;case hi.TIMEOUT:bi("Connection",'RPC "'+e+'" timed out'),s(new Ni(Ci.DEADLINE_EXCEEDED,"Request time out"));break;case hi.HTTP_ERROR:const n=o.getStatus();if(bi("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ci).indexOf(t)>=0?t:Ci.UNKNOWN}(e.status);s(new Ni(t,e.message))}else s(new Ni(Ci.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Ni(Ci.UNAVAILABLE,"Connection failed."));break;default:Si()}}finally{bi("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=new oi,i=Xt(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new pi({})),this.Ui(s.initMessageHeaders,t),(0,ue.uI)()||(0,ue.b$)()||(0,ue.d)()||(0,ue.w1)()||(0,ue.Mn)()||(0,ue.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");bi("Connection","Creating WebChannel: "+o,s);const a=r.createWebChannel(o,s);let u=!1,c=!1;const l=new Cl({vi:e=>{c?bi("Connection","Not sending because WebChannel is closed:",e):(u||(bi("Connection","Opening WebChannel transport."),a.open(),u=!0),bi("Connection","WebChannel sending:",e),a.send(e))},Vi:()=>a.close()}),h=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return h(a,mi.EventType.OPEN,()=>{c||bi("Connection","WebChannel transport opened.")}),h(a,mi.EventType.CLOSE,()=>{c||(c=!0,bi("Connection","WebChannel transport closed"),l.$i())}),h(a,mi.EventType.ERROR,e=>{c||(c=!0,Ti("Connection","WebChannel transport errored:",e),l.$i(new Ni(Ci.UNAVAILABLE,"The operation could not be completed")))}),h(a,mi.EventType.MESSAGE,e=>{var t;if(!c){const n=e.data[0];ki(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){bi("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Zo[e];if(void 0!==t)return Ko(t)}(e),n=i.message;void 0===t&&(t=Ci.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),c=!0,l.$i(new Ni(t,n)),a.close()}else bi("Connection","WebChannel received:",n),l.Oi(n)}}),h(i,fi.STAT_EVENT,e=>{10===e.stat?bi("Connection","Detected buffering proxy"):11===e.stat&&bi("Connection","Detected no buffering proxy")}),setTimeout(()=>{l.ki()},0),l}}function xl(){return"undefined"!=typeof window?window:null}function Dl(){return"undefined"!=typeof document?document:null}function Rl(e){return new ba(e,!0)}class Ol{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&bi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Pl{constructor(e,t,n,r,i,s){this.Oe=e,this.er=n,this.nr=r,this.credentialsProvider=i,this.listener=s,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Ol(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,h.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,h.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var n=this;return(0,h.Z)(function*(){n._r(),n.rr.cancel(),n.sr++,3!==e?n.rr.reset():t&&t.code===Ci.RESOURCE_EXHAUSTED?(Ii(t.toString()),Ii("Using maximum backoff delay to prevent overloading the backend."),n.rr.Yi()):t&&t.code===Ci.UNAUTHENTICATED&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.mr(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(e=>{this.sr===t&&this.yr(e)},t=>{e(()=>{const e=new Ni(Ci.UNKNOWN,"Fetching auth token failed: "+t.message);return this.pr(e)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(e=>{t(()=>this.pr(e))}),this.stream.onMessage(e=>{t(()=>this.onMessage(e))})}ur(){var e=this;this.state=4,this.rr.Xi((0,h.Z)(function*(){e.state=0,e.start()}))}pr(e){return bi("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(bi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ll extends Pl{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,i),this.N=r}Er(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Si()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.D?(ki(void 0===t||"string"==typeof t),Xi.fromBase64String(t||"")):(ki(void 0===t||t instanceof Uint8Array),Xi.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Ci.UNKNOWN:Ko(e.code);return new Ni(t,e.message||"")}(o);n=new pa(r,i,s,a||null)}else if("documentChange"in t){const r=t.documentChange,i=Na(e,r.document.name),s=Sa(r.document.updateTime),o=new Ss({mapValue:{fields:r.document.fields}}),a=As.newFoundDocument(i,s,o);n=new da(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=Na(e,r.document),s=r.readTime?Sa(r.readTime):Hi.min(),o=As.newNoDocument(i,s);n=new da([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=Na(e,r.document);n=new da([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return Si();{const e=t.filter,r=new Ho(e.count||0);n=new fa(e.targetId,r)}}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return Hi.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Hi.min():t.readTime?Sa(t.readTime):Hi.min()}(e);return this.listener.Tr(t,n)}Ir(e){const t={};t.database=Ra(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=Rs(r)?{documents:Va(e,r)}:{query:Ua(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ta(e,t.resumeToken):t.snapshotVersion.compareTo(Hi.min())>0&&(n.readTime=Ia(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Si()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.wr(t)}Ar(e){const t={};t.database=Ra(this.N),t.removeTarget=e,this.wr(t)}}class Ml extends Pl{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,i),this.N=r,this.Rr=!1}get Pr(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.br([])}Er(e){return this.nr.ji("Write",e)}onMessage(e){if(ki(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(e,t){return e&&e.length>0?(ki(void 0!==t),e.map(e=>function(e,t){let n=Sa(e.updateTime?e.updateTime:t);return n.isEqual(Hi.min())&&(n=Sa(t)),new Co(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Sa(e.commitTime);return this.listener.vr(n,t)}return ki(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Ra(this.N),this.wr(e)}br(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ma(this.N,e))};this.wr(t)}}class Fl extends class{}{constructor(e,t,n){super(),this.credentials=e,this.nr=t,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new Ni(Ci.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Li(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ci.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Ni(Ci.UNKNOWN,e.toString())})}Ki(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Ki(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ci.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Ni(Ci.UNKNOWN,e.toString())})}terminate(){this.Dr=!0}}class Vl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(Ii(t),this.$r=!1):bi("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class Ul{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=i,this.Qr.Ei(e=>{n.enqueueAndForget((0,h.Z)(function*(){var e;Ql(s)&&(bi("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,h.Z)(function*(e){const t=Ai(e);t.Kr.add(4),yield Bl(t),t.Wr.set("Unknown"),t.Kr.delete(4),yield jl(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.Wr=new Vl(n,r)}}function jl(e){return ql.apply(this,arguments)}function ql(){return(ql=(0,h.Z)(function*(e){if(Ql(e))for(const t of e.jr)yield t(!0)})).apply(this,arguments)}function Bl(e){return zl.apply(this,arguments)}function zl(){return(zl=(0,h.Z)(function*(e){for(const t of e.jr)yield t(!1)})).apply(this,arguments)}function Hl(e,t){const n=Ai(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),Wl(n)?Kl(n):Th(n).cr()&&$l(n,t))}function Zl(e,t){const n=Ai(e),r=Th(n);n.qr.delete(t),r.cr()&&Gl(n,t),0===n.qr.size&&(r.cr()?r.lr():Ql(n)&&n.Wr.set("Unknown"))}function $l(e,t){e.Gr.Y(t.targetId),Th(e).Ir(t)}function Gl(e,t){e.Gr.Y(t),Th(e).Ar(t)}function Kl(e){e.Gr=new ga({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.qr.get(t)||null}),Th(e).start(),e.Wr.Or()}function Wl(e){return Ql(e)&&!Th(e).ar()&&e.qr.size>0}function Ql(e){return 0===Ai(e).Kr.size}function Yl(e){e.Gr=void 0}function Jl(e){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,h.Z)(function*(e){e.qr.forEach((t,n)=>{$l(e,t)})})).apply(this,arguments)}function eh(e,t){return th.apply(this,arguments)}function th(){return(th=(0,h.Z)(function*(e,t){Yl(e),Wl(e)?(e.Wr.Lr(t),Kl(e)):e.Wr.set("Unknown")})).apply(this,arguments)}function nh(e,t,n){return rh.apply(this,arguments)}function rh(){return(rh=(0,h.Z)(function*(e,t,n){if(e.Wr.set("Online"),t instanceof pa&&2===t.state&&t.cause)try{yield(r=(0,h.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.qr.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.qr.delete(r),e.Gr.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){bi("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield ih(e,n)}else if(t instanceof da?e.Gr.rt(t):t instanceof fa?e.Gr.ft(t):e.Gr.ct(t),!n.isEqual(Hi.min()))try{const t=yield Zc(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.Gr._t(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.qr.get(t);if(!n)return;e.qr.set(t,n.withResumeToken(Xi.EMPTY_BYTE_STRING,n.snapshotVersion)),Gl(e,t);const r=new Lu(n.target,t,1,n.sequenceNumber);$l(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){bi("RemoteStore","Failed to raise snapshot:",t),yield ih(e,t)}var r})).apply(this,arguments)}function ih(e,t,n){return sh.apply(this,arguments)}function sh(){return(sh=(0,h.Z)(function*(e,t,n){if(!ku(t))throw t;e.Kr.add(1),yield Bl(e),e.Wr.set("Offline"),n||(n=()=>Zc(e.localStore)),e.asyncQueue.enqueueRetryable((0,h.Z)(function*(){bi("RemoteStore","Retrying IndexedDB access"),yield n(),e.Kr.delete(1),yield jl(e)}))})).apply(this,arguments)}function oh(e,t){return t().catch(n=>ih(e,n,t))}function ah(e){return uh.apply(this,arguments)}function uh(){return(uh=(0,h.Z)(function*(e){const t=Ai(e),n=Eh(t);let r=t.Ur.length>0?t.Ur[t.Ur.length-1].batchId:-1;for(;ch(t);)try{const e=yield Kc(t.localStore,r);if(null===e){0===t.Ur.length&&n.lr();break}r=e.batchId,lh(t,e)}catch(e){yield ih(t,e)}hh(t)&&dh(t)})).apply(this,arguments)}function ch(e){return Ql(e)&&e.Ur.length<10}function lh(e,t){e.Ur.push(t);const n=Eh(e);n.cr()&&n.Pr&&n.br(t.mutations)}function hh(e){return Ql(e)&&!Eh(e).ar()&&e.Ur.length>0}function dh(e){Eh(e).start()}function fh(e){return ph.apply(this,arguments)}function ph(){return(ph=(0,h.Z)(function*(e){Eh(e).Sr()})).apply(this,arguments)}function mh(e){return gh.apply(this,arguments)}function gh(){return(gh=(0,h.Z)(function*(e){const t=Eh(e);for(const n of e.Ur)t.br(n.mutations)})).apply(this,arguments)}function yh(e,t,n){return vh.apply(this,arguments)}function vh(){return(vh=(0,h.Z)(function*(e,t,n){const r=e.Ur.shift(),i=Pu.from(r,t,n);yield oh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield ah(e)})).apply(this,arguments)}function _h(e,t){return wh.apply(this,arguments)}function wh(){return(wh=(0,h.Z)(function*(e,t){var n;t&&Eh(e).Pr&&(yield(n=(0,h.Z)(function*(e,t){if(Go(n=t.code)&&n!==Ci.ABORTED){const n=e.Ur.shift();Eh(e).hr(),yield oh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield ah(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),hh(e)&&dh(e)})).apply(this,arguments)}function bh(e,t){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,h.Z)(function*(e,t){const n=Ai(e);t?(n.Kr.delete(2),yield jl(n)):t||(n.Kr.add(2),yield Bl(n),n.Wr.set("Unknown"))})).apply(this,arguments)}function Th(e){return e.zr||(e.zr=function(e,t,n){const r=Ai(e);return r.Cr(),new Ll(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Jl.bind(null,e),Ci:eh.bind(null,e),Tr:nh.bind(null,e)}),e.jr.push(function(){var t=(0,h.Z)(function*(t){t?(e.zr.hr(),Wl(e)?Kl(e):e.Wr.set("Unknown")):(yield e.zr.stop(),Yl(e))});return function(e){return t.apply(this,arguments)}}())),e.zr}function Eh(e){return e.Hr||(e.Hr=function(e,t,n){const r=Ai(e);return r.Cr(),new Ml(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:fh.bind(null,e),Ci:_h.bind(null,e),Vr:mh.bind(null,e),vr:yh.bind(null,e)}),e.jr.push(function(){var t=(0,h.Z)(function*(t){t?(e.Hr.hr(),yield ah(e)):(yield e.Hr.stop(),e.Ur.length>0&&(bi("RemoteStore",`Stopping write stream with ${e.Ur.length} pending writes`),e.Ur=[]))});return function(e){return t.apply(this,arguments)}}())),e.Hr}class Sh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Sh(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ni(Ci.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kh(e,t){if(Ii("AsyncQueue",`${t}: ${e}`),ku(e))return new Ni(Ci.UNAVAILABLE,`${t}: ${e}`);throw e}class Ah{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ls.comparator(t.key,n.key):(e,t)=>ls.comparator(e.key,t.key),this.keyedMap=ra(),this.sortedSet=new Wo(this.comparator)}static emptySet(e){return new Ah(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ah))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ah;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ch{constructor(){this.Jr=new Wo(ls.comparator)}track(e){const t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):Si():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,n)=>{e.push(n)}),e}}class Nh{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Nh(e,t,Ah.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&so(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class xh{constructor(){this.Xr=void 0,this.listeners=[]}}class Dh{constructor(){this.queries=new Ic(e=>oo(e),so),this.onlineState="Unknown",this.Zr=new Set}}function Rh(e,t){return Oh.apply(this,arguments)}function Oh(){return(Oh=(0,h.Z)(function*(e,t){const n=Ai(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new xh),i)try{s.Xr=yield n.onListen(r)}catch(e){const n=kh(e,`Initialization of query '${ao(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.eo(n.onlineState),s.Xr&&t.no(s.Xr)&&Vh(n)})).apply(this,arguments)}function Ph(e,t){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,h.Z)(function*(e,t){const n=Ai(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function Mh(e,t){const n=Ai(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.no(i)&&(r=!0);e.Xr=i}}r&&Vh(n)}function Fh(e,t,n){const r=Ai(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function Vh(e){e.Zr.forEach(e=>{e.next()})}class Uh{constructor(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Nh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=Nh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class jh{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class qh{constructor(e){this.N=e}zn(e){return Na(this.N,e)}Hn(e){return e.metadata.exists?La(this.N,e.document,!1):As.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Sa(e)}}class Bh{constructor(e,t,n){this.lo=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=zh(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,n=new qh(this.N);for(const r of e)if(r.metadata.queries){const e=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||aa()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,h.Z)(function*(){const t=yield function(e,t,n,r){return nl.apply(this,arguments)}(e.localStore,new qh(e.N),e.documents,e.lo.id),n=e.wo(e.documents);for(const r of e.queries)yield rl(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",new Mc(Object.assign({},e.progress),t)})()}}function zh(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Hh{constructor(e){this.key=e}}class Zh{constructor(e){this.key=e}}class $h{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=aa(),this.mutatedKeys=aa(),this.po=co(e),this.Eo=new Ah(this.po)}get To(){return this._o}Io(e,t){const n=t?t.Ao:new Ch,r=t?t.Eo:this.Eo;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=Ys(this.query)&&r.size===this.query.limit?r.last():null,u=Js(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),l=uo(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Ro(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.po(l,a)>0||u&&this.po(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),Ys(this.query)||Js(this.query))for(;s.size>this.query.limit;){const e=Ys(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Eo:s,Ao:n,Ln:o,mutatedKeys:i}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;const i=e.Ao.Yr();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Si()}};return n(e)-n(t)}(e.type,t.type)||this.po(e.doc,t.doc)),this.Po(n);const s=t?this.bo():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==i.length||a?{snapshot:new Nh(this.query,e.Eo,r,i,e.mutatedKeys,0===o,a,!1),vo:s}:{vo:s}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Ch,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}Po(e){e&&(e.addedDocuments.forEach(e=>this._o=this._o.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._o=this._o.delete(e)),this.current=e.current)}bo(){if(!this.current)return[];const e=this.yo;this.yo=aa(),this.Eo.forEach(e=>{this.Vo(e.key)&&(this.yo=this.yo.add(e.key))});const t=[];return e.forEach(e=>{this.yo.has(e)||t.push(new Zh(e))}),this.yo.forEach(n=>{e.has(n)||t.push(new Hh(n))}),t}So(e){this._o=e.Gn,this.yo=aa();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return Nh.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class Gh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Kh{constructor(e){this.key=e,this.Co=!1}}class Wh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.No={},this.xo=new Ic(e=>oo(e),so),this.ko=new Map,this.$o=new Set,this.Oo=new Wo(ls.comparator),this.Fo=new Map,this.Mo=new ol,this.Lo={},this.Bo=new Map,this.Uo=cc.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function Qh(e,t){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,h.Z)(function*(e,t){const n=jd(e);let r,i;const s=n.xo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Do();else{const e=yield Wc(n.localStore,ro(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield Jh(n,t,r,"current"===s),n.isPrimaryClient&&Hl(n.remoteStore,e)}return i})).apply(this,arguments)}function Jh(e,t,n,r){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,h.Z)(function*(e,t,n,r){e.Ko=(t,n,r)=>{return(i=(0,h.Z)(function*(e,t,n,r){let i=t.view.Io(n);i.Ln&&(i=yield Jc(e.localStore,t.query,!1).then(({documents:e})=>t.view.Io(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return yd(e,t.targetId,o.vo),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield Jc(e.localStore,t,!0),s=new $h(t,i.Gn),o=s.Io(i.documents),a=ha.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=s.applyChanges(o,e.isPrimaryClient,a);yd(e,n,u.vo);const c=new Gh(t,n,s);return e.xo.set(t,c),e.ko.has(n)?e.ko.get(n).push(t):e.ko.set(n,[t]),u.snapshot})).apply(this,arguments)}function ed(e,t){return td.apply(this,arguments)}function td(){return(td=(0,h.Z)(function*(e,t){const n=Ai(e),r=n.xo.get(t),i=n.ko.get(r.targetId);if(i.length>1)return n.ko.set(r.targetId,i.filter(e=>!so(e,t))),void n.xo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Qc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Zl(n.remoteStore,r.targetId),md(n,r.targetId)}).catch(pc))):(md(n,r.targetId),yield Qc(n.localStore,r.targetId,!0))})).apply(this,arguments)}function nd(){return(nd=(0,h.Z)(function*(e,t,n){const r=qd(e);try{const e=yield function(e,t){const n=Ai(e),r=zi.now(),i=t.reduce((e,t)=>e.add(t.key),aa());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Qn.bn(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=Po(e,s.get(e.key));null!=t&&o.push(new Vo(e.key,t,ks(t.value.mapValue),No.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Lo[e.currentUser.toKey()];r||(r=new Wo(ji)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,e.batchId,n),yield wd(r,e.changes),yield ah(r.remoteStore)}catch(e){const t=kh(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function rd(e,t){return id.apply(this,arguments)}function id(){return(id=(0,h.Z)(function*(e,t){const n=Ai(e);try{const e=yield $c(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Fo.get(t);r&&(ki(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?ki(r.Co):e.removedDocuments.size>0&&(ki(r.Co),r.Co=!1))}),yield wd(n,e,t)}catch(e){yield pc(e)}})).apply(this,arguments)}function sd(e,t,n){const r=Ai(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xo.forEach((n,r)=>{const i=r.view.eo(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ai(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.eo(t)&&(r=!0)}),r&&Vh(n)}(r.eventManager,t),e.length&&r.No.Tr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function od(e,t,n){return ad.apply(this,arguments)}function ad(){return(ad=(0,h.Z)(function*(e,t,n){const r=Ai(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fo.get(t),s=i&&i.key;if(s){let e=new Wo(ls.comparator);e=e.insert(s,As.newNoDocument(s,Hi.min()));const n=aa().add(s),i=new la(Hi.min(),new Map,new Jo(ji),e,n);yield rd(r,i),r.Oo=r.Oo.remove(s),r.Fo.delete(t),_d(r)}else yield Qc(r.localStore,t,!1).then(()=>md(r,t,n)).catch(pc)})).apply(this,arguments)}function ud(e,t){return cd.apply(this,arguments)}function cd(){return(cd=(0,h.Z)(function*(e,t){const n=Ai(e),r=t.batch.batchId;try{const e=yield Hc(n.localStore,t);pd(n,r,null),fd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield wd(n,e)}catch(e){yield pc(e)}})).apply(this,arguments)}function ld(e,t,n){return hd.apply(this,arguments)}function hd(){return(hd=(0,h.Z)(function*(e,t,n){const r=Ai(e);try{const e=yield function(e,t){const n=Ai(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.In.lookupMutationBatch(e,t).next(t=>(ki(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t))).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.bn(e,r))})}(r.localStore,t);pd(r,t,n),fd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield wd(r,e)}catch(n){yield pc(n)}})).apply(this,arguments)}function dd(){return(dd=(0,h.Z)(function*(e,t){const n=Ai(e);Ql(n.remoteStore)||bi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=Ai(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.In.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Bo.get(e)||[];r.push(t),n.Bo.set(e,r)}catch(e){const n=kh(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function fd(e,t){(e.Bo.get(t)||[]).forEach(e=>{e.resolve()}),e.Bo.delete(t)}function pd(e,t,n){const r=Ai(e);let i=r.Lo[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function md(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ko.get(t))e.xo.delete(r),n&&e.No.jo(r,n);e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach(t=>{e.Mo.containsKey(t)||gd(e,t)})}function gd(e,t){e.$o.delete(t.path.canonicalString());const n=e.Oo.get(t);null!==n&&(Zl(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),_d(e))}function yd(e,t,n){for(const r of n)r instanceof Hh?(e.Mo.addReference(r.key,t),vd(e,r)):r instanceof Zh?(bi("SyncEngine","Document no longer in limbo: "+r.key),e.Mo.removeReference(r.key,t),e.Mo.containsKey(r.key)||gd(e,r.key)):Si()}function vd(e,t){const n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(bi("SyncEngine","New document in limbo: "+n),e.$o.add(r),_d(e))}function _d(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){const t=e.$o.values().next().value;e.$o.delete(t);const n=new ls(Wi.fromString(t)),r=e.Uo.next();e.Fo.set(r,new Kh(n)),e.Oo=e.Oo.insert(n,r),Hl(e.remoteStore,new Lu(ro(Qs(n.path)),r,2,Fi.T))}}function wd(e,t,n){return bd.apply(this,arguments)}function bd(){return(bd=(0,h.Z)(function*(e,t,n){const r=Ai(e),i=[],s=[],o=[];var a;r.xo.isEmpty()||(r.xo.forEach((e,a)=>{o.push(r.Ko(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Vc.kn(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.No.Tr(i),yield(a=(0,h.Z)(function*(e,t){const n=Ai(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>bu.forEach(t,t=>bu.forEach(t.Nn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>bu.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!ku(e))throw e;bi("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Un.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.Un=n.Un.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function Id(e,t){return Td.apply(this,arguments)}function Td(){return(Td=(0,h.Z)(function*(e,t){const n=Ai(e);if(!n.currentUser.isEqual(t)){bi("SyncEngine","User change. New user:",t.toKey());const e=yield Bc(n.localStore,t);n.currentUser=t,function(e,t){e.Bo.forEach(e=>{e.forEach(e=>{e.reject(new Ni(Ci.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Bo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield wd(n,e.Wn)}})).apply(this,arguments)}function Ed(e,t){const n=Ai(e),r=n.Fo.get(t);if(r&&r.Co)return aa().add(r.key);{let e=aa();const r=n.ko.get(t);if(!r)return e;for(const t of r){const r=n.xo.get(t);e=e.unionWith(r.view.To)}return e}}function Sd(e,t){return kd.apply(this,arguments)}function kd(){return(kd=(0,h.Z)(function*(e,t){const n=Ai(e),r=yield Jc(n.localStore,t.query,!0),i=t.view.So(r);return n.isPrimaryClient&&yd(n,t.targetId,i.vo),i})).apply(this,arguments)}function Ad(e){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,h.Z)(function*(e){const t=Ai(e);return el(t.localStore).then(e=>wd(t,e))})).apply(this,arguments)}function Nd(e,t,n,r){return xd.apply(this,arguments)}function xd(){return(xd=(0,h.Z)(function*(e,t,n,r){const i=Ai(e),s=yield function(e,t){const n=Ai(e),r=Ai(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xt(e,t).next(t=>t?n.Qn.bn(e,t):bu.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?yield ah(i.remoteStore):"acknowledged"===n||"rejected"===n?(pd(i,t,r||null),fd(i,t),function(e,t){Ai(Ai(e).In).te(t)}(i.localStore,t)):Si(),yield wd(i,s)):bi("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Dd(){return(Dd=(0,h.Z)(function*(e,t){const n=Ai(e);if(jd(n),qd(n),!0===t&&!0!==n.qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield Rd(n,e.toArray());n.qo=!0,yield bh(n.remoteStore,!0);for(const r of t)Hl(n.remoteStore,r)}else if(!1===t&&!1!==n.qo){const e=[];let t=Promise.resolve();n.ko.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(md(n,i),Qc(n.localStore,i,!0))),Zl(n.remoteStore,i)}),yield t,yield Rd(n,e),function(e){const t=Ai(e);t.Fo.forEach((e,n)=>{Zl(t.remoteStore,n)}),t.Mo.us(),t.Fo=new Map,t.Oo=new Wo(ls.comparator)}(n),n.qo=!1,yield bh(n.remoteStore,!1)}})).apply(this,arguments)}function Rd(e,t,n){return Od.apply(this,arguments)}function Od(){return(Od=(0,h.Z)(function*(e,t,n){const r=Ai(e),i=[],s=[];for(const o of t){let e;const t=r.ko.get(o);if(t&&0!==t.length){e=yield Wc(r.localStore,ro(t[0]));for(const e of t){const t=r.xo.get(e),n=yield Sd(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield Xc(r.localStore,o);e=yield Wc(r.localStore,t),yield Jh(r,Pd(t),o,!1)}i.push(e)}return r.No.Tr(s),i})).apply(this,arguments)}function Pd(e){return Ws(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ld(e){const t=Ai(e);return Ai(Ai(t.localStore).persistence).pn()}function Md(e,t,n,r){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,h.Z)(function*(e,t,n,r){const i=Ai(e);if(i.qo)bi("SyncEngine","Ignoring unexpected query state notification.");else if(i.ko.has(t))switch(n){case"current":case"not-current":{const e=yield el(i.localStore),r=la.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield wd(i,e,r);break}case"rejected":yield Qc(i.localStore,t,!0),md(i,t,r);break;default:Si()}})).apply(this,arguments)}function Vd(e,t,n){return Ud.apply(this,arguments)}function Ud(){return(Ud=(0,h.Z)(function*(e,t,n){const r=jd(e);if(r.qo){for(const e of t){if(r.ko.has(e)){bi("SyncEngine","Adding an already active target "+e);continue}const t=yield Xc(r.localStore,e),n=yield Wc(r.localStore,t);yield Jh(r,Pd(t),n.targetId,!1),Hl(r.remoteStore,n)}for(const e of n)r.ko.has(e)&&(yield Qc(r.localStore,e,!1).then(()=>{Zl(r.remoteStore,e),md(r,e)}).catch(pc))}})).apply(this,arguments)}function jd(e){const t=Ai(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ed.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=od.bind(null,t),t.No.Tr=Mh.bind(null,t.eventManager),t.No.jo=Fh.bind(null,t.eventManager),t}function qd(e){const t=Ai(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ud.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ld.bind(null,t),t}class Bd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,h.Z)(function*(){t.N=Rl(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return qc(this.persistence,new Uc,e.initialUser,this.N)}Go(e){return new dl(pl.Ns,this.N)}Wo(e){return new El}terminate(){var e=this;return(0,h.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class zd extends Bd{constructor(e,t,n){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,h.Z)(function*(){yield t().call(n,e),yield function(e){return tl.apply(this,arguments)}(n.localStore),yield n.Jo.initialize(n,e),yield qd(n.Jo.syncEngine),yield ah(n.Jo.remoteStore),yield n.persistence.nn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ho(e){return qc(this.persistence,new Uc,e.initialUser,this.N)}zo(e){return new vc(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=Lc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?tc.withCacheSize(this.cacheSizeBytes):tc.DEFAULT;return new Rc(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,xl(),Dl(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new El}}class Hd extends zd{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,h.Z)(function*(){yield t().call(n,e);const r=n.Jo.syncEngine;n.sharedClientState instanceof Tl&&(n.sharedClientState.syncEngine={_i:Nd.bind(null,r),mi:Md.bind(null,r),gi:Vd.bind(null,r),pn:Ld.bind(null,r),wi:Ad.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.nn(function(){var e=(0,h.Z)(function*(e){yield function(e,t){return Dd.apply(this,arguments)}(n.Jo.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}Wo(e){const t=xl();if(!Tl.Pt(t))throw new Ni(Ci.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Lc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tl(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Zd{initialize(e,t){var n=this;return(0,h.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>sd(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=Id.bind(null,n.syncEngine),yield bh(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Dh}createDatastore(e){const t=Rl(e.databaseInfo.databaseId),n=new Nl(e.databaseInfo);return function(e,t,n){return new Fl(e,t,n)}(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>sd(this.syncEngine,e,0),s=kl.Pt()?new kl:new Sl,new Ul(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Wh(e,t,n,r,i,s);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,h.Z)(function*(e){const t=Ai(e);bi("RemoteStore","RemoteStore shutting down."),t.Kr.add(5),yield Bl(t),t.Qr.shutdown(),t.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function $d(e,t=10240){let n=0;return{read:()=>(0,h.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,h.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Gd{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Kd{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new xi,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(e=>{e&&e.ho()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,h.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,h.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,h.Z)(function*(){const t=yield e.na();if(null===t)return null;const n=e.ta.decode(t),r=Number(n);isNaN(r)&&e.sa(`length string (${n}) is not valid number`);const i=yield e.ia(r);return new jh(JSON.parse(i),t.length+r)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,h.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ia(e){var t=this;return(0,h.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const n=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,h.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class Wd{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,h.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ni(Ci.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,h.Z)(function*(e,t){const n=Ai(e),r=Ra(n.N)+"/documents",i={documents:t.map(e=>Ca(n.N,e))},s=yield n.Ki("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){ki(!!t.found);const n=Na(e,t.found.name),r=Sa(t.found.updateTime),i=new Ss({mapValue:{fields:t.found.fields}});return As.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){ki(!!t.missing),ki(!!t.readTime);const n=Na(e,t.missing),r=Sa(t.readTime);return As.newNoDocument(n,r)}(e,t):Si()}(n.N,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());ki(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,h.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=ls.fromPath(n);e.mutations.push(new zo(r,e.precondition(r)))}),yield(n=(0,h.Z)(function*(e,t){const n=Ai(e),r=Ra(n.N)+"/documents",i={writes:t.map(e=>Ma(n.N,e))};yield n.Li("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Si();t=Hi.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ni(Ci.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?No.updateTime(t):No.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hi.min()))throw new Ni(Ci.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return No.updateTime(t)}return No.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Qd{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.aa=5,this.rr=new Ol(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,h.Z)(function*(){const t=new Wd(e.datastore),n=e.ua(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.ha(t)}))}).catch(t=>{e.ha(t)})}))}ua(e){try{const t=this.updateFunction(e);return!as(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Go(t)}return!1}}class Yd{constructor(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=yi.UNAUTHENTICATED,this.clientId=Ui.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var e=(0,h.Z)(function*(e){bi("FirestoreClient","Received user=",e.uid),yield r.credentialListener(e),r.user=e});return function(t){return e.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,h.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ni(Ci.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,h.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(n){const e=kh(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function Jd(e,t){return Xd.apply(this,arguments)}function Xd(){return(Xd=(0,h.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),bi("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,h.Z)(function*(e){r.isEqual(e)||(yield Bc(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function ef(e,t){return tf.apply(this,arguments)}function tf(){return(tf=(0,h.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield nf(e);bi("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>{return(n=(0,h.Z)(function*(e,t){const n=Ai(e);n.asyncQueue.verifyOperationInProgress(),bi("RemoteStore","RemoteStore received new credentials");const r=Ql(n);n.Kr.add(3),yield Bl(n),r&&n.Wr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.Kr.delete(3),yield jl(n)}),function(e,t){return n.apply(this,arguments)})(t.remoteStore,e);var n}),e.onlineComponents=t})).apply(this,arguments)}function nf(e){return rf.apply(this,arguments)}function rf(){return(rf=(0,h.Z)(function*(e){return e.offlineComponents||(bi("FirestoreClient","Using default OfflineComponentProvider"),yield Jd(e,new Bd)),e.offlineComponents})).apply(this,arguments)}function sf(e){return of.apply(this,arguments)}function of(){return(of=(0,h.Z)(function*(e){return e.onlineComponents||(bi("FirestoreClient","Using default OnlineComponentProvider"),yield ef(e,new Zd)),e.onlineComponents})).apply(this,arguments)}function af(e){return nf(e).then(e=>e.persistence)}function uf(e){return nf(e).then(e=>e.localStore)}function cf(e){return sf(e).then(e=>e.remoteStore)}function lf(e){return sf(e).then(e=>e.syncEngine)}function hf(e){return df.apply(this,arguments)}function df(){return(df=(0,h.Z)(function*(e){const t=yield sf(e),n=t.eventManager;return n.onListen=Qh.bind(null,t.syncEngine),n.onUnlisten=ed.bind(null,t.syncEngine),n})).apply(this,arguments)}function ff(e,t,n={}){const r=new xi;return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(e,t,n,r,i){const s=new Gd({next:s=>{t.enqueueAndForget(()=>Ph(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Ni(Ci.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Ni(Ci.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Uh(Qs(n.path),s,{includeMetadataChanges:!0,uo:!0});return Rh(e,o)}(yield hf(e),e.asyncQueue,t,n,r)})),r.promise}function pf(e,t,n={}){const r=new xi;return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(e,t,n,r,i){const s=new Gd({next:n=>{t.enqueueAndForget(()=>Ph(e,o)),n.fromCache&&"server"===r.source?i.reject(new Ni(Ci.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Uh(n,s,{includeMetadataChanges:!0,uo:!0});return Rh(e,o)}(yield hf(e),e.asyncQueue,t,n,r)})),r.promise}class mf{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class gf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gf&&e.projectId===this.projectId&&e.database===this.database}}const yf=new Map;function vf(e,t,n){if(!n)throw new Ni(Ci.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function _f(e,t,n,r){if(!0===t&&!0===r)throw new Ni(Ci.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function wf(e){if(!ls.isDocumentKey(e))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function bf(e){if(ls.isDocumentKey(e))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function If(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){if(e.constructor){const t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Si()}function Tf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ni(Ci.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=If(e);throw new Ni(Ci.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Ef(e,t){if(t<=0)throw new Ni(Ci.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Sf{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ni(Ci.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ni(Ci.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_f("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kf{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sf({}),this._settingsFrozen=!1,e instanceof gf?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ni(Ci.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gf(e.options.projectId)}(e))}get app(){if(!this._app)throw new Ni(Ci.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ni(Ci.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sf(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Ri;switch(e.type){case"gapi":const t=e.client;return ki(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Mi(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ni(Ci.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yf.get(e);t&&(bi("ComponentProvider","Removing Datastore"),yf.delete(e),t.terminate())}(this),Promise.resolve()}}class Af{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Af(this.firestore,e,this._key)}}class Cf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Cf(this.firestore,e,this._query)}}class Nf extends Cf{constructor(e,t,n){super(e,t,Qs(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Af(this.firestore,null,new ls(e))}withConverter(e){return new Nf(this.firestore,e,this._path)}}function xf(e,t,...n){if(e=(0,ue.m9)(e),vf("collection","path",t),e instanceof kf){const r=Wi.fromString(t,...n);return bf(r),new Nf(e,null,r)}{if(!(e instanceof Af||e instanceof Nf))throw new Ni(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=Wi.fromString(e.path,...n).child(Wi.fromString(t));return bf(r),new Nf(e.firestore,null,r)}}function Df(e,t,...n){if(e=(0,ue.m9)(e),1===arguments.length&&(t=Ui.I()),vf("doc","path",t),e instanceof kf){const r=Wi.fromString(t,...n);return wf(r),new Af(e,null,new ls(r))}{if(!(e instanceof Af||e instanceof Nf))throw new Ni(Ci.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Wi.fromString(t,...n));return wf(r),new Af(e.firestore,e instanceof Nf?e.converter:null,new ls(r))}}function Rf(e,t){return e=(0,ue.m9)(e),t=(0,ue.m9)(t),(e instanceof Af||e instanceof Nf)&&(t instanceof Af||t instanceof Nf)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Of(e,t){return e=(0,ue.m9)(e),t=(0,ue.m9)(t),e instanceof Cf&&t instanceof Cf&&e.firestore===t.firestore&&so(e._query,t._query)&&e.converter===t.converter}class Pf{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Ol(this,"async_queue_retry"),this.Ea=()=>{const e=Dl();e&&bi("AsyncQueue","Visibility state changed to "+e.visibilityState),this.rr.tr()};const e=Dl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ta(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=Dl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}enqueue(e){if(this.Ta(),this.wa)return new Promise(()=>{});const t=new xi;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,h.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!ku(t))throw t;bi("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(e=>{throw this.ma=e,this.ga=!1,Ii("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.ga=!1,e))));return this.fa=t,t}enqueueAfterDelay(e,t,n){this.Ta(),this.pa.indexOf(e)>-1&&(t=0);const r=Sh.createAndSchedule(this,e,t,n,e=>this.Ra(e));return this._a.push(r),r}Ta(){this.ma&&Si()}verifyOperationInProgress(){}Pa(){var e=this;return(0,h.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}ba(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.Pa().then(()=>{this._a.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pa()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function Lf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Mf{constructor(){this._progressObserver={},this._taskCompletionResolver=new xi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ff extends kf{constructor(e,t){super(e,t),this.type="firestore",this._queue=new Pf,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Uf(this),this._firestoreClient.terminate()}}function Vf(e){return e._firestoreClient||Uf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Uf(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new mf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Yd(e._credentials,e._queue,r)}function jf(e,t,n){const r=new xi;return e.asyncQueue.enqueue((0,h.Z)(function*(){try{yield Jd(e,n),yield ef(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===Ci.FAILED_PRECONDITION||e.code===Ci.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()=>r.promise)}function qf(e){if(e._initialized||e._terminated)throw new Ni(Ci.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ni(Ci.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zf(Xi.fromBase64String(e))}catch(e){throw new Ni(Ci.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new zf(Xi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hf{constructor(e){this._methodName=e}}class Zf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ni(Ci.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ni(Ci.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ji(this._lat,e._lat)||ji(this._long,e._long)}}const $f=/^__.*__$/;class Gf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Vo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fo(e,this.data,t,this.fieldTransforms)}}class Kf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Vo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Si()}}class Qf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new Qf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}$a(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return gp(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(Wf(this.Da)&&$f.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class Yf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||Rl(e)}Ba(e,t,n,r=!1){return new Qf({Da:e,methodName:t,La:n,path:Yi.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Jf(e){const t=e._freezeSettings(),n=Rl(e._databaseId);return new Yf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Xf(e,t,n,r,i,s={}){const o=e.Ba(s.merge||s.mergeFields?2:0,t,n,i);dp("Data must be an object, but it was:",o,r);const a=lp(r,o);let u,c;if(s.merge)u=new Ji(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=fp(t,r,n);if(!o.contains(i))throw new Ni(Ci.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);yp(e,i)||e.push(i)}u=new Ji(e),c=o.fieldTransforms.filter(e=>u.covers(e.field))}else u=null,c=o.fieldTransforms;return new Gf(new Ss(a),u,c)}class ep extends Hf{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ep}}function tp(e,t,n){return new Qf({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}class np extends Hf{_toFieldTransform(e){return new Ao(e.path,new _o)}isEqual(e){return e instanceof np}}class rp extends Hf{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=tp(this,e,!0),n=this.Ua.map(e=>cp(e,t)),r=new wo(n);return new Ao(e.path,r)}isEqual(e){return this===e}}class ip extends Hf{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=tp(this,e,!0),n=this.Ua.map(e=>cp(e,t)),r=new Io(n);return new Ao(e.path,r)}isEqual(e){return this===e}}class sp extends Hf{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new Eo(e.N,po(e.N,this.qa));return new Ao(e.path,t)}isEqual(e){return this===e}}function op(e,t,n,r){const i=e.Ba(1,t,n);dp("Data must be an object, but it was:",i,r);const s=[],o=Ss.empty();$i(r,(e,r)=>{const a=mp(t,e,n);r=(0,ue.m9)(r);const u=i.$a(a);if(r instanceof ep)s.push(a);else{const e=cp(r,u);null!=e&&(s.push(a),o.set(a,e))}});const a=new Ji(s);return new Kf(o,a,i.fieldTransforms)}function ap(e,t,n,r,i,s){const o=e.Ba(1,t,n),a=[fp(t,r,n)],u=[i];if(s.length%2!=0)throw new Ni(Ci.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(fp(t,s[d])),u.push(s[d+1]);const c=[],l=Ss.empty();for(let d=a.length-1;d>=0;--d)if(!yp(c,a[d])){const e=a[d];let t=u[d];t=(0,ue.m9)(t);const n=o.$a(e);if(t instanceof ep)c.push(e);else{const r=cp(t,n);null!=r&&(c.push(e),l.set(e,r))}}const h=new Ji(c);return new Kf(l,h,o.fieldTransforms)}function up(e,t,n,r=!1){return cp(n,e.Ba(r?4:3,t))}function cp(e,t){if(hp(e=(0,ue.m9)(e)))return dp("Unsupported field value:",t,e),lp(e,t);if(e instanceof Hf)return function(e,t){if(!Wf(t.Da))throw t.Fa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Fa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=cp(i,t.Oa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,ue.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return po(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=zi.fromDate(e);return{timestampValue:Ia(t.N,n)}}if(e instanceof zi){const n=new zi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ia(t.N,n)}}if(e instanceof Zf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof zf)return{bytesValue:Ta(t.N,e._byteString)};if(e instanceof Af){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ka(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa(`Unsupported field value: ${If(e)}`)}(e,t)}function lp(e,t){const n={};return Gi(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$i(e,(e,r)=>{const i=cp(r,t.Na(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function hp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof zi||e instanceof Zf||e instanceof zf||e instanceof Af||e instanceof Hf)}function dp(e,t,n){if(!hp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=If(n);throw t.Fa("an object"===r?e+" a custom object":e+" "+r)}}function fp(e,t,n){if((t=(0,ue.m9)(t))instanceof Bf)return t._internalPath;if("string"==typeof t)return mp(e,t);throw gp("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const pp=new RegExp("[~\\*/\\[\\]]");function mp(e,t,n){if(t.search(pp)>=0)throw gp(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Bf(...t.split("."))._internalPath}catch(r){throw gp(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function gp(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ni(Ci.INVALID_ARGUMENT,a+e+u)}function yp(e,t){return e.some(e=>e.isEqual(t))}class vp{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Af(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _p(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _p extends vp{data(){return super.data()}}function wp(e,t){return"string"==typeof t?mp(e,t):t instanceof Bf?t._internalPath:t._delegate._internalPath}class bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ip extends vp{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(wp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Tp extends Ip{data(e={}){return super.data(e)}}class Ep{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Tp(this._firestore,this._userDataWriter,n.key,n,new bp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ni(Ci.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new Tp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new bp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Tp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Sp(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Sp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Si()}}function kp(e,t){return e instanceof Ip&&t instanceof Ip?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ep&&t instanceof Ep&&e._firestore===t._firestore&&Of(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Ap(e){if(Js(e)&&0===e.explicitOrderBy.length)throw new Ni(Ci.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cp{}function Np(e,...t){for(const n of t)e=n._apply(e);return e}class xp extends Cp{constructor(e,t,n){super(),this.Ka=e,this.ja=t,this.Qa=n,this.type="where"}_apply(e){const t=Jf(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){Fp(o,s);const t=[];for(const n of o)t.push(Mp(r,e,n));a={arrayValue:{values:t}}}else a=Mp(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Fp(o,s),a=up(n,"where",o,"in"===s||"not-in"===s);const u=Os.create(i,s,a);return function(e,t){if(t.v()){const n=eo(e);if(null!==n&&!n.isEqual(t.field))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=Xs(e);null!==r&&Vp(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Ni(Ci.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,u),u}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Cf(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Ks(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class Dp extends Cp{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ni(Ci.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ni(Ci.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Hs(t,n);return function(e,t){if(null===Xs(e)){const n=eo(e);null!==n&&Vp(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new Cf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ks(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Rp extends Cp{constructor(e,t,n){super(),this.type=e,this.Ga=t,this.za=n}_apply(e){return new Cf(e.firestore,e.converter,io(e._query,this.Ga,this.za))}}class Op extends Cp{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Lp(e,this.type,this.Ha,this.Ja);return new Cf(e.firestore,e.converter,function(e,t){return new Ks(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Pp extends Cp{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Lp(e,this.type,this.Ha,this.Ja);return new Cf(e.firestore,e.converter,function(e,t){return new Ks(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Lp(e,t,n,r){if(n[0]=(0,ue.m9)(n[0]),n[0]instanceof vp)return function(e,t,n,r,i){if(!r)throw new Ni(Ci.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of no(e))if(o.field.isKeyField())s.push(vs(t,r.key));else{const e=r.data.field(o.field);if(is(e))throw new Ni(Ci.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new Bs(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Jf(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Ni(Ci.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<i.length;u++){const s=i[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!to(e)&&-1!==s.indexOf("/"))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(Wi.fromString(s));if(!ls.isDocumentKey(n))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new ls(n);a.push(vs(t,i))}else{const e=up(n,r,s);a.push(e)}}return new Bs(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Mp(e,t,n){if("string"==typeof(n=(0,ue.m9)(n))){if(""===n)throw new Ni(Ci.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!to(t)&&-1!==n.indexOf("/"))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Wi.fromString(n));if(!ls.isDocumentKey(r))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vs(e,new ls(r))}if(n instanceof Af)return vs(e,n._key);throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${If(n)}.`)}function Fp(e,t){if(!Array.isArray(e)||0===e.length)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Vp(e,t,n){if(!n.isEqual(t))throw new Ni(Ci.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Up{convertValue(e,t="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ns(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Si()}}convertObject(e,t){const n={};return $i(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Zf(ns(e.latitude),ns(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ss(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(os(e));default:return null}}convertTimestamp(e){const t=ts(e);return new zi(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Wi.fromString(e);ki(Ya(n));const r=new gf(n.get(1),n.get(3)),i=new ls(n.popFirst(5));return r.isEqual(t)||Ii(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function jp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class qp extends Up{constructor(e){super(),this.firestore=e}convertBytes(e){return new zf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Af(this.firestore,null,t)}}class Bp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Jf(e)}set(e,t,n){this._verifyNotCommitted();const r=zp(e,this._firestore),i=jp(r.converter,t,n),s=Xf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,No.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=zp(e,this._firestore);let s;return s="string"==typeof(t=(0,ue.m9)(t))||t instanceof Bf?ap(this._dataReader,"WriteBatch.update",i._key,t,n,r):op(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,No.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zp(e,this._firestore);return this._mutations=this._mutations.concat(new Bo(t._key,No.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ni(Ci.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zp(e,t){if((e=(0,ue.m9)(e)).firestore!==t)throw new Ni(Ci.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Hp extends Up{constructor(e){super(),this.firestore=e}convertBytes(e){return new zf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Af(this.firestore,null,t)}}function Zp(e,t,n){e=Tf(e,Af);const r=Tf(e.firestore,Ff),i=jp(e.converter,t,n);return Kp(r,[Xf(Jf(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,No.none())])}function $p(e,t,n,...r){e=Tf(e,Af);const i=Tf(e.firestore,Ff),s=Jf(i);let o;return o="string"==typeof(t=(0,ue.m9)(t))||t instanceof Bf?ap(s,"updateDoc",e._key,t,n,r):op(s,"updateDoc",e._key,t),Kp(i,[o.toMutation(e._key,No.exists(!0))])}function Gp(e,...t){var n,r,i;e=(0,ue.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Lf(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(Lf(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,c,l;if(e instanceof Af)c=Tf(e.firestore,Ff),l=Qs(e._key.path),u={next:n=>{t[o]&&t[o](Wp(c,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Tf(e,Cf);c=Tf(n.firestore,Ff),l=n._query;const r=new Hp(c);u={next:e=>{t[o]&&t[o](new Ep(c,r,n,e))},error:t[o+1],complete:t[o+2]},Ap(e._query)}return function(e,t,n,r){const i=new Gd(r),s=new Uh(t,i,n);return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return Rh(yield hf(e),s)})),()=>{i.Xo(),e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return Ph(yield hf(e),s)}))}}(Vf(c),l,a,u)}function Kp(e,t){return function(e,t){const n=new xi;return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(e,t,n){return nd.apply(this,arguments)}(yield lf(e),t,n)})),n.promise}(Vf(e),t)}function Wp(e,t,n){const r=n.docs.get(t._key),i=new Hp(e);return new Ip(e,i,t._key,r,new bp(n.hasPendingWrites,n.fromCache),t.converter)}class Qp extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Jf(e)}get(e){const t=zp(e,this._firestore),n=new qp(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Si();const r=e[0];if(r.isFoundDocument())return new vp(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new vp(this._firestore,n,t._key,null,t.converter);throw Si()})}set(e,t,n){const r=zp(e,this._firestore),i=jp(r.converter,t,n),s=Xf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=zp(e,this._firestore);let s;return s="string"==typeof(t=(0,ue.m9)(t))||t instanceof Bf?ap(this._dataReader,"Transaction.update",i._key,t,n,r):op(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=zp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zp(e,this._firestore),n=new Hp(this._firestore);return super.get(e).then(e=>new Ip(this._firestore,n,t._key,e._document,new bp(!1,!1),t.converter))}}function Yp(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ni("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function Jp(){if("undefined"==typeof Uint8Array)throw new Ni("unimplemented","Uint8Arrays are not available in this environment.")}function Xp(){if("undefined"==typeof atob)throw new Ni("unimplemented","Blobs are unavailable in Firestore in this environment.")}vi=se.SDK_VERSION,(0,se._registerComponent)(new oe.wA("firestore",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new Ff(n,new Pi(e.getProvider("auth-internal")));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r},"PUBLIC")),(0,se.registerVersion)("@firebase/firestore","3.0.1",void 0);class em{constructor(e){this._delegate=e}static fromBase64String(e){return Xp(),new em(zf.fromBase64String(e))}static fromUint8Array(e){return Jp(),new em(zf.fromUint8Array(e))}toBase64(){return Xp(),this._delegate.toBase64()}toUint8Array(){return Jp(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function tm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class nm{enableIndexedDbPersistence(e,t){return function(e,t){qf(e=Tf(e,Ff));const n=Vf(e),r=e._freezeSettings(),i=new Zd;return jf(n,i,new zd(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){qf(e=Tf(e,Ff));const t=Vf(e),n=e._freezeSettings(),r=new Zd;return jf(t,r,new Hd(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Ni(Ci.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new xi;return e._queue.enqueueAndForgetEvenWhileRestricted((0,h.Z)(function*(){try{yield(n=(0,h.Z)(function*(e){if(!Tu.Pt())return Promise.resolve();const t=e+"main";yield Tu.delete(t)}),function(e){return n.apply(this,arguments)})(Lc(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise}(e._delegate)}}class rm{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof gf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Ti("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=Tf(e,kf))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Ti("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=yi.MOCK_USER;else{t=(0,ue.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ni(Ci.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new yi(s)}e._credentials=new Oi(new Di(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return e.asyncQueue.enqueue((0,h.Z)(function*(){const t=yield af(e),n=yield cf(e);return t.setNetworkEnabled(!0),function(e){const t=Ai(e);return t.Kr.delete(0),jl(t)}(n)}))}(Vf(Tf(this._delegate,Ff)))}disableNetwork(){return function(e){return e.asyncQueue.enqueue((0,h.Z)(function*(){const t=yield af(e),n=yield cf(e);return t.setNetworkEnabled(!1),(r=(0,h.Z)(function*(e){const t=Ai(e);t.Kr.add(0),yield Bl(t),t.Wr.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(Vf(Tf(this._delegate,Ff)))}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,_f("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){const t=new xi;return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(e,t){return dd.apply(this,arguments)}(yield lf(e),t)})),t.promise}(Vf(Tf(this._delegate,Ff)))}onSnapshotsInSync(e){return t=e,function(e,t){const n=new Gd(t);return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(e,t){Ai(e).Zr.add(t),t.next()}(yield hf(e),n)})),()=>{n.Xo(),e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return function(e,t){Ai(e).Zr.delete(t)}(yield hf(e),n)}))}}(Vf(Tf(this._delegate,Ff)),Lf(t)?t:{next:t});var t}get app(){if(!this._appCompat)throw new Ni("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ym(this,xf(this._delegate,e))}catch(t){throw cm(t,"collection()","Firestore.collection()")}}doc(e){try{return new um(this,Df(this._delegate,e))}catch(t){throw cm(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pm(this,function(e,t){if(e=Tf(e,kf),vf("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ni(Ci.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Cf(e,null,function(e){return new Ks(Wi.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw cm(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return n=t=>e(new sm(this,t)),function(e,t){const n=new xi;return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){const r=yield function(e){return sf(e).then(e=>e.datastore)}(e);new Qd(e.asyncQueue,r,t,n).run()})),n.promise}(Vf(t=this._delegate),e=>n(new Qp(t,e)));var t,n}batch(){return Vf(this._delegate),new om(new Bp(this._delegate,e=>Kp(this._delegate,e)))}loadBundle(e){return function(e,t){const n=Vf(e=Tf(e,Ff)),r=new Mf;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new Kd(e,t)}(function(e,t){if(e instanceof Uint8Array)return $d(e,t);if(e instanceof ArrayBuffer)return $d(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Rl(t));e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){!function(e,t,n){const r=Ai(e);var i;(i=(0,h.Z)(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=Ai(e),r=Sa(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Je.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(zh(r));const i=new Bh(r,e.localStore,t.N);let s=yield t.Qo();for(;s;){const e=yield i.fo(s);e&&n._updateProgress(e),s=yield t.Qo()}const o=yield i.complete();yield wd(e,o.Tn,void 0),yield function(e,t){const n=Ai(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Je.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress)}catch(e){Ti("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield lf(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return(t=this._delegate,n=e,function(e,t){return e.asyncQueue.enqueue((0,h.Z)(function*(){return function(e,t){const n=Ai(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Je.getNamedQuery(e,t))}(yield uf(e),t)}))}(Vf(t=Tf(t,Ff)),n).then(e=>e?new Cf(t,null,e.query):null)).then(e=>e?new pm(this,e):null);var t,n}}class im extends Up{constructor(e){super(),this.firestore=e}convertBytes(e){return new em(new zf(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return um.forKey(t,this.firestore,null)}}class sm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new im(e)}get(e){const t=vm(e);return this._delegate.get(t).then(e=>new dm(this._firestore,new Ip(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=vm(e);return n?(Yp("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=vm(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=vm(e);return this._delegate.delete(t),this}}class om{constructor(e){this._delegate=e}set(e,t,n){const r=vm(e);return n?(Yp("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=vm(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=vm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}let am=(()=>{class e{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Tp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fm(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(t,n){const r=e.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let s=i.get(n);return s||(s=new e(t,new im(t),n),i.set(n,s)),s}}return e.INSTANCES=new WeakMap,e})();class um{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new im(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Ni("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new um(t,new Af(t._delegate,n,new ls(e)))}static forKey(e,t,n){return new um(t,new Af(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ym(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ym(this.firestore,xf(this._delegate,e))}catch(t){throw cm(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ue.m9)(e))instanceof Af&&Rf(this._delegate,e)}set(e,t){t=Yp("DocumentReference.set",t);try{return t?Zp(this._delegate,e,t):Zp(this._delegate,e)}catch(n){throw cm(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?$p(this._delegate,e):$p(this._delegate,e,t,...n)}catch(r){throw cm(r,"updateDoc()","DocumentReference.update()")}}delete(){return Kp(Tf((e=this._delegate).firestore,Ff),[new Bo(e._key,No.none())]);var e}onSnapshot(...e){const t=lm(e),n=hm(e,e=>new dm(this.firestore,new Ip(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return Gp(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Tf(e,Af);const t=Tf(e.firestore,Ff),n=Vf(t),r=new Hp(t);return function(e,t){const n=new xi;return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return(r=(0,h.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=Ai(e);return n.persistence.runTransaction("read document","readonly",e=>n.Qn.An(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Ni(Ci.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=kh(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield uf(e),t,n);var r})),n.promise}(n,e._key).then(n=>new Ip(t,r,e._key,n,new bp(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Tf(e,Af);const t=Tf(e.firestore,Ff);return ff(Vf(t),e._key,{source:"server"}).then(n=>Wp(t,e,n))}(this._delegate):function(e){e=Tf(e,Af);const t=Tf(e.firestore,Ff);return ff(Vf(t),e._key).then(n=>Wp(t,e,n))}(this._delegate),t.then(e=>new dm(this.firestore,new Ip(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new um(this.firestore,this._delegate.withConverter(e?am.getInstance(this.firestore,e):null))}}function cm(e,t,n){return e.message=e.message.replace(t,n),e}function lm(e){for(const t of e)if("object"==typeof t&&!tm(t))return t;return{}}function hm(e,t){var n,r;let i;return i=tm(e[0])?e[0]:tm(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class dm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new um(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kp(this._delegate,e._delegate)}}class fm extends dm{data(e){const t=this._delegate.data(e);return void 0!==t||Si(),t}}class pm{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new im(e)}where(e,t,n){try{return new pm(this.firestore,Np(this._delegate,function(e,t,n){const r=t,i=wp("where",e);return new xp(i,r,n)}(e,t,n)))}catch(r){throw cm(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new pm(this.firestore,Np(this._delegate,function(e,t="asc"){const n=t,r=wp("orderBy",e);return new Dp(r,n)}(e,t)))}catch(n){throw cm(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pm(this.firestore,Np(this._delegate,(Ef("limit",t=e),new Rp("limit",t,"F"))))}catch(n){throw cm(n,"limit()","Query.limit()")}var t}limitToLast(e){try{return new pm(this.firestore,Np(this._delegate,(Ef("limitToLast",t=e),new Rp("limitToLast",t,"L"))))}catch(n){throw cm(n,"limitToLast()","Query.limitToLast()")}var t}startAt(...e){try{return new pm(this.firestore,Np(this._delegate,function(...e){return new Op("startAt",e,!0)}(...e)))}catch(t){throw cm(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pm(this.firestore,Np(this._delegate,function(...e){return new Op("startAfter",e,!1)}(...e)))}catch(t){throw cm(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pm(this.firestore,Np(this._delegate,function(...e){return new Pp("endBefore",e,!0)}(...e)))}catch(t){throw cm(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pm(this.firestore,Np(this._delegate,function(...e){return new Pp("endAt",e,!1)}(...e)))}catch(t){throw cm(t,"endAt()","Query.endAt()")}}isEqual(e){return Of(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=Tf(e,Cf);const t=Tf(e.firestore,Ff),n=Vf(t),r=new Hp(t);return function(e,t){const n=new xi;return e.asyncQueue.enqueueAndForget((0,h.Z)(function*(){return(r=(0,h.Z)(function*(e,t,n){try{const r=yield Jc(e,t,!0),i=new $h(t,r.Gn),s=i.Io(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=kh(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield uf(e),t,n);var r})),n.promise}(n,e._query).then(n=>new Ep(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Tf(e,Cf);const t=Tf(e.firestore,Ff),n=Vf(t),r=new Hp(t);return pf(n,e._query,{source:"server"}).then(n=>new Ep(t,r,e,n))}(this._delegate):function(e){e=Tf(e,Cf);const t=Tf(e.firestore,Ff),n=Vf(t),r=new Hp(t);return Ap(e._query),pf(n,e._query).then(n=>new Ep(t,r,e,n))}(this._delegate),t.then(e=>new gm(this.firestore,new Ep(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=lm(e),n=hm(e,e=>new gm(this.firestore,new Ep(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return Gp(this._delegate,t,n)}withConverter(e){return new pm(this.firestore,this._delegate.withConverter(e?am.getInstance(this.firestore,e):null))}}class mm{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new fm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gm{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new pm(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new fm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new mm(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new fm(this._firestore,n))})}isEqual(e){return kp(this._delegate,e._delegate)}}class ym extends pm{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new um(this.firestore,e):null}doc(e){try{return new um(this.firestore,void 0===e?Df(this._delegate):Df(this._delegate,e))}catch(t){throw cm(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Tf(e.firestore,Ff),r=Df(e),i=jp(e.converter,t);return Kp(n,[Xf(Jf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,No.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new um(this.firestore,e))}isEqual(e){return Rf(this._delegate,e._delegate)}withConverter(e){return new ym(this.firestore,this._delegate.withConverter(e?am.getInstance(this.firestore,e):null))}}function vm(e){return Tf(e,Af)}class _m{constructor(...e){this._delegate=new Bf(...e)}static documentId(){return new _m(Yi.keyField().canonicalString())}isEqual(e){return(e=(0,ue.m9)(e))instanceof Bf&&this._delegate._internalPath.isEqual(e._internalPath)}}class wm{constructor(e){this._delegate=e}static serverTimestamp(){const e=new np("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new wm(e)}static delete(){const e=new ep("deleteField");return e._methodName="FieldValue.delete",new wm(e)}static arrayUnion(...e){const t=function(...e){return new rp("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new wm(t)}static arrayRemove(...e){const t=function(...e){return new ip("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new wm(t)}static increment(e){const t=new sp("increment",e);return t._methodName="FieldValue.increment",new wm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const bm={Firestore:rm,GeoPoint:Zf,Timestamp:zi,Blob:em,Transaction:sm,WriteBatch:om,DocumentReference:um,DocumentSnapshot:dm,Query:pm,QueryDocumentSnapshot:fm,QuerySnapshot:gm,CollectionReference:ym,FieldPath:_m,FieldValue:wm,setLogLevel:function(e){_i.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};var Im,Tm;Tm=(e,t)=>new rm(e,t,new nm),(Im=ie.Z).INTERNAL.registerComponent(new oe.wA("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return Tm(t,n)},"PUBLIC").setServiceProps(Object.assign({},bm))),Im.registerVersion("@firebase/firestore-compat","0.1.1"),new r.OlP("angularfire2.enableFirestorePersistence"),new r.OlP("angularfire2.firestore.persistenceSettings"),new r.OlP("angularfire2.firestore.settings"),new r.OlP("angularfire2.firestore.use-emulator"),n(8470),n(6015),n(9342),n(2875),n(3982),n(6599),n(1564),(0,r.G48)(),l().bootstrapModule(class{}).catch(e=>console.error(e))},6304:(e,t,n)=>{"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,u,"next",e)}function u(e){r(o,i,s,a,u,"throw",e)}a(void 0)})}}n.d(t,{Z:()=>i})},4762:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>i,pi:()=>s,_T:()=>o,mG:()=>a,Jh:()=>u,XA:()=>c,CR:()=>l,ev:()=>h});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{u(r.next(e))}catch(t){s(t)}}function a(e){try{u(r.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}function u(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function h(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}}},e=>{"use strict";e(e.s=5005)}]);